/** @license


 SoundManager 2: JavaScript Sound for the Web
 ----------------------------------------------
 http://schillmania.com/projects/soundmanager2/

 Copyright (c) 2007, Scott Schiller. All rights reserved.
 Code provided under the BSD License:
 http://schillmania.com/projects/soundmanager2/license.txt

 V2.97a.20170601
*/

define("angular_helper",["angular"],function(){var e=Object.prototype.toString,n=function(n){return"[object Arguments]"===e.apply(n)||null!==n&&void 0!==n&&!!n.callee},t=function(n){return"[object Array]"===e.apply(n)},o=function(e){return"string"==typeof e},a=function(e){if(n(e)||t(e))return a.apply(null,e);if(e&&e.id)return e.id;throw"Unable to extract AngularJS module name from RequireJS module: "+e},i=function(){var e=[];return angular.forEach(arguments,function(a){n(a)||t(a)?e.push.apply(e,i.apply(null,a)):o(a)?e.push(a):a&&a.name&&t(a.requires)&&e.push(a.name)}),e},r=function(){var e=a(arguments),n=i.apply(null,arguments);return angular.module(e,n)},s=function(){var e=arguments;return function(n,t){var o=r(e);o.config(["ConfigProvider",function(e){e.setConfig(t)}]),angular.bootstrap(n,[o.name],{strictDi:!0})}},u=function(e,n){function t(t,o){var a=function(e){t.$evalAsync(function(){t[o]=angular.copy(e,t[o])})};t.$on("$destroy",e.$watch(n,a,!0)),a(e.$eval(n))}return t};return{configBootstrapper:s,createModule:r,scopeBinder:u}}),function(e,n){function t(t,o){function a(e){return yn.preferFlash&&ln&&!yn.ignoreFlash&&yn.flash[e]!==n&&yn.flash[e]}function i(e){return function(n){var t=this._s;return t&&t._a?n=e.call(this,n):(yn._wD(t&&t.id?t.id+": Ignoring "+n.type:"HTML5::Ignoring "+n.type),n=null),n}}this.setupOptions={url:t||null,flashVersion:8,debugMode:!0,debugFlash:!1,useConsole:!0,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,forceUseGlobalHTML5Audio:!1,ignoreMobileRestrictions:!1,html5Test:/^(probably|maybe)$/i,preferFlash:!1,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onerror:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,playbackRate:1,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={onfailure:null,isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1},flac:{type:["audio/flac"],required:!1}},this.movieID="sm2-container",this.id=o||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20170601",this.altURL=this.movieURL=this.version=null,this.enabled=this.swfLoaded=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.didFlashBlock=this.muted=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.ignoreFlash=this.html5Only=!1;var r,s,u,l,d,c,f,p,h,g,m,y,_,v,w,b,M,P,O,D,L,V,S,T,A,F,I,E,k,C,H,R,N,x,U,B,j,$,W,q,Y,K,z,Q,G,J,X,Z,en,nn,tn,on,an,rn,sn,un,ln,dn,cn,fn,pn,hn,gn,mn,yn=this,_n=null,vn=null,wn=navigator.userAgent,bn=e.location.href.toString(),Mn=document,Pn=[],On=!0,Dn=!1,Ln=!1,Vn=!1,Sn=!1,Tn=!1,An=0,Fn=["log","info","warn","error"],In=null,En=null,kn=!1,Cn=!1,Hn=0,Rn=null,Nn=[],xn=null,Un=Array.prototype.slice,Bn=!1,jn=0,$n=wn.match(/(ipad|iphone|ipod)/i),Wn=wn.match(/android/i),qn=wn.match(/msie|trident/i),Yn=wn.match(/webkit/i),Kn=wn.match(/safari/i)&&!wn.match(/chrome/i),zn=wn.match(/opera/i),Qn=wn.match(/(mobile|pre\/|xoom)/i)||$n||Wn,Gn=!bn.match(/usehtml5audio/i)&&!bn.match(/sm2-ignorebadua/i)&&Kn&&!wn.match(/silk/i)&&wn.match(/OS\sX\s10_6_([3-7])/i),Jn=e.console!==n&&console.log!==n,Xn=Mn.hasFocus!==n?Mn.hasFocus():null,Zn=Kn&&(Mn.hasFocus===n||!Mn.hasFocus()),et=!Zn,nt=/(mp3|mp4|mpa|m4a|m4b)/i,tt=Mn.location?Mn.location.protocol.match(/http/i):null,ot=tt?"":"//",at=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4|m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,it="mpeg4 aac flv mov mp4 m4v f4v m4a m4b mp4v 3gp 3g2".split(" "),rt=new RegExp("\\.("+it.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!tt,nn=[null,"MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];var st;try{st=Audio!==n&&(zn&&opera!==n&&10>opera.version()?new Audio(null):new Audio).canPlayType!==n}catch(ut){st=!1}this.hasHTML5=st,this.setup=function(e){var t=!yn.url;return e!==n&&Vn&&xn&&yn.ok()&&(e.flashVersion!==n||e.url!==n||e.html5Test!==n)&&q(x("setupLate")),m(e),Bn||(Qn?(!yn.setupOptions.ignoreMobileRestrictions||yn.setupOptions.forceUseGlobalHTML5Audio)&&(Nn.push(L.globalHTML5),Bn=!0):yn.setupOptions.forceUseGlobalHTML5Audio&&(Nn.push(L.globalHTML5),Bn=!0)),!mn&&Qn&&(yn.setupOptions.ignoreMobileRestrictions?Nn.push(L.ignoreMobile):(yn.setupOptions.useHTML5Audio&&!yn.setupOptions.preferFlash||yn._wD(L.mobileUA),yn.setupOptions.useHTML5Audio=!0,yn.setupOptions.preferFlash=!1,$n?yn.ignoreFlash=!0:(Wn&&!wn.match(/android\s2\.3/i)||!Wn)&&(yn._wD(L.globalHTML5),Bn=!0))),e&&(t&&A&&e.url!==n&&yn.beginDelayedInit(),A||e.url===n||"complete"!==Mn.readyState||setTimeout(S,1)),mn=!0,yn},this.supported=this.ok=function(){return xn?Vn&&!Sn:yn.useHTML5Audio&&yn.hasHTML5},this.getMovie=function(n){return s(n)||Mn[n]||e[n]},this.createSound=function(e,t){function o(){return i=$(i),yn.sounds[i.id]=new r(i),yn.soundIDs.push(i.id),yn.sounds[i.id]}var a,i;if(a=null,a="soundManager.createSound(): "+x(Vn?"notOK":"notReady"),!Vn||!yn.ok())return q(a),!1;if(t!==n&&(e={id:e,url:t}),i=g(e),i.url=G(i.url),i.id===n&&(i.id=yn.setupOptions.idPrefix+jn++),i.id.toString().charAt(0).match(/^[0-9]$/)&&yn._wD("soundManager.createSound(): "+x("badID",i.id),2),yn._wD("soundManager.createSound(): "+i.id+(i.url?" ("+i.url+")":""),1),Y(i.id,!0))return yn._wD("soundManager.createSound(): "+i.id+" exists",1),yn.sounds[i.id];if(Z(i))a=o(),yn.html5Only||yn._wD(i.id+": Using HTML5"),a._setup_html5(i);else{if(yn.html5Only)return yn._wD(i.id+": No HTML5 support for this sound, and no Flash. Exiting."),o();if(yn.html5.usingFlash&&i.url&&i.url.match(/data:/i))return yn._wD(i.id+": data: URIs not supported via Flash. Exiting."),o();c>8&&(null===i.isMovieStar&&(i.isMovieStar=!!(i.serverURL||i.type&&i.type.match(at)||i.url&&i.url.match(rt))),i.isMovieStar&&(yn._wD("soundManager.createSound(): using MovieStar handling"),1<i.loops&&p("noNSLoop"))),i=W(i,"soundManager.createSound(): "),a=o(),8===c?vn._createSound(i.id,i.loops||1,i.usePolicyFile):(vn._createSound(i.id,i.url,i.usePeakData,i.useWaveformData,i.useEQData,i.isMovieStar,i.isMovieStar?i.bufferTime:!1,i.loops||1,i.serverURL,i.duration||null,i.autoPlay,!0,i.autoLoad,i.usePolicyFile),i.serverURL||(a.connected=!0,i.onconnect&&i.onconnect.apply(a))),i.serverURL||!i.autoLoad&&!i.autoPlay||a.load(i)}return!i.serverURL&&i.autoPlay&&a.play(),a},this.destroySound=function(e,n){if(!Y(e))return!1;var t,o=yn.sounds[e];for(o.stop(),o._iO={},o.unload(),t=0;t<yn.soundIDs.length;t++)if(yn.soundIDs[t]===e){yn.soundIDs.splice(t,1);break}return n||o.destruct(!0),delete yn.sounds[e],!0},this.load=function(e,n){return Y(e)?yn.sounds[e].load(n):!1},this.unload=function(e){return Y(e)?yn.sounds[e].unload():!1},this.onposition=this.onPosition=function(e,n,t,o){return Y(e)?yn.sounds[e].onposition(n,t,o):!1},this.clearOnPosition=function(e,n,t){return Y(e)?yn.sounds[e].clearOnPosition(n,t):!1},this.start=this.play=function(e,n){var t=null,o=n&&!(n instanceof Object);if(!Vn||!yn.ok())return q("soundManager.play(): "+x(Vn?"notOK":"notReady")),!1;if(Y(e,o))o&&(n={url:n});else{if(!o)return!1;o&&(n={url:n}),n&&n.url&&(yn._wD('soundManager.play(): Attempting to create "'+e+'"',1),n.id=e,t=yn.createSound(n).play())}return null===t&&(t=yn.sounds[e].play(n)),t},this.setPlaybackRate=function(e,n,t){return Y(e)?yn.sounds[e].setPlaybackRate(n,t):!1},this.setPosition=function(e,n){return Y(e)?yn.sounds[e].setPosition(n):!1},this.stop=function(e){return Y(e)?(yn._wD("soundManager.stop("+e+")",1),yn.sounds[e].stop()):!1},this.stopAll=function(){var e;yn._wD("soundManager.stopAll()",1);for(e in yn.sounds)yn.sounds.hasOwnProperty(e)&&yn.sounds[e].stop()},this.pause=function(e){return Y(e)?yn.sounds[e].pause():!1},this.pauseAll=function(){var e;for(e=yn.soundIDs.length-1;e>=0;e--)yn.sounds[yn.soundIDs[e]].pause()},this.resume=function(e){return Y(e)?yn.sounds[e].resume():!1},this.resumeAll=function(){var e;for(e=yn.soundIDs.length-1;e>=0;e--)yn.sounds[yn.soundIDs[e]].resume()},this.togglePause=function(e){return Y(e)?yn.sounds[e].togglePause():!1},this.setPan=function(e,n){return Y(e)?yn.sounds[e].setPan(n):!1},this.setVolume=function(e,t){var o,a;if(e!==n&&!isNaN(e)&&t===n){for(o=0,a=yn.soundIDs.length;a>o;o++)yn.sounds[yn.soundIDs[o]].setVolume(e);return!1}return Y(e)?yn.sounds[e].setVolume(t):!1},this.mute=function(e){var n=0;if(e instanceof String&&(e=null),e)return Y(e)?(yn._wD('soundManager.mute(): Muting "'+e+'"'),yn.sounds[e].mute()):!1;for(yn._wD("soundManager.mute(): Muting all sounds"),n=yn.soundIDs.length-1;n>=0;n--)yn.sounds[yn.soundIDs[n]].mute();return yn.muted=!0},this.muteAll=function(){yn.mute()},this.unmute=function(e){if(e instanceof String&&(e=null),e)return Y(e)?(yn._wD('soundManager.unmute(): Unmuting "'+e+'"'),yn.sounds[e].unmute()):!1;for(yn._wD("soundManager.unmute(): Unmuting all sounds"),e=yn.soundIDs.length-1;e>=0;e--)yn.sounds[yn.soundIDs[e]].unmute();return yn.muted=!1,!0},this.unmuteAll=function(){yn.unmute()},this.toggleMute=function(e){return Y(e)?yn.sounds[e].toggleMute():!1},this.getMemoryUse=function(){var e=0;return vn&&8!==c&&(e=parseInt(vn._getMemoryUse(),10)),e},this.disable=function(t){var o;if(t===n&&(t=!1),Sn)return!1;for(Sn=!0,p("shutdown",1),o=yn.soundIDs.length-1;o>=0;o--)H(yn.sounds[yn.soundIDs[o]]);return H(yn),h(t),sn.remove(e,"load",w),!0},this.canPlayMIME=function(e){var n;return yn.hasHTML5&&(n=en({type:e})),!n&&xn&&(n=e&&yn.ok()?!!(c>8&&e.match(at)||e.match(yn.mimePattern)):null),n},this.canPlayURL=function(e){var n;return yn.hasHTML5&&(n=en({url:e})),!n&&xn&&(n=e&&yn.ok()?!!e.match(yn.filePattern):null),n},this.canPlayLink=function(e){return e.type!==n&&e.type&&yn.canPlayMIME(e.type)?!0:yn.canPlayURL(e.href)},this.getSoundById=function(e,n){if(!e)return null;var t=yn.sounds[e];return t||n||yn._wD('soundManager.getSoundById(): Sound "'+e+'" not found.',2),t},this.onready=function(n,t){if("function"!=typeof n)throw x("needFunction","onready");return Vn&&yn._wD(x("queue","onready")),t||(t=e),_("onready",n,t),v(),!0},this.ontimeout=function(n,t){if("function"!=typeof n)throw x("needFunction","ontimeout");return Vn&&yn._wD(x("queue","ontimeout")),t||(t=e),_("ontimeout",n,t),v({type:"ontimeout"}),!0},this._writeDebug=function(e,t){var o,a;return yn.setupOptions.debugMode?Jn&&yn.useConsole&&(t&&"object"==typeof t?console.log(e,t):Fn[t]!==n?console[Fn[t]](e):console.log(e),yn.consoleOnly)?!0:(o=s("soundmanager-debug"))?(a=Mn.createElement("div"),0===++An%2&&(a.className="sm2-alt"),t=t===n?0:parseInt(t,10),a.appendChild(Mn.createTextNode(e)),t&&(t>=2&&(a.style.fontWeight="bold"),3===t&&(a.style.color="#ff3333")),o.insertBefore(a,o.firstChild),!0):!1:!1},-1!==bn.indexOf("sm2-debug=alert")&&(this._writeDebug=function(n){e.alert(n)}),this._wD=this._writeDebug,this._debug=function(){var e,n;for(p("currentObj",1),e=0,n=yn.soundIDs.length;n>e;e++)yn.sounds[yn.soundIDs[e]]._debug()},this.reboot=function(n,t){yn.soundIDs.length&&yn._wD("Destroying "+yn.soundIDs.length+" SMSound object"+(1!==yn.soundIDs.length?"s":"")+"...");var o,a,i;for(o=yn.soundIDs.length-1;o>=0;o--)yn.sounds[yn.soundIDs[o]].destruct();if(vn)try{qn&&(En=vn.innerHTML),In=vn.parentNode.removeChild(vn)}catch(r){p("badRemove",2)}if(En=In=xn=vn=null,yn.enabled=A=Vn=kn=Cn=Dn=Ln=Sn=Bn=yn.swfLoaded=!1,yn.soundIDs=[],yn.sounds={},jn=0,mn=!1,n)Pn=[];else for(o in Pn)if(Pn.hasOwnProperty(o))for(a=0,i=Pn[o].length;i>a;a++)Pn[o][a].fired=!1;return t||yn._wD("soundManager: Rebooting..."),yn.html5={usingFlash:null},yn.flash={},yn.html5Only=!1,yn.ignoreFlash=!1,e.setTimeout(function(){t||yn.beginDelayedInit()},20),yn},this.reset=function(){return p("reset"),yn.reboot(!0,!0)},this.getMoviePercent=function(){return vn&&"PercentLoaded"in vn?vn.PercentLoaded():null},this.beginDelayedInit=function(){Tn=!0,S(),setTimeout(function(){return Cn?!1:(I(),V(),Cn=!0)},20),b()},this.destruct=function(){yn._wD("soundManager.destruct()"),yn.disable(!0)},r=function(e){var t,o,a,i,r,s,u,l,d,h,m,y=this,_=!1,v=[],w=0,b=null;o=t=null,this.sID=this.id=e.id,this.url=e.url,this._iO=this.instanceOptions=this.options=g(e),this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,m=!this.url,this.id3={},this._debug=function(){yn._wD(y.id+": Merged options:",y.options)},this.load=function(e){var t,o=null;if(e!==n?y._iO=g(e,y.options):(e=y.options,y._iO=e,b&&b!==y.url&&(p("manURL"),y._iO.url=y.url,y.url=null)),y._iO.url||(y._iO.url=y.url),y._iO.url=G(y._iO.url),t=y.instanceOptions=y._iO,yn._wD(y.id+": load ("+t.url+")"),!t.url&&!y.url)return yn._wD(y.id+": load(): url is unassigned. Exiting.",2),y;if(y.isHTML5||8!==c||y.url||t.autoPlay||yn._wD(y.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),t.url===y.url&&0!==y.readyState&&2!==y.readyState)return p("onURL",1),3===y.readyState&&t.onload&&gn(y,function(){t.onload.apply(y,[!!y.duration])}),y;if(y.loaded=!1,y.readyState=1,y.playState=0,y.id3={},Z(t))o=y._setup_html5(t),o._called_load?yn._wD(y.id+": Ignoring request to load again"):(y._html5_canplay=!1,y.url!==t.url&&(yn._wD(p("manURL")+": "+t.url),y._a.src=t.url,y.setPosition(0)),y._a.autobuffer="auto",y._a.preload="auto",y._a._called_load=!0);else{if(yn.html5Only)return yn._wD(y.id+": No flash support. Exiting."),y;if(y._iO.url&&y._iO.url.match(/data:/i))return yn._wD(y.id+": data: URIs not supported via Flash. Exiting."),y;try{y.isHTML5=!1,y._iO=W($(t)),y._iO.autoPlay&&(y._iO.position||y._iO.from)&&(yn._wD(y.id+": Disabling autoPlay because of non-zero offset case"),y._iO.autoPlay=!1),t=y._iO,8===c?vn._load(y.id,t.url,t.stream,t.autoPlay,t.usePolicyFile):vn._load(y.id,t.url,!!t.stream,!!t.autoPlay,t.loops||1,!!t.autoLoad,t.usePolicyFile)}catch(a){p("smError",2),f("onload",!1),E({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return y.url=t.url,y},this.unload=function(){return 0!==y.readyState&&(yn._wD(y.id+": unload()"),y.isHTML5?(s(),y._a&&(y._a.pause(),b=on(y._a))):8===c?vn._unload(y.id,"about:blank"):vn._unload(y.id),a()),y},this.destruct=function(e){yn._wD(y.id+": Destruct"),y.isHTML5?(s(),y._a&&(y._a.pause(),on(y._a),Bn||r(),y._a._s=null,y._a=null)):(y._iO.onfailure=null,vn._destroySound(y.id)),e||yn.destroySound(y.id,!0)},this.start=this.play=function(e,t){var o,a,i,r,s;if(a=!0,o=y.id+": play(): ",t=t===n?!0:t,e||(e={}),y.url&&(y._iO.url=y.url),y._iO=g(y._iO,y.options),y._iO=g(e,y._iO),y._iO.url=G(y._iO.url),y.instanceOptions=y._iO,!y.isHTML5&&y._iO.serverURL&&!y.connected)return y.getAutoPlay()||(yn._wD(o+" Netstream not connected yet - setting autoPlay"),y.setAutoPlay(!0)),y;if(Z(y._iO)&&(y._setup_html5(y._iO),u()),1===y.playState&&!y.paused){if(a=y._iO.multiShot,!a)return yn._wD(o+"Already playing (one-shot)",1),y.isHTML5&&y.setPosition(y._iO.position),y;yn._wD(o+"Already playing (multi-shot)",1)}if(e.url&&e.url!==y.url&&(y.readyState||y.isHTML5||8!==c||!m?y.load(y._iO):m=!1),y.loaded)yn._wD(o.substr(0,o.lastIndexOf(":")));else if(0===y.readyState){if(yn._wD(o+"Attempting to load"),y.isHTML5||yn.html5Only){if(!y.isHTML5)return yn._wD(o+"Unsupported type. Exiting."),y;y.load(y._iO)}else y._iO.autoPlay=!0,y.load(y._iO);y.instanceOptions=y._iO}else{if(2===y.readyState)return yn._wD(o+"Could not load - exiting",2),y;yn._wD(o+"Loading - attempting to play...")}return!y.isHTML5&&9===c&&0<y.position&&y.position===y.duration&&(yn._wD(o+"Sound at end, resetting to position: 0"),e.position=0),y.paused&&0<=y.position&&(!y._iO.serverURL||0<y.position)?(yn._wD(o+"Resuming from paused state",1),y.resume()):(y._iO=g(e,y._iO),(!y.isHTML5&&null!==y._iO.position&&0<y._iO.position||null!==y._iO.from&&0<y._iO.from||null!==y._iO.to)&&0===y.instanceCount&&0===y.playState&&!y._iO.serverURL&&(a=function(){y._iO=g(e,y._iO),y.play(y._iO)},y.isHTML5&&!y._html5_canplay?(yn._wD(o+"Beginning load for non-zero offset case"),y.load({_oncanplay:a})):y.isHTML5||y.loaded||y.readyState&&2===y.readyState||(yn._wD(o+"Preloading for non-zero offset case"),y.load({onload:a})),y._iO=h()),(!y.instanceCount||y._iO.multiShotEvents||y.isHTML5&&y._iO.multiShot&&!Bn||!y.isHTML5&&c>8&&!y.getAutoPlay())&&y.instanceCount++,y._iO.onposition&&0===y.playState&&l(y),y.playState=1,y.paused=!1,y.position=y._iO.position===n||isNaN(y._iO.position)?0:y._iO.position,y.isHTML5||(y._iO=W($(y._iO))),y._iO.onplay&&t&&(y._iO.onplay.apply(y),_=!0),y.setVolume(y._iO.volume,!0),y.setPan(y._iO.pan,!0),1!==y._iO.playbackRate&&y.setPlaybackRate(y._iO.playbackRate),y.isHTML5?2>y.instanceCount?(u(),o=y._setup_html5(),y.setPosition(y._iO.position),o.play()):(yn._wD(y.id+": Cloning Audio() for instance #"+y.instanceCount+"..."),i=new Audio(y._iO.url),r=function(){sn.remove(i,"ended",r),y._onfinish(y),on(i),i=null},s=function(){sn.remove(i,"canplay",s);try{i.currentTime=y._iO.position/1e3}catch(e){q(y.id+": multiShot play() failed to apply position of "+y._iO.position/1e3)}i.play()},sn.add(i,"ended",r),y._iO.volume!==n&&(i.volume=Math.max(0,Math.min(1,y._iO.volume/100))),y.muted&&(i.muted=!0),y._iO.position?sn.add(i,"canplay",s):i.play()):(a=vn._start(y.id,y._iO.loops||1,9===c?y.position:y.position/1e3,y._iO.multiShot||!1),9!==c||a||(yn._wD(o+"No sound hardware, or 32-sound ceiling hit",2),y._iO.onplayerror&&y._iO.onplayerror.apply(y)))),y},this.stop=function(e){var n=y._iO;return 1===y.playState&&(yn._wD(y.id+": stop()"),y._onbufferchange(0),y._resetOnPosition(0),y.paused=!1,y.isHTML5||(y.playState=0),d(),n.to&&y.clearOnPosition(n.to),y.isHTML5?y._a&&(e=y.position,y.setPosition(0),y.position=e,y._a.pause(),y.playState=0,y._onTimer(),s()):(vn._stop(y.id,e),n.serverURL&&y.unload()),y.instanceCount=0,y._iO={},n.onstop&&n.onstop.apply(y)),y},this.setAutoPlay=function(e){yn._wD(y.id+": Autoplay turned "+(e?"on":"off")),y._iO.autoPlay=e,y.isHTML5||(vn._setAutoPlay(y.id,e),e&&!y.instanceCount&&1===y.readyState&&(y.instanceCount++,yn._wD(y.id+": Incremented instance count to "+y.instanceCount)))},this.getAutoPlay=function(){return y._iO.autoPlay},this.setPlaybackRate=function(e){var n=Math.max(.5,Math.min(4,e));if(n!==e&&yn._wD(y.id+": setPlaybackRate("+e+"): limiting rate to "+n,2),y.isHTML5)try{y._iO.playbackRate=n,y._a.playbackRate=n}catch(t){yn._wD(y.id+": setPlaybackRate("+n+") failed: "+t.message,2)}return y},this.setPosition=function(e){e===n&&(e=0);var t=y.isHTML5?Math.max(e,0):Math.min(y.duration||y._iO.duration,Math.max(e,0));if(y.position=t,e=y.position/1e3,y._resetOnPosition(y.position),y._iO.position=t,y.isHTML5){if(y._a){if(y._html5_canplay){if(y._a.currentTime.toFixed(3)!==e.toFixed(3)){yn._wD(y.id+": setPosition("+e+")");try{y._a.currentTime=e,(0===y.playState||y.paused)&&y._a.pause()}catch(o){yn._wD(y.id+": setPosition("+e+") failed: "+o.message,2)}}}else if(e)return yn._wD(y.id+": setPosition("+e+"): Cannot seek yet, sound not ready",2),y;y.paused&&y._onTimer(!0)}}else e=9===c?y.position:e,y.readyState&&2!==y.readyState&&vn._setPosition(y.id,e,y.paused||!y.playState,y._iO.multiShot);return y},this.pause=function(e){return y.paused||0===y.playState&&1!==y.readyState?y:(yn._wD(y.id+": pause()"),y.paused=!0,y.isHTML5?(y._setup_html5().pause(),s()):(e||e===n)&&vn._pause(y.id,y._iO.multiShot),y._iO.onpause&&y._iO.onpause.apply(y),y)},this.resume=function(){var e=y._iO;return y.paused?(yn._wD(y.id+": resume()"),y.paused=!1,y.playState=1,y.isHTML5?(y._setup_html5().play(),u()):(e.isMovieStar&&!e.serverURL&&y.setPosition(y.position),vn._pause(y.id,e.multiShot)),!_&&e.onplay?(e.onplay.apply(y),_=!0):e.onresume&&e.onresume.apply(y),y):y},this.togglePause=function(){return yn._wD(y.id+": togglePause()"),0===y.playState?(y.play({position:9!==c||y.isHTML5?y.position/1e3:y.position}),y):(y.paused?y.resume():y.pause(),y)},this.setPan=function(e,t){return e===n&&(e=0),t===n&&(t=!1),y.isHTML5||vn._setPan(y.id,e),y._iO.pan=e,t||(y.pan=e,y.options.pan=e),y},this.setVolume=function(e,t){return e===n&&(e=100),t===n&&(t=!1),y.isHTML5?y._a&&(yn.muted&&!y.muted&&(y.muted=!0,y._a.muted=!0),y._a.volume=Math.max(0,Math.min(1,e/100))):vn._setVolume(y.id,yn.muted&&!y.muted||y.muted?0:e),y._iO.volume=e,t||(y.volume=e,y.options.volume=e),y},this.mute=function(){return y.muted=!0,y.isHTML5?y._a&&(y._a.muted=!0):vn._setVolume(y.id,0),y},this.unmute=function(){y.muted=!1;var e=y._iO.volume!==n;return y.isHTML5?y._a&&(y._a.muted=!1):vn._setVolume(y.id,e?y._iO.volume:y.options.volume),y},this.toggleMute=function(){return y.muted?y.unmute():y.mute()},this.onposition=this.onPosition=function(e,t,o){return v.push({position:parseInt(e,10),method:t,scope:o!==n?o:y,fired:!1}),y},this.clearOnPosition=function(e,n){var t;if(e=parseInt(e,10),!isNaN(e))for(t=0;t<v.length;t++)e!==v[t].position||n&&n!==v[t].method||(v[t].fired&&w--,v.splice(t,1))},this._processOnPosition=function(){var e,n;if(e=v.length,!e||!y.playState||w>=e)return!1;for(--e;e>=0;e--)n=v[e],!n.fired&&y.position>=n.position&&(n.fired=!0,w++,n.method.apply(n.scope,[n.position]));return!0},this._resetOnPosition=function(e){var n,t;if(n=v.length,!n)return!1;for(--n;n>=0;n--)t=v[n],t.fired&&e<=t.position&&(t.fired=!1,w--);return!0},h=function(){var e,n,t=y._iO,o=t.from,a=t.to;return n=function(){yn._wD(y.id+': "To" time of '+a+" reached."),y.clearOnPosition(a,n),y.stop()},e=function(){yn._wD(y.id+': Playing "from" '+o),null===a||isNaN(a)||y.onPosition(a,n)},null===o||isNaN(o)||(t.position=o,t.multiShot=!1,e()),t},l=function(){var e,n=y._iO.onposition;if(n)for(e in n)n.hasOwnProperty(e)&&y.onPosition(parseInt(e,10),n[e])},d=function(){var e,n=y._iO.onposition;if(n)for(e in n)n.hasOwnProperty(e)&&y.clearOnPosition(parseInt(e,10))},u=function(){y.isHTML5&&K(y)},s=function(){y.isHTML5&&z(y)},a=function(e){e||(v=[],w=0),_=!1,y._hasTimer=null,y._a=null,y._html5_canplay=!1,y.bytesLoaded=null,y.bytesTotal=null,y.duration=y._iO&&y._iO.duration?y._iO.duration:null,y.durationEstimate=null,y.buffered=[],y.eqData=[],y.eqData.left=[],y.eqData.right=[],y.failures=0,y.isBuffering=!1,y.instanceOptions={},y.instanceCount=0,y.loaded=!1,y.metadata={},y.readyState=0,y.muted=!1,y.paused=!1,y.peakData={left:0,right:0},y.waveformData={left:[],right:[]},y.playState=0,y.position=null,y.id3={}},a(),this._onTimer=function(e){var n,a=!1,i={};return(y._hasTimer||e)&&y._a&&(e||(0<y.playState||1===y.readyState)&&!y.paused)&&(n=y._get_html5_duration(),n!==t&&(t=n,y.duration=n,a=!0),y.durationEstimate=y.duration,n=1e3*y._a.currentTime||0,n!==o&&(o=n,a=!0),(a||e)&&y._whileplaying(n,i,i,i,i)),a},this._get_html5_duration=function(){var e=y._iO;return(e=y._a&&y._a.duration?1e3*y._a.duration:e&&e.duration?e.duration:null)&&!isNaN(e)&&1/0!==e?e:null},this._apply_loop=function(e,n){!e.loop&&n>1&&yn._wD("Note: Native HTML5 looping is infinite.",1),e.loop=n>1?"loop":""},this._setup_html5=function(e){e=g(y._iO,e);var n,t=Bn?_n:y._a,o=decodeURI(e.url);if(Bn?o===decodeURI(un)&&(n=!0):o===decodeURI(b)&&(n=!0),t){if(t._s)if(Bn)t._s&&t._s.playState&&!n&&t._s.stop();else if(!Bn&&o===decodeURI(b))return y._apply_loop(t,e.loops),t;n||(b&&a(!1),t.src=e.url,un=b=y.url=e.url,t._called_load=!1)}else e.autoLoad||e.autoPlay?(y._a=new Audio(e.url),y._a.load()):y._a=zn&&10>opera.version()?new Audio(null):new Audio,t=y._a,t._called_load=!1,Bn&&(_n=t);return y.isHTML5=!0,y._a=t,t._s=y,i(),y._apply_loop(t,e.loops),e.autoLoad||e.autoPlay?y.load():(t.autobuffer=!1,t.preload="auto"),t},i=function(){if(y._a._added_events)return!1;var e;y._a._added_events=!0;for(e in fn)fn.hasOwnProperty(e)&&y._a&&y._a.addEventListener(e,fn[e],!1);return!0},r=function(){var e;yn._wD(y.id+": Removing event listeners"),y._a._added_events=!1;for(e in fn)fn.hasOwnProperty(e)&&y._a&&y._a.removeEventListener(e,fn[e],!1)},this._onload=function(e){var n=!!e||!y.isHTML5&&8===c&&y.duration;return e=y.id+": ",yn._wD(e+(n?"onload()":"Failed to load / invalid sound?"+(y.duration?" -":" Zero-length duration reported.")+" ("+y.url+")"),n?1:2),n||y.isHTML5||(!0===yn.sandbox.noRemote&&yn._wD(e+x("noNet"),1),!0===yn.sandbox.noLocal&&yn._wD(e+x("noLocal"),1)),y.loaded=n,y.readyState=n?3:2,y._onbufferchange(0),n||y.isHTML5||y._onerror(),y._iO.onload&&gn(y,function(){y._iO.onload.apply(y,[n])}),!0},this._onerror=function(e,n){y._iO.onerror&&gn(y,function(){y._iO.onerror.apply(y,[e,n])})},this._onbufferchange=function(e){return 0===y.playState||e&&y.isBuffering||!e&&!y.isBuffering?!1:(y.isBuffering=1===e,y._iO.onbufferchange&&(yn._wD(y.id+": Buffer state change: "+e),y._iO.onbufferchange.apply(y,[e])),!0)},this._onsuspend=function(){return y._iO.onsuspend&&(yn._wD(y.id+": Playback suspended"),y._iO.onsuspend.apply(y)),!0},this._onfailure=function(e,n,t){y.failures++,yn._wD(y.id+": Failure ("+y.failures+"): "+e),y._iO.onfailure&&1===y.failures?y._iO.onfailure(e,n,t):yn._wD(y.id+": Ignoring failure")},this._onwarning=function(e,n,t){y._iO.onwarning&&y._iO.onwarning(e,n,t)},this._onfinish=function(){var e=y._iO.onfinish;y._onbufferchange(0),y._resetOnPosition(0),y.instanceCount&&(y.instanceCount--,y.instanceCount||(d(),y.playState=0,y.paused=!1,y.instanceCount=0,y.instanceOptions={},y._iO={},s(),y.isHTML5&&(y.position=0)),y.instanceCount&&!y._iO.multiShotEvents||!e||(yn._wD(y.id+": onfinish()"),gn(y,function(){e.apply(y)})))},this._whileloading=function(e,n,t,o){var a=y._iO;y.bytesLoaded=e,y.bytesTotal=n,y.duration=Math.floor(t),y.bufferLength=o,y.durationEstimate=y.isHTML5||a.isMovieStar?y.duration:a.duration?y.duration>a.duration?y.duration:a.duration:parseInt(y.bytesTotal/y.bytesLoaded*y.duration,10),y.isHTML5||(y.buffered=[{start:0,end:y.duration}]),(3!==y.readyState||y.isHTML5)&&a.whileloading&&a.whileloading.apply(y)},this._whileplaying=function(e,t,o,a,i){var r=y._iO;return isNaN(e)||null===e?!1:(y.position=Math.max(0,e),y._processOnPosition(),!y.isHTML5&&c>8&&(r.usePeakData&&t!==n&&t&&(y.peakData={left:t.leftPeak,right:t.rightPeak}),r.useWaveformData&&o!==n&&o&&(y.waveformData={left:o.split(","),right:a.split(",")}),r.useEQData&&i!==n&&i&&i.leftEQ&&(e=i.leftEQ.split(","),y.eqData=e,y.eqData.left=e,i.rightEQ!==n&&i.rightEQ&&(y.eqData.right=i.rightEQ.split(",")))),1===y.playState&&(y.isHTML5||8!==c||y.position||!y.isBuffering||y._onbufferchange(0),r.whileplaying&&r.whileplaying.apply(y)),!0)},this._oncaptiondata=function(e){yn._wD(y.id+": Caption data received."),y.captiondata=e,y._iO.oncaptiondata&&y._iO.oncaptiondata.apply(y,[e])},this._onmetadata=function(e,n){yn._wD(y.id+": Metadata received.");var t,o,a={};for(t=0,o=e.length;o>t;t++)a[e[t]]=n[t];y.metadata=a,y._iO.onmetadata&&y._iO.onmetadata.call(y,y.metadata)},this._onid3=function(e,n){yn._wD(y.id+": ID3 data received.");var t,o,a=[];for(t=0,o=e.length;o>t;t++)a[e[t]]=n[t];y.id3=g(y.id3,a),y._iO.onid3&&y._iO.onid3.apply(y)},this._onconnect=function(e){e=1===e,yn._wD(y.id+": "+(e?"Connected.":"Failed to connect? - "+y.url),e?1:2),(y.connected=e)&&(y.failures=0,Y(y.id)&&(y.getAutoPlay()?y.play(n,y.getAutoPlay()):y._iO.autoLoad&&y.load()),y._iO.onconnect&&y._iO.onconnect.apply(y,[e]))},this._ondataerror=function(e){0<y.playState&&(yn._wD(y.id+": Data error: "+e),y._iO.ondataerror&&y._iO.ondataerror.apply(y))},this._debug()},F=function(){return Mn.body||Mn.getElementsByTagName("div")[0]},s=function(e){return Mn.getElementById(e)},g=function(e,t){var o,a,i=e||{};o=t===n?yn.defaultOptions:t;for(a in o)o.hasOwnProperty(a)&&i[a]===n&&(i[a]="object"!=typeof o[a]||null===o[a]?o[a]:g(i[a],o[a]));return i},gn=function(n,t){n.isHTML5||8!==c?t():e.setTimeout(t,0)},y={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},m=function(e,t){var o,a=!0,i=t!==n,r=yn.setupOptions;if(e===n){a=[];for(o in r)r.hasOwnProperty(o)&&a.push(o);for(o in y)y.hasOwnProperty(o)&&a.push("object"==typeof yn[o]?o+": {...}":yn[o]instanceof Function?o+": function() {...}":o);return yn._wD(x("setup",a.join(", "))),!1}for(o in e)if(e.hasOwnProperty(o))if("object"!=typeof e[o]||null===e[o]||e[o]instanceof Array||e[o]instanceof RegExp)i&&y[t]!==n?yn[t][o]=e[o]:r[o]!==n?(yn.setupOptions[o]=e[o],yn[o]=e[o]):y[o]===n?(q(x(yn[o]===n?"setupUndef":"setupError",o),2),a=!1):yn[o]instanceof Function?yn[o].apply(yn,e[o]instanceof Array?e[o]:[e[o]]):yn[o]=e[o];else{if(y[o]!==n)return m(e[o],o);q(x(yn[o]===n?"setupUndef":"setupError",o),2),a=!1}return a},sn=function(){function n(e){e=Un.call(e);var n=e.length;return o?(e[1]="on"+e[1],n>3&&e.pop()):3===n&&e.push(!1),e}function t(e,n){var t=e.shift(),i=[a[n]];o?t[i](e[0],e[1]):t[i].apply(t,e)}var o=e.attachEvent,a={add:o?"attachEvent":"addEventListener",remove:o?"detachEvent":"removeEventListener"};return{add:function(){t(n(arguments),"add")},remove:function(){t(n(arguments),"remove")}}}(),fn={abort:i(function(){yn._wD(this._s.id+": abort")}),canplay:i(function(){var e,t=this._s;if(!t._html5_canplay){if(t._html5_canplay=!0,yn._wD(t.id+": canplay"),t._onbufferchange(0),e=t._iO.position===n||isNaN(t._iO.position)?null:t._iO.position/1e3,this.currentTime!==e){yn._wD(t.id+": canplay: Setting position to "+e);try{this.currentTime=e}catch(o){yn._wD(t.id+": canplay: Setting position of "+e+" failed: "+o.message,2)}}t._iO._oncanplay&&t._iO._oncanplay()}}),canplaythrough:i(function(){var e=this._s;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),durationchange:i(function(){var e,n=this._s;e=n._get_html5_duration(),isNaN(e)||e===n.duration||(yn._wD(this._s.id+": durationchange ("+e+")"+(n.duration?", previously "+n.duration:"")),n.durationEstimate=n.duration=e)}),ended:i(function(){var e=this._s;yn._wD(e.id+": ended"),e._onfinish()}),error:i(function(){var e=nn[this.error.code]||null;yn._wD(this._s.id+": HTML5 error, code "+this.error.code+(e?" ("+e+")":"")),this._s._onload(!1),this._s._onerror(this.error.code,e)}),loadeddata:i(function(){var e=this._s;yn._wD(e.id+": loadeddata"),e._loaded||Kn||(e.duration=e._get_html5_duration())}),loadedmetadata:i(function(){yn._wD(this._s.id+": loadedmetadata")}),loadstart:i(function(){yn._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:i(function(){this._s._onbufferchange(0)}),playing:i(function(){yn._wD(this._s.id+": playing "+String.fromCharCode(9835)),this._s._onbufferchange(0)}),progress:i(function(e){var n,t,o,a=this._s;n=0;var i="progress"===e.type,r=e.target.buffered,s=e.loaded||0,u=e.total||1;if(a.buffered=[],r&&r.length){for(n=0,t=r.length;t>n;n++)a.buffered.push({start:1e3*r.start(n),end:1e3*r.end(n)});if(n=1e3*(r.end(0)-r.start(0)),s=Math.min(1,n/(1e3*e.target.duration)),i&&1<r.length){for(o=[],t=r.length,n=0;t>n;n++)o.push(1e3*e.target.buffered.start(n)+"-"+1e3*e.target.buffered.end(n));yn._wD(this._s.id+": progress, timeRanges: "+o.join(", "))}i&&!isNaN(s)&&yn._wD(this._s.id+": progress, "+Math.floor(100*s)+"% loaded")}isNaN(s)||(a._whileloading(s,u,a._get_html5_duration()),s&&u&&s===u&&fn.canplaythrough.call(this,e))}),ratechange:i(function(){yn._wD(this._s.id+": ratechange")
}),suspend:i(function(e){var n=this._s;yn._wD(this._s.id+": suspend"),fn.progress.call(this,e),n._onsuspend()}),stalled:i(function(){yn._wD(this._s.id+": stalled")}),timeupdate:i(function(){this._s._onTimer()}),waiting:i(function(){var e=this._s;yn._wD(this._s.id+": waiting"),e._onbufferchange(1)})},Z=function(e){return e&&(e.type||e.url||e.serverURL)?e.serverURL||e.type&&a(e.type)?!1:e.type?en({type:e.type}):en({url:e.url})||yn.html5Only||e.url.match(/data:/i):!1},on=function(e){var t;return e&&(t=Kn?"about:blank":yn.html5.canPlayType("audio/wav")?"data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==":"about:blank",e.src=t,e._called_unload!==n&&(e._called_load=!1)),Bn&&(un=null),t},en=function(e){if(!yn.useHTML5Audio||!yn.hasHTML5)return!1;var t=e.url||null;e=e.type||null;var o,i=yn.audioFormats;if(e&&yn.html5[e]!==n)return yn.html5[e]&&!a(e);if(!tn){tn=[];for(o in i)i.hasOwnProperty(o)&&(tn.push(o),i[o].related&&(tn=tn.concat(i[o].related)));tn=new RegExp("\\.("+tn.join("|")+")(\\?.*)?$","i")}return(o=t?t.toLowerCase().match(tn):null)&&o.length?o=o[1]:e&&(t=e.indexOf(";"),o=(-1!==t?e.substr(0,t):e).substr(6)),o&&yn.html5[o]!==n?t=yn.html5[o]&&!a(o):(e="audio/"+o,t=yn.html5.canPlayType({type:e}),t=(yn.html5[o]=t)&&yn.html5[e]&&!a(e)),t},rn=function(){function e(e){var n,t=n=!1;if(!r||"function"!=typeof r.canPlayType)return n;if(e instanceof Array){for(i=0,n=e.length;n>i;i++)(yn.html5[e[i]]||r.canPlayType(e[i]).match(yn.html5Test))&&(t=!0,yn.html5[e[i]]=!0,yn.flash[e[i]]=!!e[i].match(nt));n=t}else e=r&&"function"==typeof r.canPlayType?r.canPlayType(e):!1,n=!(!e||!e.match(yn.html5Test));return n}if(!yn.useHTML5Audio||!yn.hasHTML5)return xn=yn.html5.usingFlash=!0,!1;var t,o,a,i,r=Audio!==n?zn&&10>opera.version()?new Audio(null):new Audio:null,s={};a=yn.audioFormats;for(t in a)if(a.hasOwnProperty(t)&&(o="audio/"+t,s[t]=e(a[t].type),s[o]=s[t],t.match(nt)?(yn.flash[t]=!0,yn.flash[o]=!0):(yn.flash[t]=!1,yn.flash[o]=!1),a[t]&&a[t].related))for(i=a[t].related.length-1;i>=0;i--)s["audio/"+a[t].related[i]]=s[t],yn.html5[a[t].related[i]]=s[t],yn.flash[a[t].related[i]]=s[t];return s.canPlayType=r?e:null,yn.html5=g(yn.html5,s),yn.html5.usingFlash=X(),xn=yn.html5.usingFlash,!0},L={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:"soundManagerexception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:"soundManager: Verify that %s is a valid path.",tryDebug:"Try soundManager.debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:"soundManager: Non-HTTP page ("+Mn.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:"soundManager: Special case: Waiting for SWF to load with window focus...",waitForever:"soundManager: Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:"soundManager: Waiting for 100% SWF load...",needFunction:"soundManager: Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"soundManager: _debug(): Current sound objects",waitOnload:"soundManager: Waiting for window.onload()",docLoaded:"soundManager: Document already loaded",onload:"soundManager: initComplete(): calling soundManager.onload()",onloadOK:"soundManager.onload() complete",didInit:"soundManager: init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"soundManager: Failed to remove Flash node.",shutdown:"soundManager.disable(): Shutting down",queue:"soundManager: Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying .swf_timedout CSS...",fbLoaded:"Flash loaded",fbHandler:"soundManager: flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:"soundManager.load(): current URL already assigned.",badFV:'soundManager.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:"soundManager: Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:"soundManager: Got window focus.",policy:"Enabling usePolicyFile for data access",setup:"soundManager.setup(): allowed parameters: %s",setupError:'soundManager.setup(): "%s" cannot be assigned with this method.',setupUndef:'soundManager.setup(): Could not find option "%s"',setupLate:"soundManager.setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:"soundManager: Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready. "+String.fromCharCode(10003),reset:"soundManager.reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device.",ignoreMobile:"Ignoring mobile restrictions for this device."},x=function(){var e,n,t,o;if(e=Un.call(arguments),n=e.shift(),(o=L&&L[n]?L[n]:"")&&e&&e.length)for(n=0,t=e.length;t>n;n++)o=o.replace("%s",e[n]);return o},$=function(e){return 8===c&&1<e.loops&&e.stream&&(p("as2loop"),e.stream=!1),e},W=function(e,n){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(yn._wD((n||"")+x("policy")),e.usePolicyFile=!0),e},q=function(e){Jn&&console.warn!==n?console.warn(e):yn._wD(e)},u=function(){return!1},H=function(e){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=u)},R=function(e){e===n&&(e=!1),(Sn||e)&&yn.disable(e)},N=function(e){var n=null;if(e)if(e.match(/\.swf(\?.*)?$/i)){if(n=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return e=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+yn.movieURL,yn.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},O=function(){c=parseInt(yn.flashVersion,10),8!==c&&9!==c&&(yn._wD(x("badFV",c,8)),yn.flashVersion=c=8);var e=yn.debugMode||yn.debugFlash?"_debug.swf":".swf";yn.useHTML5Audio&&!yn.html5Only&&yn.audioFormats.mp4.required&&9>c&&(yn._wD(x("needfl9")),yn.flashVersion=c=9),yn.version=yn.versionNumber+(yn.html5Only?" (HTML5-only mode)":9===c?" (AS3/Flash 9)":" (AS2/Flash 8)"),c>8?(yn.defaultOptions=g(yn.defaultOptions,yn.flash9Options),yn.features.buffering=!0,yn.defaultOptions=g(yn.defaultOptions,yn.movieStarOptions),yn.filePatterns.flash9=new RegExp("\\.(mp3|"+it.join("|")+")(\\?.*)?$","i"),yn.features.movieStar=!0):yn.features.movieStar=!1,yn.filePattern=yn.filePatterns[8!==c?"flash9":"flash8"],yn.movieURL=(8===c?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),yn.features.peakData=yn.features.waveformData=yn.features.eqData=c>8},k=function(e,n){vn&&vn._setPolling(e,n)},C=function(){if(yn.debugURLParam.test(bn)&&(yn.setupOptions.debugMode=yn.debugMode=!0),!s(yn.debugID)){var e,n,t,o;if(!(!yn.debugMode||s(yn.debugID)||Jn&&yn.useConsole&&yn.consoleOnly)){e=Mn.createElement("div"),e.id=yn.debugID+"-toggle",n={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},e.appendChild(Mn.createTextNode("-")),e.onclick=j,e.title="Toggle SM2 debug console",wn.match(/msie 6/i)&&(e.style.position="absolute",e.style.cursor="hand");for(o in n)n.hasOwnProperty(o)&&(e.style[o]=n[o]);if(n=Mn.createElement("div"),n.id=yn.debugID,n.style.display=yn.debugMode?"block":"none",yn.debugMode&&!s(e.id)){try{t=F(),t.appendChild(e)}catch(a){throw Error(x("domError")+" \n"+a.toString())}t.appendChild(n)}}}},Y=this.getSoundById,p=function(e,n){return e?yn._wD(x(e),n):""},j=function(){var e=s(yn.debugID),n=s(yn.debugID+"-toggle");e&&(On?(n.innerHTML="+",e.style.display="none"):(n.innerHTML="-",e.style.display="block"),On=!On)},f=function(t,o,a){if(e.sm2Debugger!==n)try{sm2Debugger.handleEvent(t,o,a)}catch(i){return!1}return!0},B=function(){var e=[];return yn.debugMode&&e.push("sm2_debug"),yn.debugFlash&&e.push("flash_debug"),yn.useHighPerformance&&e.push("high_performance"),e.join(" ")},U=function(){var e=x("fbHandler"),n=yn.getMoviePercent(),t={type:"FLASHBLOCK"};yn.html5Only||(yn.ok()?(yn.didFlashBlock&&yn._wD(e+": Unblocked"),yn.oMC&&(yn.oMC.className=[B(),"movieContainer","swf_loaded"+(yn.didFlashBlock?" swf_unblocked":"")].join(" "))):(xn&&(yn.oMC.className=B()+" movieContainer "+(null===n?"swf_timedout":"swf_error"),yn._wD(e+": "+x("fbTimeout")+(n?" ("+x("fbLoaded")+")":""))),yn.didFlashBlock=!0,v({type:"ontimeout",ignoreInit:!0,error:t}),E(t)))},_=function(e,t,o){Pn[e]===n&&(Pn[e]=[]),Pn[e].push({method:t,scope:o||null,fired:!1})},v=function(e){if(e||(e={type:yn.ok()?"onready":"ontimeout"}),!Vn&&e&&!e.ignoreInit||"ontimeout"===e.type&&(yn.ok()||Sn&&!e.ignoreInit))return!1;var n,t={success:e&&e.ignoreInit?yn.ok():!Sn},o=e&&e.type?Pn[e.type]||[]:[],a=[],t=[t],i=xn&&!yn.ok();for(e.error&&(t[0].error=e.error),e=0,n=o.length;n>e;e++)!0!==o[e].fired&&a.push(o[e]);if(a.length)for(e=0,n=a.length;n>e;e++)a[e].scope?a[e].method.apply(a[e].scope,t):a[e].method.apply(this,t),i||(a[e].fired=!0);return!0},w=function(){e.setTimeout(function(){yn.useFlashBlock&&U(),v(),"function"==typeof yn.onload&&(p("onload",1),yn.onload.apply(e),p("onloadOK",1)),yn.waitForWindowLoad&&sn.add(e,"load",w)},1)},dn=function(){if(ln!==n)return ln;var t,o,a=!1,i=navigator,r=e.ActiveXObject;try{o=i.plugins}catch(s){o=void 0}if(o&&o.length)(i=i.mimeTypes)&&i["application/x-shockwave-flash"]&&i["application/x-shockwave-flash"].enabledPlugin&&i["application/x-shockwave-flash"].enabledPlugin.description&&(a=!0);else if(r!==n&&!wn.match(/MSAppHost/i)){try{t=new r("ShockwaveFlash.ShockwaveFlash")}catch(u){t=null}a=!!t}return ln=a},X=function(){var e,n,t=yn.audioFormats;if($n&&wn.match(/os (1|2|3_0|3_1)\s/i)?(yn.hasHTML5=!1,yn.html5Only=!0,yn.oMC&&(yn.oMC.style.display="none")):yn.useHTML5Audio&&(yn.html5&&yn.html5.canPlayType||(yn._wD("SoundManager: No HTML5 Audio() support detected."),yn.hasHTML5=!1),Gn&&yn._wD("soundManager: Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(ln?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),yn.useHTML5Audio&&yn.hasHTML5)for(n in J=!0,t)t.hasOwnProperty(n)&&t[n].required&&(yn.html5.canPlayType(t[n].type)?yn.preferFlash&&(yn.flash[n]||yn.flash[t[n].type])&&(e=!0):(J=!1,e=!0));return yn.ignoreFlash&&(e=!1,J=!0),yn.html5Only=yn.hasHTML5&&yn.useHTML5Audio&&!e,!yn.html5Only},G=function(e){var n,t,o=0;if(e instanceof Array){for(n=0,t=e.length;t>n;n++)if(e[n]instanceof Object){if(yn.canPlayMIME(e[n].type)){o=n;break}}else if(yn.canPlayURL(e[n])){o=n;break}e[o].url&&(e[o]=e[o].url),e=e[o]}return e},K=function(e){e._hasTimer||(e._hasTimer=!0,!Qn&&yn.html5PollingInterval&&(null===Rn&&0===Hn&&(Rn=setInterval(Q,yn.html5PollingInterval)),Hn++))},z=function(e){e._hasTimer&&(e._hasTimer=!1,!Qn&&yn.html5PollingInterval&&Hn--)},Q=function(){var e;if(null===Rn||Hn)for(e=yn.soundIDs.length-1;e>=0;e--)yn.sounds[yn.soundIDs[e]].isHTML5&&yn.sounds[yn.soundIDs[e]]._hasTimer&&yn.sounds[yn.soundIDs[e]]._onTimer();else clearInterval(Rn),Rn=null},E=function(t){t=t!==n?t:{},"function"==typeof yn.onerror&&yn.onerror.apply(e,[{type:t.type!==n?t.type:null}]),t.fatal!==n&&t.fatal&&yn.disable()},cn=function(){if(Gn&&dn()){var e,n,t=yn.audioFormats;for(n in t)if(t.hasOwnProperty(n)&&("mp3"===n||"mp4"===n)&&(yn._wD("soundManager: Using flash fallback for "+n+" format"),yn.html5[n]=!1,t[n]&&t[n].related))for(e=t[n].related.length-1;e>=0;e--)yn.html5[t[n].related[e]]=!1}},this._setSandboxType=function(e){var t=yn.sandbox;t.type=e,t.description=t.types[t.types[e]!==n?e:"unknown"],"localWithFile"===t.type?(t.noRemote=!0,t.noLocal=!1,p("secNote",2)):"localWithNetwork"===t.type?(t.noRemote=!1,t.noLocal=!0):"localTrusted"===t.type&&(t.noRemote=!1,t.noLocal=!1)},this._externalInterfaceOK=function(e){if(!yn.swfLoaded){var n;f("swf",!0),f("flashtojs",!0),yn.swfLoaded=!0,Zn=!1,Gn&&cn(),e&&e.replace(/\+dev/i,"")===yn.versionNumber.replace(/\+dev/i,"")?setTimeout(d,qn?100:1):(n='soundManager: Fatal: JavaScript file build "'+yn.versionNumber+'" does not match Flash SWF build "'+e+'" at '+yn.url+". Ensure both are up-to-date.",setTimeout(function(){throw Error(n)},0))}},I=function(e,t){function o(){var e,n=[],t=[];e="SoundManager "+yn.version+(!yn.html5Only&&yn.useHTML5Audio?yn.hasHTML5?" + HTML5 audio":", no HTML5 audio support":""),yn.html5Only?yn.html5PollingInterval&&n.push("html5PollingInterval ("+yn.html5PollingInterval+"ms)"):(yn.preferFlash&&n.push("preferFlash"),yn.useHighPerformance&&n.push("useHighPerformance"),yn.flashPollingInterval&&n.push("flashPollingInterval ("+yn.flashPollingInterval+"ms)"),yn.html5PollingInterval&&n.push("html5PollingInterval ("+yn.html5PollingInterval+"ms)"),yn.wmode&&n.push("wmode ("+yn.wmode+")"),yn.debugFlash&&n.push("debugFlash"),yn.useFlashBlock&&n.push("flashBlock")),n.length&&(t=t.concat([n.join(" + ")])),yn._wD(e+(t.length?" + "+t.join(", "):""),1),pn()}function a(e,n){return'<param name="'+e+'" value="'+n+'" />'}if(Dn&&Ln)return!1;if(yn.html5Only)return O(),o(),yn.oMC=s(yn.movieID),d(),Ln=Dn=!0,!1;var i,r,u,l=t||yn.url,c=yn.altURL||l,f=F(),p=B(),h=null,h=Mn.getElementsByTagName("html")[0],h=h&&h.dir&&h.dir.match(/rtl/i);if(e=e===n?yn.id:e,O(),yn.url=N(tt?l:c),t=yn.url,yn.wmode=!yn.wmode&&yn.useHighPerformance?"transparent":yn.wmode,null!==yn.wmode&&(wn.match(/msie 8/i)||!qn&&!yn.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Nn.push(L.spcWmode),yn.wmode=null),f={name:e,id:e,src:t,quality:"high",allowScriptAccess:yn.allowScriptAccess,bgcolor:yn.bgColor,pluginspage:ot+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:yn.wmode,hasPriority:"true"},yn.debugFlash&&(f.FlashVars="debug=1"),yn.wmode||delete f.wmode,qn)l=Mn.createElement("div"),r=['<object id="'+e+'" data="'+t+'" type="'+f.type+'" title="'+f.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',a("movie",t),a("AllowScriptAccess",yn.allowScriptAccess),a("quality",f.quality),yn.wmode?a("wmode",yn.wmode):"",a("bgcolor",yn.bgColor),a("hasPriority","true"),yn.debugFlash?a("FlashVars",f.FlashVars):"","</object>"].join("");else for(i in l=Mn.createElement("embed"),f)f.hasOwnProperty(i)&&l.setAttribute(i,f[i]);if(C(),p=B(),f=F())if(yn.oMC=s(yn.movieID)||Mn.createElement("div"),yn.oMC.id)u=yn.oMC.className,yn.oMC.className=(u?u+" ":"movieContainer")+(p?" "+p:""),yn.oMC.appendChild(l),qn&&(i=yn.oMC.appendChild(Mn.createElement("div")),i.className="sm2-object-box",i.innerHTML=r),Ln=!0;else{if(yn.oMC.id=yn.movieID,yn.oMC.className="movieContainer "+p,i=p=null,yn.useFlashBlock||(yn.useHighPerformance?p={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(p={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},h&&(p.left=Math.abs(parseInt(p.left,10))+"px"))),Yn&&(yn.oMC.style.zIndex=1e4),!yn.debugFlash)for(u in p)p.hasOwnProperty(u)&&(yn.oMC.style[u]=p[u]);try{qn||yn.oMC.appendChild(l),f.appendChild(yn.oMC),qn&&(i=yn.oMC.appendChild(Mn.createElement("div")),i.className="sm2-object-box",i.innerHTML=r),Ln=!0}catch(g){throw Error(x("domError")+" \n"+g.toString())}}return Dn=!0,o(),!0},V=function(){return yn.html5Only?(I(),!1):vn?!1:yn.url?(vn=yn.getMovie(yn.id),vn||(In?(qn?yn.oMC.innerHTML=En:yn.oMC.appendChild(In),In=null,Dn=!0):I(yn.id,yn.url),vn=yn.getMovie(yn.id)),"function"==typeof yn.oninitmovie&&setTimeout(yn.oninitmovie,1),hn(),!0):(p("noURL"),!1)},b=function(){setTimeout(M,1e3)},P=function(){e.setTimeout(function(){q("soundManager: useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),yn.setup({preferFlash:!1}).reboot(),yn.didFlashBlock=!0,yn.beginDelayedInit()},1)},M=function(){var n,t=!1;yn.url&&!kn&&(kn=!0,sn.remove(e,"load",b),ln&&Zn&&!Xn?p("waitFocus"):(Vn||(n=yn.getMoviePercent(),n>0&&100>n&&(t=!0)),setTimeout(function(){n=yn.getMoviePercent(),t?(kn=!1,yn._wD(x("waitSWF")),e.setTimeout(b,1)):(Vn||(yn._wD("soundManager: No Flash response within expected time. Likely causes: "+(0===n?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(yn.debugFlash?" "+x("checkSWF"):""),2),!tt&&n&&(p("localFail",2),yn.debugFlash||p("tryDebug",2)),0===n&&yn._wD(x("swf404",yn.url),1),f("flashtojs",!1,": Timed out"+(tt?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)"))),!Vn&&et&&(null===n?yn.useFlashBlock||0===yn.flashLoadTimeout?(yn.useFlashBlock&&U(),p("waitForever")):!yn.useFlashBlock&&J?P():(p("waitForever"),v({type:"ontimeout",ignoreInit:!0,error:{type:"INIT_FLASHBLOCK"}})):0===yn.flashLoadTimeout?p("waitForever"):!yn.useFlashBlock&&J?P():R(!0)))},yn.flashLoadTimeout)))},D=function(){return Xn||!Zn?(sn.remove(e,"focus",D),!0):(Xn=et=!0,p("gotFocus"),kn=!1,b(),sn.remove(e,"focus",D),!0)},hn=function(){Nn.length&&(yn._wD("SoundManager 2: "+Nn.join(" "),1),Nn=[])},pn=function(){hn();var e,n=[];if(yn.useHTML5Audio&&yn.hasHTML5){for(e in yn.audioFormats)yn.audioFormats.hasOwnProperty(e)&&n.push(e+" = "+yn.html5[e]+(!yn.html5[e]&&xn&&yn.flash[e]?" (using flash)":yn.preferFlash&&yn.flash[e]&&xn?" (preferring flash)":yn.html5[e]?"":" ("+(yn.audioFormats[e].required?"required, ":"")+"and no flash support)"));yn._wD("SoundManager 2 HTML5 support: "+n.join(", "),1)}},h=function(n){if(Vn)return!1;if(yn.html5Only)return p("sm2Loaded",1),Vn=!0,w(),f("onload",!0),!0;var t,o=!0;return yn.useFlashBlock&&yn.flashLoadTimeout&&!yn.getMoviePercent()||(Vn=!0),t={type:!ln&&xn?"NO_FLASH":"INIT_TIMEOUT"},yn._wD("SoundManager 2 "+(Sn?"failed to load":"loaded")+" ("+(Sn?"Flash security/load error":"OK")+") "+String.fromCharCode(Sn?10006:10003),Sn?2:1),Sn||n?(yn.useFlashBlock&&yn.oMC&&(yn.oMC.className=B()+" "+(null===yn.getMoviePercent()?"swf_timedout":"swf_error")),v({type:"ontimeout",error:t,ignoreInit:!0}),f("onload",!1),E(t),o=!1):f("onload",!0),Sn||(yn.waitForWindowLoad&&!Tn?(p("waitOnload"),sn.add(e,"load",w)):(yn.waitForWindowLoad&&Tn&&p("docLoaded"),w())),o},l=function(){var e,t=yn.setupOptions;for(e in t)t.hasOwnProperty(e)&&(yn[e]===n?yn[e]=t[e]:yn[e]!==t[e]&&(yn.setupOptions[e]=yn[e]))},d=function(){if(Vn)return p("didInit"),!1;if(yn.html5Only)return Vn||(sn.remove(e,"load",yn.beginDelayedInit),yn.enabled=!0,h()),!0;V();try{vn._externalInterfaceTest(!1),k(!0,yn.flashPollingInterval||(yn.useHighPerformance?10:50)),yn.debugMode||vn._disableDebug(),yn.enabled=!0,f("jstoflash",!0),yn.html5Only||sn.add(e,"unload",u)}catch(n){return yn._wD("js/flash exception: "+n.toString()),f("jstoflash",!1),E({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),R(!0),h(),!1}return h(),sn.remove(e,"load",yn.beginDelayedInit),!0},S=function(){return A?!1:(A=!0,l(),C(),!ln&&yn.hasHTML5&&(yn._wD("SoundManager 2: No Flash detected"+(yn.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),yn.setup({useHTML5Audio:!0,preferFlash:!1})),rn(),!ln&&xn&&(Nn.push(L.needFlash),yn.setup({flashLoadTimeout:1})),Mn.removeEventListener&&Mn.removeEventListener("DOMContentLoaded",S,!1),V(),!0)},an=function(){return"complete"===Mn.readyState&&(S(),Mn.detachEvent("onreadystatechange",an)),!0},T=function(){Tn=!0,S(),sn.remove(e,"load",T)},dn(),sn.add(e,"focus",D),sn.add(e,"load",b),sn.add(e,"load",T),Mn.addEventListener?Mn.addEventListener("DOMContentLoaded",S,!1):Mn.attachEvent?Mn.attachEvent("onreadystatechange",an):(f("onload",!1),E({type:"NO_DOM2_EVENTS",fatal:!0}))}if(!e||!e.document)throw Error("SoundManager requires a browser with window and document objects.");var o=null;e.SM2_DEFER!==n&&SM2_DEFER||(o=new t),"object"==typeof module&&module&&"object"==typeof module.exports?(module.exports.SoundManager=t,module.exports.soundManager=o):"function"==typeof define&&define.amd&&define("soundmanager2",[],function(){return{constructor:t,getInstance:function(n){return!e.soundManager&&n instanceof Function&&(n=n(t),n instanceof t&&(e.soundManager=n)),e.soundManager}}}),e.SoundManager=t,e.soundManager=o}(window),define("common/angular/config/config",["module","angular_helper"],function(e,n){return n.createModule(arguments).provider("Config",[function(){var e=function(n){return angular.forEach(arguments,function(t){t!==n&&angular.forEach(t,function(t,o){n[o]&&n[o].constructor&&n[o].constructor===Object?e(n[o],t):n[o]=t})}),n},n={};this.setConfig=function(t){n=e({},n,t)},this.$get=[function(){return n}]}])}),define("common/angular/services/event_manager_factory",["module","angular_helper"],function(e,n){var t=n.createModule(arguments),o=[].slice;return t.factory("EventManagerFactory",[function(){var e=function(){this.$element=angular.element("<div></div>")};return e.prototype.on=function(e,n){return this.$element.on(e,n),angular.bind(this,function(){this.$element.off(e,n)})},e.prototype.trigger=function(e){this.$element.triggerHandler(e,o.call(arguments,1))},{create:function(){return new e}}}]),t}),define("common/angular/services/user_agent",["module","angular_helper"],function(e,n){var t=n.createModule(arguments);return t.factory("UserAgent",["$window",function(e){var n=(e.navigator||{}).userAgent,t=angular.lowercase(n),o=!!t.match(/android/),a=!!t.match(/(iphone|ipad|ipod)/);return{raw:n,normalized:t,ios:a,android:o,mobile:a||o||!!t.match(/blackberry|mini|windows\sce|palm/)}}]),t.directive("androidStockBrowserClass",["UserAgent",function(e){return{restrict:"A",link:function(n,t,o){if(e.android){var a=!1,i=e.normalized.match(/applewebkit\/([\d.]+)/),r=e.normalized.match(/version\/([\d.]+)/);i&&i.length>0&&parseFloat(i[1])<537?a=!0:r&&r.length>0&&(a=!0),a&&o.$addClass(o.androidStockBrowserClass||"android-stock-browser")}}}}]),t}),define("common/angular/services/shared/player_key",["module","angular_helper","common/angular/config/config","common/angular/services/user_agent"],function(e,n){var t=n.createModule(arguments);return t.factory("PlayerKey",["$http","$q","$timeout","$interval","$log","UserAgent","Config",function(e,n,t,o,a,i,r){function s(){g&&(b++<5?(a.warn("Failed to retrieve a player key, retrying in 1.5 seconds..."),t(u,1500,!1)):(a.error("Failed to retrieve a player key!"),y.reject()))}function u(){e.jsonp(w,{timeout:_.promise}).success(function(e){angular.isObject(e)&&e.key?(b=0,m=e.key,a.debug("Player key loaded:",m),y.resolve(m)):s()}).error(s)}function l(){return!!m}function d(e){y.promise.then(angular.noop).then(e)}function c(){return g||(a.debug("PlayerKey.start()"),g=o(u,9e5,0,!1),l()||u()),h()}function f(){a.debug("PlayerKey.stop()"),g&&(o.cancel(g),g=void 0),m=void 0,y.reject(),y=n.defer(),_.reject(),_=n.defer()}function p(){return f(),c(),h()}function h(){return l()?n.when(m):y.promise}var g,m,y=n.defer(),_=n.defer(),v=r.PLAYER.webServer+r.PLAYER.htmlKeyAPI,w=v+(-1===v.indexOf("?")?"?":"&")+"callback=JSON_CALLBACK",b=0;i.android&&(w+="&session=false");var M=(r.PLAYER||{}).initialKey;return angular.isString(M)&&M.length>0&&(m=M,y.resolve(M)),{isReady:l,onReady:d,start:c,stop:f,restart:p,getKey:h}}]),t.run(["PlayerKey",function(e){e.start()}]),t}),define("common/angular/services/player/player_song_url",["module","angular_helper","common/angular/config/config","common/angular/services/shared/player_key"],function(e,n){var t=n.createModule(arguments);return t.factory("PlayerSongURL",["$http","$httpParamSerializerJQLike","PlayerKey","Config",function(e,n,t,o){return{get:function(e,a){return t.getKey().then(function(t){var i=n(angular.extend({},o.PLAYER.streamParams||{},a));return i&&(i="&"+i),o.PLAYER.webServer+o.PLAYER.streamAPI+t+"?client="+o.PLAYER.clientID+"&song_id="+e+i})}}}]),t}),define("common/angular/services/player/player",["module","angular_helper","soundmanager2","common/angular/config/config","common/angular/services/event_manager_factory","common/angular/services/user_agent","common/angular/services/shared/player_key","common/angular/services/player/player_song_url"],function(e,n,t){var o="BLANK_MP3",a="data:audio/mp3;base64,/+MYxAAI+x30EABHgwZ8YxjGMev//iO7u7u7gAAAAAAAAAAAAYGBgYGBgYGLAAAAEAr//5hCEIQiEIQhMzKqqqqq////+zMy/+MYxBcJu2H0EABHgaqqhQEBAQICAgICAgICAhVMQU1FMy45OC4yVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+MYxCsAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV/+MYxGYAAANIAAAAAFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",i=n.createModule(arguments);return i.factory("Player",["$window","$q","$timeout","$http","$log","Config","EventManagerFactory","PlayerKey","PlayerSongURL","UserAgent",function(e,n,i,r,s,u,l,d,c,f){var p,h=l.create(),g=function(){var e,n=!0,t=!0;return{reset:function(){t=!0,n=!0},get:function(){return n},set:function(o){t!==o&&(o?e=i(function(){n||(n=!0,h.trigger("bufferChange",n))},500,!1):(i.cancel(e),n&&(n=!1,h.trigger("bufferChange",n))),t=o)}}}(),m=function(){var e,n;return{set:function(t){return e=t,n&&i.cancel(n),n=i(function(){e=null},1500,!1),e},normalize:function(n){if(null!==e){if(e>n||n>e+1e3)return e;e=n}return n}}}(),y="initializing stopped playing paused".split(" "),_=n.defer(),v=new t.constructor,w=function(e){if(-1===y.indexOf(e))throw"Invalid Player state: "+e;O.state=e,angular.forEach(y,function(e){O[e]=!1}),O[e]=!0,h.trigger("stateChange",e)},b=function(){O.stop(),p&&(f.mobile?M(o,u.PLAYER.blankAudio.mp3):M(o,a))},M=function(n,t){g.reset(),p&&v.html5Only?(p.id=n,p.url=t,p.load()):(p&&v.destroySound(p.id),p=v.createSound({id:n,url:t,onerror:function(e,n){b(),h.trigger("onError",e,n)},whileloading:function(){p.id!==o&&p.id===this.id&&(g.set(p.isHTML5?3!==p.readyState:p.isBuffering),h.trigger("whileLoading"))},whileplaying:function(){p.id!==o&&p.id===this.id&&p.bytesLoaded>0&&(g.set(!1),h.trigger("whilePlaying"))},onfinish:function(){p.id!==o&&p.id===this.id&&(g.set(!1),h.trigger("finish"),O.stop())}})),u.DEBUG_ENABLED&&(e.smSound=p)},P=function(e,n){return c.get(e,n).then(function(e){return f.mobile?r.jsonp(e+"&just_url=true&callback=JSON_CALLBACK").then(function(e){return e.data}):e})},O={};s.debug("Player initializing..."),w("initializing"),v.defaultOptions.autoLoad=!0,v.defaultOptions.autoPlay=!1,v.defaultOptions.volume=100*u.PLAYER.volume,v.setup({url:u.PLAYER.swfPath,debugMode:!!u.PLAYER.debugMode,flashVersion:9,preferFlash:!!u.PLAYER.preferFlash,onready:function(){s.debug("SoundManager Ready"),f.mobile?M(o,u.PLAYER.blankAudio.mp3):M(o,a),w("stopped"),_.resolve()},ontimeout:function(e){s.error("Failed to load SoundManager. Status:",e),_.reject(e.error.type)}}),v.beginDelayedInit(),O.bootstrapPromise=_.promise;var D=!1;O.initializeForMobile=function(){return!D&&p&&(p.play(),O.playing||p.pause(),D=!0,s.debug("Player initialized for mobile...")),D},O._hasInitializedForMobile=function(){return D},O.setVolume=function(e){e=100*e,v.defaultOptions.volume=e,p&&p.setVolume(e)},O.stop=function(){p&&(m.set(0),p.stop()),w("stopped")},O.pause=function(){O.playing&&p&&(p.pause(),w("paused"))},O.resume=function(){O.paused&&p&&(p.resume(),w("playing"))},O.unloadSound=function(){b()},O.seekTo=function(e){p&&p.setPosition(m.set(parseInt(e,10)))},O.play=function(e,t){if("initializing"===O.state){var o=n.defer();return _.promise.then(function(){var n=D;O.play(e,t).then(o.resolve,o.reject).then(function(){var e=O.onWhilePlaying(function(){D=!0,e()})}),D=n}),o.promise}O.initializeForMobile();var a=parseInt(e,10);if(p&&(angular.isUndefined(e)||a===p.id))O.paused?O.resume():O.stopped&&(p.play(),w("playing"));else if(angular.isDefined(e))return P(a,t).then(function(e){return s.debug("New song URI:",e),O.stop(),M(a,e),f.mobile&&O.seekTo(0),p.play(),w("playing"),a},function(t){return s.error("Failed to get URI for song:",e),d.restart(),n.reject(t)});return n.when()},O.currentSongId=function(){return p&&p.id!==o?p.id:void 0},O.isPlaying=function(e){return O.currentSongId()===e},O.isBuffering=function(){return O.currentSongId()?g.get():!1},O.getPosition=function(){return O.currentSongId()?m.normalize(p.position):0},O.getDuration=function(){return O.currentSongId()?p.loaded?p.duration:p.durationEstimate:0};var L=!!f.normalized.match(/(chrome)[ \/]([\w.]+)/);L=!1,O.getBufferPercentage=function(){if(O.currentSongId()){if(p.loaded&&!L)return 100;if(angular.isNumber(p.bytesLoaded)&&angular.isNumber(p.bytesTotal))return 100*p.bytesLoaded/p.bytesTotal}return 0},O.on=function(e,n){return h.on(e,n)},O.onStateChange=function(e){return O.on("stateChange",e)},O.onBufferChange=function(e){return O.on("bufferChange",e)},O.onWhileLoading=function(e){return O.on("whileLoading",e)},O.onWhilePlaying=function(e){return O.on("whilePlaying",e)},O.onFinish=function(e){return O.on("finish",e)},O.onError=function(e){return O.on("onError",e)};var V=1e3,S=angular.noop;return O.onBufferChange(function(e,n){if(S(),!n&&O.playing&&O.currentSongId()!==o){var t=O.getPosition(),a=O.onWhilePlaying(function(){O.playing&&t!==O.getPosition()&&S()}),r=i(function(){O.playing&&t===O.getPosition()&&(s.debug("Detected blocked audio playback... Pausing!"),O.pause()),S()},V,!1);S=function(){a(),i.cancel(r),S=angular.noop}}}),O}]),i.run(["$window","Config","Player",function(e,n,t){n.DEBUG_ENABLED&&(e.Player=t)}]),i}),define("common/angular/services/shared/play_percentage_factory",["module","angular_helper"],function(e,n){var t=n.createModule(arguments);return t.factory("PlayPercentageFactory",[function(){function e(e){var n=[],t={start:0,end:0};this.getTotalPlayed=function(){n.push(t),t={start:t.start,end:t.end};for(var e=0;e<n.length;e++){var o=n[e];if(o.start>=0)for(var a=0;a<n.length;a++)if(e!==a){var i=n[a];if(i.start>=0)if(o.start<=i.start&&i.start<=o.end)i.start=-1,o.end=Math.max(o.end,i.end);else if(i.start<=o.start&&o.start<=i.end){o.start=-1,i.end=Math.max(o.end,i.end);break}}}var r=[];angular.forEach(n,function(e){e.start>=0&&r.push(e)}),n=r;var s=0;return angular.forEach(n,function(e){e.start>=0&&(s+=e.end-e.start)}),s},this.getPercentPlayed=function(e){return 100*this.getTotalPlayed()/e},this.updatePosition=function(o){var a=o-t.end;(a>e||0>a)&&(n.push(t),t={start:o}),t.end=o},this.reset=function(){n=[],t={start:0,end:0}}}return{create:function(n){if(!angular.isNumber(n)||0>=n)throw new Error("Invalid maxJumpForward: "+String(n));return new e(n)}}}]),t}),define("common/angular/services/player/play_percentage",["module","angular_helper","common/angular/services/shared/play_percentage_factory","common/angular/services/player/player"],function(e,n){function t(e,n){var t=e.getPosition();(e.playing||e.paused)&&t>0&&n.updatePosition(t)}var o=n.createModule(arguments);return o.factory("PlayPercentage",["PlayPercentageFactory",function(e){return e.create(750)}]),o.config(["$provide",function(e){e.decorator("Player",["$delegate","$injector","PlayPercentage",function(e,n,o){function a(){i||(i=n.get("Player","PlayPercentage#updatePositionUsingInjector")),t(i,o)}var i=null,r=function(){this.play=function(){return e.play.apply(e,arguments).then(function(e){return e&&o.reset(),e})},this.stop=function(){return a(),e.stop.apply(e,arguments)},this.pause=function(){a();var n=e.pause.apply(e,arguments);return a(),n},this.seekTo=function(){return a(),e.seekTo.apply(e,arguments)}};return r.prototype=e,new r
}])}]),o.run(["Player","PlayPercentage",function(e,n){e.onWhilePlaying(function(){t(e,n)})}]),o.run(["$window","Config","PlayPercentage",function(e,n,t){n.DEBUG_ENABLED&&(e.PlayPercentage=t)}]),o}),define("common/angular/services/shared/primary_player_factory",["module","angular_helper"],function(e,n){var t=n.createModule(arguments,"ngCookies");return t.factory("PrimaryPlayerFactory",["$timeout","$log","$cookies",function(e,n,t){function o(o){var s,u=r++ +"_"+(new Date).getTime()+"_"+Math.floor(1e5*Math.random()),l=!0;this.set=function(){s=e(function(){o()&&(t.put(a,u,i),l=angular.isDefined(t.get(a)),l||n.debug("PrimaryPlayer disabled: Unable to set cookie.")),s=null},0,!1)},this.isPrimary=function(){return l&&!s&&u!==t.get(a)?!1:!0}}var a="_reverb_currentplayer",i={path:"/"},r=0;return{create:function(e){return angular.isFunction(e)||(e=function(){return!0}),new o(e)}}}]),t}),define("common/angular/services/player/primary_player",["module","angular_helper","common/angular/services/shared/primary_player_factory","common/angular/services/player/player"],function(e,n){var t=n.createModule(arguments);return t.factory("PrimaryPlayer",["PrimaryPlayerFactory","Player",function(e,n){function t(){return n.playing}return e.create(t)}]),t.run(["Player","PrimaryPlayer",function(e,n){e.onWhilePlaying(function(){n.isPrimary()||e.pause()}),e.onStateChange(function(){e.playing&&n.set()})}]),t}),define("common/angular/services/player/player_statistics",["module","angular_helper","common/angular/config/config","common/angular/services/player/play_percentage","common/angular/services/player/player_song_url","common/angular/services/player/primary_player"],function(e,n){var t=n.createModule(arguments);return t.factory("PlayerStats",["$http","Config","Player","PlayPercentage",function(e,n,t,o){function a(e){i=e,r=-1}var i,r,s=(n.PLAYER||{}).trackingAPI;return{record:function(){if(s){t.currentSongId()!==i&&a(t.currentSongId());var n=o.getTotalPlayed(),u=o.getPercentPlayed(t.getDuration()),l=0;10>r&&u>10?r=l=10:50>r&&u>50?r=l=50:100>r&&u>=100&&(r=l=100),l>0&&e.post(s,{sid:i,pt:l,t:n,d:t.getDuration()})}}}}]),t.run(["Player","PlayerStats",function(e,n){e.onWhilePlaying(n.record)}]),t.config(["$provide",function(e){e.decorator("PlayerSongURL",["$delegate","$injector","$httpParamSerializerJQLike","PlayPercentage",function(e,n,t,o){var a=null,i=function(){this.get=function(){return a||(a=n.get("Player","PlayerSongURLWithPlayerStats#get")),e.get.apply(e,arguments).then(function(e){var n="",i=a.getDuration();if(i>=1e3){var r=o.getTotalPlayed(),s=Math.round(o.getPercentPlayed(a.getDuration()));s>=1&&(n=t({sid:a.currentSongId(),pt:s,t:r,d:a.getDuration()}),n=-1===e.indexOf("?")?"?"+n:"&"+n)}return e+n})}};return i.prototype=e,new i}])}]),t}),define("modules/player",["module","angular_helper","common/angular/services/player/player","common/angular/services/player/player_statistics"],function(e,n){var t=arguments;return function(e){var o=angular.element("#rn_player_core");if(0===o.length){var a=n.createModule(t);a.config(["$logProvider",function(n){n.debugEnabled(!!e.DEBUG_ENABLED)}]),a.config(["ConfigProvider",function(n){n.setConfig({DEBUG_ENABLED:!!e.DEBUG_ENABLED,PLAYER:angular.merge({},{debugMode:!!e.DEBUG_ENABLED,swfPath:"/widgets/shared_assets/sm2/soundmanager2.swf",preferFlash:!1,blankAudio:{mp3:"https://gp1.wac.edgecastcdn.net/802892/production_static/audio_player/blank.mp3"},volume:.5,clientID:"234s3rwas",webServer:"https://www.reverbnation.com",streamAPI:"/audio_player/html_player_stream/",htmlKeyAPI:"/controller/audio_player/get_html_player_key",trackingAPI:"/controller/audio_player/upt"},e)})}]),o=angular.element('<div id="rn_player_core"></div>').appendTo("body"),angular.bootstrap(o,[a.name],{strictDi:!0})}return o.injector().get("Player")}});