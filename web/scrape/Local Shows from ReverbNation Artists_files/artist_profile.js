/**
 * Copyright (c) 2011-2014 Felix Gnass
 * Licensed under the MIT license
 */

/**
   * Fast UUID generator, RFC4122 version 4 compliant.
   * @author Jeff Ward (jcward.com).
   * @license MIT license
   * @link http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136
   **/

/**
 * Owl carousel
 * @version 2.0.0
 * @author Bartosz Wojciechowski
 * @license The MIT License (MIT)
 * @todo Lazy Load Icon
 * @todo prevent animationend bubling
 * @todo itemsScaleUp
 * @todo Test Zepto
 * @todo stagePadding calculate wrong active classes
 */

/**
 * AutoRefresh Plugin
 * @version 2.0.0
 * @author Artus Kolanowski
 * @license The MIT License (MIT)
 */

/**
 * Lazy Plugin
 * @version 2.0.0
 * @author Bartosz Wojciechowski
 * @license The MIT License (MIT)
 */

/**
 * AutoHeight Plugin
 * @version 2.0.0
 * @author Bartosz Wojciechowski
 * @license The MIT License (MIT)
 */

/**
 * Video Plugin
 * @version 2.0.0
 * @author Bartosz Wojciechowski
 * @license The MIT License (MIT)
 */

/**
 * Animate Plugin
 * @version 2.0.0
 * @author Bartosz Wojciechowski
 * @license The MIT License (MIT)
 */

/**
 * Autoplay Plugin
 * @version 2.0.0
 * @author Bartosz Wojciechowski
 * @author Artus Kolanowski
 * @license The MIT License (MIT)
 */

/**
 * Navigation Plugin
 * @version 2.0.0
 * @author Artus Kolanowski
 * @license The MIT License (MIT)
 */

/**
 * Hash Plugin
 * @version 2.0.0
 * @author Artus Kolanowski
 * @license The MIT License (MIT)
 */

/**
 * Support Plugin
 *
 * @version 2.0.0
 * @author Vivid Planet Software GmbH
 * @author Artus Kolanowski
 * @license The MIT License (MIT)
 */

define("angular_helper",["angular"],function(){var e=Object.prototype.toString,t=function(t){return"[object Arguments]"===e.apply(t)||null!==t&&void 0!==t&&!!t.callee},n=function(t){return"[object Array]"===e.apply(t)},r=function(e){return"string"==typeof e},i=function(e){if(t(e)||n(e))return i.apply(null,e);if(e&&e.id)return e.id;throw"Unable to extract AngularJS module name from RequireJS module: "+e},o=function(){var e=[];return angular.forEach(arguments,function(i){t(i)||n(i)?e.push.apply(e,o.apply(null,i)):r(i)?e.push(i):i&&i.name&&n(i.requires)&&e.push(i.name)}),e},a=function(){var e=i(arguments),t=o.apply(null,arguments);return angular.module(e,t)},s=function(){var e=arguments;return function(t,n){var r=a(e);r.config(["ConfigProvider",function(e){e.setConfig(n)}]),angular.bootstrap(t,[r.name],{strictDi:!0})}},l=function(e,t){function n(n,r){var i=function(e){n.$evalAsync(function(){n[r]=angular.copy(e,n[r])})};n.$on("$destroy",e.$watch(t,i,!0)),i(e.$eval(t))}return n};return{configBootstrapper:s,createModule:a,scopeBinder:l}}),define("restangular",["angular"],function(e){return e.module("restangular")}),define("common/angular/config/config",["module","angular_helper"],function(e,t){return t.createModule(arguments).provider("Config",[function(){var e=function(t){return angular.forEach(arguments,function(n){n!==t&&angular.forEach(n,function(n,r){t[r]&&t[r].constructor&&t[r].constructor===Object?e(t[r],n):t[r]=n})}),t},t={};this.setConfig=function(n){t=e({},t,n)},this.$get=[function(){return t}]}])}),define("common/angular/services/log",["module","angular_helper"],function(e,t){return t.createModule(arguments).factory("$log",["$window",function(e){return e.Reverb}])}),define("common/angular/services/exception_handler",["module","angular_helper","common/angular/services/log"],function(e,t){return t.createModule(arguments).factory("$exceptionHandler",["$log","$window",function(e,t){return function(n,r){e.error(n.stack,r),t.Hoptoad&&t.Hoptoad.notify(n)}}])}),define("common/angular/config/csrf_protection",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("CSRFToken",[function(){return{get:function(){var e=angular.element("[name=csrf-token]");return e.length<1?null:e[0].content}}}]),n}),define("common/angular/config/location_provider",["module","angular_helper"],function(e,t){var n,r=parseInt((/android (\d+)/.exec(angular.lowercase((window.navigator||{}).userAgent))||[])[1],10),i=/Boxee/i.test((window.navigator||{}).userAgent);return n=!window.history||!window.history.pushState||4>r||i?!1:{enabled:!0,requireBase:!1,rewriteLinks:!0},Reverb.log("html5mode",n),t.createModule(arguments).value("$html5mode",n).config(["$locationProvider",function(e){e.html5Mode(n),e.hashPrefix("!")}]).run(["$window","$log","$rootScope","$rootElement","$location",function(e,t,n,r,i){n.$root._$location=i,e.rootScopes=e.rootScopes||[],e.rootScopes.push(n),r.on("$destroy",function(){t.debug("Destroying $rootScope:",n.$id),n.$destroy(),e.rootScopes.splice(e.rootScopes.indexOf(n),1)}),n.$on("$locationChangeStart",function(t,n,r,i,o){var a=[];angular.forEach(e.rootScopes,function(e){e._$perform_navigation?a.push(e):e.$broadcast("$globalLocationChangeStart",n,r,i,o)}),angular.forEach(a,function(e){e.$broadcast("$globalLocationChangeStart",n,r,i,o)})}),n.$on("$locationChangeSuccess",function(t,r,o){angular.forEach(e.rootScopes,function(e){e!==n&&r!==o&&e.$evalAsync(function(){e._$location.url(i.url())})})})}])}),define("common/angular/config/prevent_navigation",["module","angular_helper","common/angular/config/location_provider"],function(e,t){return t.createModule(arguments).run(["$rootElement","$html5mode",function(e,t){t&&e.on("click",function(e){e&&e.originalEvent&&(e.originalEvent.ngSuppressed=!0)})}])}),define("common/angular/config/sce_delegate_whitelist",["module","angular_helper"],function(e,t){return t.createModule(arguments).config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self",/^https?\:\/\/(?:[^\/]*\.)?edgecastcdn\.net\/.*/,/^https?\:\/\/(?:[^\/]*\.)?reverbnation\.com\/.*/,/^https?\:\/\/(?:[^\/]*\.)?soniclemur\.com\/.*/,/^https?\:\/\/(?:[^\/]*\.)?eartight\.com\/.*/,/^https?\:\/\/(?:[^\/]*\.)?tunehive\.com\/.*/,/^https?\:\/\/djj-tunehive-cdn\.ngrok\.io\/.*/])}])}),define("common/angular/main_site_essential",["module","angular_helper","common/angular/services/exception_handler","common/angular/services/log","common/angular/config/csrf_protection","common/angular/config/location_provider","common/angular/config/prevent_navigation","common/angular/config/sce_delegate_whitelist"],function(e,t){return t.createModule(arguments)}),define("common/angular/api/services/inflector",["module","angular_helper"],function(e,t){return t.createModule(arguments).factory("ReverbApiInflector",[function(){var e={},t={},n=function(e){return e[0].toLowerCase()+e.substr(1)},r=function(e){return e[0].toUpperCase()+e.substr(1)};return this.registerInflection=function(i,o){var a=n(i),s=r(i),l=n(o),u=r(o);e[a]=l,e[s]=u,t[l]=a,t[u]=s},this.singularize=function(e){return t[e]||this.registerInflection(e.replace(/s$/,""),e),t[e]},this.pluralize=function(t){return e[t]||this.registerInflection(t,t+"s"),e[t]},this}])}),define("common/angular/api/services/model_common",["module","angular_helper","common/angular/api/services/inflector"],function(e,t){var n=t.createModule(arguments).constant("API_MODEL_TYPES",["albums","artist","crowd_review_report","fan_reach_campaigns","fan_reaches","fan_reach_owners","label","location/countries","press","shows","social_networks","songs","stats","venue","videos"]).run(["ReverbApi","API_MODEL_TYPES","ReverbApiInflector",function(e,t,n){angular.forEach(t,function(t){e.extendCollection(t,function(e){return e.alpha_sort_params=function(){var e={};return e},e.model_type=t,e}),e.extendModel(t,function(e){return e.type=n.singularize(t),e.unique_id=function(){return n.singularize(t[0].toUpperCase()+t.substr(1))+"_"+e.id},e.displayName=function(){return e.name},e}),e.addElementTransformer(t,!0,function(e){return e}),e.addElementTransformer(t,!1,function(e){return delete e.parentResource,e}),e.addResponseInterceptor(function(e){return e})})}]);return n}),define("common/angular/api/services/page_object_common",["module","angular_helper"],function(e,t){var n=t.createModule(arguments).constant("API_PO_TYPES",["artist","label","fan","promoter","venue","musician"]).run(["ReverbApi","API_PO_TYPES",function(e,t){angular.forEach(t,function(t){e.extendModel(t,function(e){return e.type=t,e}),e.addElementTransformer(t,!0,function(e){return e.addRestangularMethod("search","get","search"),e}),e.addElementTransformer(t,!1,function(e){return e}),e.addResponseInterceptor(function(n,r,i,o){return new RegExp("^/api/"+t+"/search").test(o)?(extracted=_.map(n.results,function(n){return e.restangularizeElement("",n,t)}),extracted.pagination=n.pagination,extracted):n})})}]);return n}),define("common/angular/api/services/reverb_api",["module","angular_helper","restangular","common/angular/api/services/model_common","common/angular/api/services/page_object_common","common/angular/api/services/inflector"],function(e,t){return t.createModule(arguments).factory("ReverbApi",["Restangular","ReverbApiInflector",function(e,t){return e.withConfig(function(e){e.setBaseUrl("/api"),e.addFullRequestInterceptor(function(e,t,n,r,i,o){return["getList","get"].indexOf(t)>-1?(o=o||{},o.bust=(new Date).getTime(),{params:o}):void 0}),e.addRequestInterceptor(function(e,n,r,i){var o=!1;if("remove"===n)return null;var a=void 0;try{a=angular.module("common/angular/api/models/"+r)}catch(s){}if(a){switch(n){case"put":o=new RegExp(r+"\\/([ABLMPV]\\d+-)?\\d*\\/?$").test(i);break;case"post":o=new RegExp(r+"\\/?$").test(i)}if(o)return wrappedElement={},wrappedElement[t.singularize(r)]=e,e=wrappedElement}return e}),e.addResponseInterceptor(function(e,t){var n;return"getList"===t&&e.results?(n=e.results,n.pagination=e.pagination):n=e,n})})}])}),define("common/angular/api/models/artists",["module","angular_helper","common/angular/api/services/reverb_api"],function(e,t){return t.createModule(arguments).run(["ReverbApi",function(e){e.addElementTransformer("artist",!1,function(e){return e.addRestangularMethod("getFans","get","fans"),e.addRestangularMethod("getFavorites","get","favorites"),e.addRestangularMethod("getStats","get","stats"),e.addRestangularMethod("getStatus","get","status"),e}),e.addResponseInterceptor(function(t,n,r,i){if(new RegExp("/api/artist/\\d+/(?:fans|favorites)").test(i)){var o=_.map(t.results,function(t){var n=t.obj;return n.became_fan_at=t.created_at,e.restangularizeElement("",n,n.type)});return o.pagination=t.pagination,o}return t})}]).factory("Artists",["ReverbApi",function(e){return e.service("artist")}])}),define("common/angular/api/models/fans",["module","angular_helper","common/angular/api/services/reverb_api"],function(e,t){return t.createModule(arguments).run(["ReverbApi",function(e){e.addElementTransformer("fan",!1,function(e){return e})}]).factory("Fans",["ReverbApi",function(e){return e.service("fan")}])}),define("common/angular/api/models/labels",["module","angular_helper","common/angular/api/services/reverb_api"],function(e,t){return t.createModule(arguments).factory("Labels",["ReverbApi",function(e){return e.service("label")}])}),define("common/angular/api/models/musicians",["module","angular_helper","common/angular/api/services/reverb_api"],function(e,t){return t.createModule(arguments).factory("Musicians",["ReverbApi",function(e){return e.service("musician")}])}),define("common/angular/api/models/promoters",["module","angular_helper","common/angular/api/services/reverb_api"],function(e,t){return t.createModule(arguments).factory("Promoters",["ReverbApi",function(e){return e.service("promoter")}])}),define("common/angular/api/models/venues",["module","angular_helper","common/angular/api/services/reverb_api"],function(e,t){return t.createModule(arguments).run(["ReverbApi",function(e){e.addElementTransformer("venue",!1,function(e){return e})}]).factory("Venues",["ReverbApi",function(e){return e.service("venue")}])}),define("common/angular/api/models/writers",["module","angular_helper","common/angular/api/services/reverb_api"],function(e,t){return t.createModule(arguments).factory("Writers",["ReverbApi",function(e){return e.service("writer")}])}),define("common/angular/api/models/page_objects",["module","angular_helper","common/angular/api/models/artists","common/angular/api/models/fans","common/angular/api/models/labels","common/angular/api/models/musicians","common/angular/api/models/promoters","common/angular/api/models/venues","common/angular/api/models/writers"],function(e,t){return t.createModule(arguments).factory("PageObjects",["Artists","Fans","Labels","Musicians","Promoters","Venues","Writers",function(e,t,n,r,i,o,a){return{forType:function(s){switch(s=s.toLowerCase()){case"artist":return e;case"fan":return t;case"label":return n;case"musician":return r;case"promoter":return i;case"venue":return o;case"writer":return a}return null}}}])}),define("common/angular/components/pagination",["module","angular_helper"],function(e,t){return t.createModule(arguments).factory("PaginationService",[function(){return{addPagination:function(e,t,n,r){var i=1,o=[];n=n||3,r=r||5,t.then?t.then(function(e){return o=e,e}):o=t,e.getTotalItems=function(){return o.length},e.getMaxSize=function(){return r},e.getPageSize=function(){return n},e.setPageSize=function(e){n=e},e.getNumberOfPages=function(){return Math.ceil(o.length/n)},e.getCurrentPage=function(){return Math.max(1,Math.min(e.getNumberOfPages(),i))},e.setCurrentPage=function(t){i=Math.max(1,Math.min(e.getNumberOfPages(),t))},e.getCurrentPageStart=function(){return(e.getCurrentPage()-1)*n},e.getCurrentPageEnd=function(){return Math.min(o.length,e.getCurrentPage()*n-1)},e.getPageNumberForItem=function(e){return Math.max(1,Math.ceil((o.indexOf(e)+1)/n))},e.disablePagination=function(){n=Number.MAX_VALUE}}}}]).filter("paginate",[function(){return function(e,t,n){return angular.isArray(e)?e.slice(t,n+1):[]}}]).run(["$templateCache",function(e){var t=["<div>",'<div ng-if="useFoundation == true">','<ul class="pagination">','<li ng-repeat="page in pages" ng-class="{current: page.active, unavailable: page.disabled, arrow: page.previous || page.next, \'n-of-n\': page.nOfN}">',"<a ng-if=\"!page.nOfN\" ng-click=\"selectPage(page.number)\" ng-class=\"{'qa-current-page': page.active, 'qa-previous-page': page.previous, 'qa-next-page': page.next, '{{'qa-page-' + page.text}}': page.text, 'qa-last-page': {{page.number === totalPages}} }\">{{page.text}}</a>",'<span ng-if="page.nOfN">{{page.text}}</span>',"</li>","</ul>","</div>",'<div class="pagination" ng-if="useFoundation != true">',"<ul>",'<li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}">','<a ng-click="selectPage(page.number)">{{page.text}}</a>',"</li>","</ul>","</div>","</div>"].join(""),n=['<div class="pager">',"<ul>",'<li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}">','<a ng-click="selectPage(page.number)">{{page.text}}</a>',"</li>","</ul>","</div>"].join("");e.put("template/pagination/pagination.html",t),e.put("template/pagination/pager.html",n)}]).controller("PaginationController",["$scope","$attrs","$parse","$interpolate",function(e,t,n,r){var i=this,o=t.numPages?n(t.numPages).assign:angular.noop;this.init=function(r){t.itemsPerPage?e.$parent.$watch(n(t.itemsPerPage),function(t){i.itemsPerPage=parseInt(t,10),e.totalPages=i.calculateTotalPages()}):this.itemsPerPage=r},this.noPrevious=function(){return 1===this.page},this.noNext=function(){return this.page===e.totalPages},this.isActive=function(e){return this.page===e},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.getAttributeValue=function(t,n,i){return angular.isDefined(t)?i?r(t)(e.$parent):e.$parent.$eval(t):n},this.render=function(){this.page=parseInt(e.page,10)||1,this.page>0&&this.page<=e.totalPages&&(e.pages=this.getPages(this.page,e.totalPages))},e.selectPage=function(t){!i.isActive(t)&&t>0&&t<=e.totalPages&&(e.page=t,e.onSelectPage({page:t}))},e.$watch("page",function(){i.render()}),e.$watch("totalItems",function(){e.totalPages=i.calculateTotalPages()}),e.$watch("totalPages",function(t){o(e.$parent,t),i.page>t?e.selectPage(t):i.render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &",useFoundation:"="},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(n,r,i,o){function a(e,t,n,r){return{number:e,text:t,active:n,disabled:r}}var s,l=o.getAttributeValue(i.boundaryLinks,t.boundaryLinks),u=o.getAttributeValue(i.directionLinks,t.directionLinks),c=o.getAttributeValue(i.firstText,t.firstText,!0),d=o.getAttributeValue(i.previousText,t.previousText,!0),f=o.getAttributeValue(i.nextText,t.nextText,!0),p=o.getAttributeValue(i.lastText,t.lastText,!0),g=o.getAttributeValue(i.rotate,t.rotate);o.init(t.itemsPerPage),i.maxSize&&n.$parent.$watch(e(i.maxSize),function(e){s=parseInt(e,10),o.render()}),o.getPages=function(e,t){var r=[],h=1,m=t,v=angular.isDefined(s)&&t>s;v&&(g?(h=Math.max(e-Math.floor(s/2),1),m=h+s-1,m>t&&(m=t,h=m-s+1)):(h=(Math.ceil(e/s)-1)*s+1,m=Math.min(h+s-1,t)));for(var _=h;m>=_;_++){var y=a(_,_,o.isActive(_),!1);r.push(y)}if(v&&!g){if(h>1){var w=a(h-1,"...",!1,!1);r.unshift(w)}if(t>m){var b=a(m+1,"...",!1,!1);r.push(b)}}if(n.$eval(i.useFoundation)){var S=a(e,e+" of "+t,!1,!1);S.nOfN=!0,r.unshift(S)}if(u){var C=a(e-1,d,!1,o.noPrevious());C.previous=!0,r.unshift(C);var A=a(e+1,f,!1,o.noNext());A.next=!0,r.push(A)}if(l){var $=a(1,c,!1,o.noPrevious());r.unshift($);var P=a(t,p,!1,o.noNext());r.push(P)}return r}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &",useFoundation:"="},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,n,r,i){function o(e,t,n,r,i){return{number:e,text:t,disabled:n,previous:l&&r,next:l&&i}}var a=i.getAttributeValue(r.previousText,e.previousText,!0),s=i.getAttributeValue(r.nextText,e.nextText,!0),l=i.getAttributeValue(r.align,e.align);i.init(e.itemsPerPage),i.getPages=function(e){return[o(e-1,a,i.noPrevious(),!0,!1),o(e+1,s,i.noNext(),!1,!0)]}}}}])}),define("common/angular/controllers/opp_listings",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.controller("OppListingsCtrl",["Viewport","CampaignService","Config",function(e,t,n){var r=this;r.loading=!0,r.campaigns=null,r.viewPort=e,r.viewLimit=n.CAMPAIGN_VIEW_LIMIT||3;var i=function(){return{per_page:r.viewLimit,sort:[{field:"recommended",dir:"desc"}]}},o=function(){r.loading=!0,t.getCampaigns(i()).then(a)},a=function(e){r.campaigns=e,r.loading=!1};o()}]),n}),define("common/angular/directives/foundation_reflow",["module","angular_helper"],function(e,t){return t.createModule(arguments).directive("foundationReflow",["$timeout",function(e){return{restrict:"A",link:function(t,n,r){t.$index&&t.$last!==!0||e(function(){angular.element(document).foundation&&r.foundationReflow.length&&angular.element(document).foundation(r.foundationReflow,"reflow")},0)}}}])}),define("common/angular/directives/fb_like_button",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.directive("fbLikeButton",["$interpolate","$timeout","$window",function(e,t,n){return{restrict:"E",scope:{url:"@url"},link:function(r,i,o){function a(){if(o.url&&!r.url)var s=r.$watch("url",function(e){e&&(a(),s())});else i.html(e('<div class="fb-like" data-href="{{ url }}" data-layout="button_count" data-action="like" data-show-faces="false" data-share="false"></div>')(r)),t(function(){n.FB.XFBML.parse(i.parent()[0])},0,!1)}Reverb.Facebook&&Reverb.Facebook.initialized().done(a)}}}]),n}),window.Reverb||(window.Reverb={}),Reverb.GeoLocation=function(){var e=function(e){var t="/main/change_location?action_forward=trigger_updated_object";e===!1&&(t+="&no_session=true"),window.modal_open(t)},t=function(e){var t=[];return e&&(e.city&&t.push(e.city),e.state&&t.push(e.state),e.country&&t.push(e.country)),t.join(", ")},n=function(e){var t=[];return t.push(e.city||""),t.push(e.state||""),t.push(e.country||""),t.join("_")};return{show_modal:e,display_string_for_location:t,region_string_for_location:n}}(),define("main/geo_location_utils",function(){}),define("common/angular/directives/opportunity_card",["module","angular_helper","main/geo_location_utils"],function(e,t){var n=function(){return{restrict:"EA",scope:{campaign:"=",cardSize:"=",rnlink:"=",buttonStyle:"=",source:"="},templateUrl:function(){return"opportunities/directives/opportunity_listing_card.html"},link:function(e){e.costDisplay=function(e){var t=e.submission_cost?parseFloat(e.submission_cost).toFixed(2):0;return e.crowd_review_opp?"Requires Crowd Review":t>0?"$"+t:e.requires_rpk?"Free with Membership":"Free"},e.daysLeftToSubmit=function(e){var t=0;if(e.submission_ends_at){var n=new Date(e.submission_ends_at).getTime()-Date.parse((new Date).toUTCString());n>0&&(t=Math.ceil(n/864e5)),t>0&&(t+=1)}return t},e.location=function(e){return angular.isObject(e)?Reverb.GeoLocation.display_string_for_location(e):e},e.submissionURL=function(t){if(!t)return"#";if(!CURRENT_PAGE_OBJECT)return"/main/goto_feature/opportunities?signup_type=artist&use_modal=true&campaign_id="+t.id;var n=e.submissionEnabled(t)?t.submission_url:t.details_url;return n+="&rn_link="+(e.rnlink||"23"),n+="&source="+(e.source||"opp_listing_2016"),null!=CURRENT_PAGE_OBJECT&&(n+="&page_object="+CURRENT_PAGE_OBJECT),n},e.isRecommended=function(e){return e&&e.tier?"tier 1"==e.tier.toLowerCase():!1},e.submissionEnabled=function(e){return CURRENT_PAGE_OBJECT?e.can_submit&&(e.allow_multiple||!e.user_submissions||0==e.user_submissions.length):!0},e.hasCurrentPageObject=function(){return CURRENT_PAGE_OBJECT}}}};return t.createModule(arguments).directive("opportunityCard",[n])}),define("common/angular/directives/twitter_follow_button",["module","angular_helper"],function(e,t){var n=function(e){var t={restrict:"E",scope:{twitter_url:"=url",name:"=name"},link:function(t,n,r){function i(){if(!r.twitter_url||t.twitter_url||o){var a=document.createElement("a");a.setAttribute("href",t.twitter_url),a.setAttribute("data-show-count","true"),a.setAttribute("class","twitter-follow-button"),a.setAttribute("data-show-screen-name",r.showScreenName||"true"),n.html(a),e.twttr.widgets.load(n.parent()[0])}else{o=!0;var s=t.$watch("twitter_url",function(e){e&&(i(),s())})}}e.twttr?i():jQuery.getScript("//platform.twitter.com/widgets.js",function(){i()});var o=!1}};return t};return t.createModule(arguments).directive("twitterFollowingButton",["$window","Config",n])}),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define("vendor/spin",t):e.Spinner=t()}(this,function(){function e(e,t){var n,r=document.createElement(e||"div");for(n in t)r[n]=t[n];return r}function t(e){for(var t=1,n=arguments.length;n>t;t++)e.appendChild(arguments[t]);return e}function n(e,t,n,r){var i=["opacity",t,~~(100*e),n,r].join("-"),o=.01+n/r*100,a=Math.max(1-(1-e)/t*(100-o),e),s=u.substring(0,u.indexOf("Animation")).toLowerCase(),l=s&&"-"+s+"-"||"";return d[i]||(f.insertRule("@"+l+"keyframes "+i+"{0%{opacity:"+a+"}"+o+"%{opacity:"+e+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+e+"}100%{opacity:"+a+"}}",f.cssRules.length),d[i]=1),i}function r(e,t){var n,r,i=e.style;for(t=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<c.length;r++)if(n=c[r]+t,void 0!==i[n])return n;return void 0!==i[t]?t:void 0}function i(e,t){for(var n in t)e.style[r(e,n)||n]=t[n];return e}function o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)void 0===e[r]&&(e[r]=n[r])}return e}function a(e,t){return"string"==typeof e?e:e[t%e.length]}function s(e){this.opts=o(e||{},s.defaults,p)}function l(){function n(t,n){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',n)}f.addRule(".spin-vml","behavior:url(#default#VML)"),s.prototype.lines=function(e,r){function o(){return i(n("group",{coordsize:c+" "+c,coordorigin:-u+" "+-u}),{width:c,height:c})}function s(e,s,l){t(f,t(i(o(),{rotation:360/r.lines*e+"deg",left:~~s}),t(i(n("roundrect",{arcsize:r.corners}),{width:u,height:r.width,left:r.radius,top:-r.width>>1,filter:l}),n("fill",{color:a(r.color,e),opacity:r.opacity}),n("stroke",{opacity:0}))))}var l,u=r.length+r.width,c=2*u,d=2*-(r.width+r.length)+"px",f=i(o(),{position:"absolute",top:d,left:d});if(r.shadow)for(l=1;l<=r.lines;l++)s(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=r.lines;l++)s(l);return t(e,f)},s.prototype.opacity=function(e,t,n,r){var i=e.firstChild;r=r.shadow&&r.lines||0,i&&t+r<i.childNodes.length&&(i=i.childNodes[t+r],i=i&&i.firstChild,i=i&&i.firstChild,i&&(i.opacity=n))}}var u,c=["webkit","Moz","ms","O"],d={},f=function(){var n=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],n),n.sheet||n.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",position:"absolute"};s.defaults={},o(s.prototype,{spin:function(t){this.stop();{var n=this,r=n.opts,o=n.el=i(e(0,{className:r.className}),{position:r.position,width:0,zIndex:r.zIndex});r.radius+r.length+r.width}if(i(o,{left:r.left,top:r.top}),t&&t.insertBefore(o,t.firstChild||null),o.setAttribute("role","progressbar"),n.lines(o,n.opts),!u){var a,s=0,l=(r.lines-1)*(1-r.direction)/2,c=r.fps,d=c/r.speed,f=(1-r.opacity)/(d*r.trail/100),p=d/r.lines;!function g(){s++;for(var e=0;e<r.lines;e++)a=Math.max(1-(s+(r.lines-e)*p)%d*f,r.opacity),n.opacity(o,e*r.direction+l,a,r);n.timeout=n.el&&setTimeout(g,~~(1e3/c))}()}return n},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(r,o){function s(t,n){return i(e(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:t,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*c+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var l,c=0,d=(o.lines-1)*(1-o.direction)/2;c<o.lines;c++)l=i(e(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:u&&n(o.opacity,o.trail,d+c*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&t(l,i(s("#000","0 0 4px #000"),{top:"2px"})),t(r,t(l,s(a(o.color,c),"0 0 1px rgba(0,0,0,.1)")));return r},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}});var g=i(e("group"),{behavior:"url(#default#VML)"});return!r(g,"transform")&&g.adj?l():u=r(g,"animation"),s}),define("common/angular/directives/spinner",["module","angular_helper","vendor/spin"],function(e,t,n){function r(e){var t={lines:13,length:5,width:2,radius:5,corners:1,rotate:0,direction:1,color:"#000",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"50%",left:"50%",delay:0};return{restrict:"A",scope:{showSpinner:"=",spinnerOptions:"@"},link:function(r,i,o){function a(t){e.cancel(c),c=null,t?s.delay?c=e(d,s.delay):d():u&&(u=!1,l.stop())}var s=angular.copy(t);r.spinnerOptions&&_.extend(s,angular.fromJson(r.spinnerOptions));var l=new n(s),u=!1;if(_.isUndefined(o.showSpinner))throw new Error("spinner attribute must be defined");var c=null;angular.element(l.el).addClass("js-show-spinner");var d=function(){u=!0,l.spin(),i.append(l.el)};r.$watch("showSpinner",a)}}}return n.$inject=[],t.createModule(arguments).directive("showSpinner",["$timeout",r])}),define("common/angular/directives/task",["module","angular_helper"],function(e,t){var n=function(e,t,n){return{restrict:"E",scope:{task:"=task",sectionName:"=",position:"=",source:"="},template:'<div ng-include="getTemplateUrl()"></div>',link:function(r){var i=500;r.data=r.task.template_data,r.data.icon_filled=t.trustAsResourceUrl(r.data.icon_filled),r.getTemplateUrl=function(){return"artist_dashboard/cards/"+r.task.template+".html"},r.mixpanelLabel=r.source&&"artist_profile"===r.source?"DynamicAdminPanel.Task.Click":"DashboardRefresh.Task.Click",r.trackingProperties=function(){return{task:r.task.key,section:r.sectionName,position:r.position,source:r.source||"dashboard"}},r.recordImpression=function(){e.info("Task Event Impression: "+r.task.id),n.recordEvent(r.task.id,"impressions",i)()},r.recordClick=function(){e.info("Task Event Click: "+r.task.id),n.recordEvent(r.task.id,"clicks",i)()},r.recordImpression()}}};return t.createModule(arguments).directive("task",["$log","$sce","TaskService",n])}),define("common/angular/directives/err_src",["module","angular_helper"],function(e,t){return t.createModule(arguments).directive("errSrc",[function(){return{restrict:"A",link:function(e,t,n){t.bind("error",function(){t.attr("src")!=n.errSrc&&t.attr("src",n.errSrc)})}}}])}),define("common/angular/directives/event_listener",["module","angular_helper"],function(e,t){return t.createModule(arguments).directive("eventListener",["$window",function(e){return{restrict:"A",scope:{eventListener:"@"},link:function(t,n){function r(e,n){function r(e,r){t.$evalAsync(function(){t.$emit(n,e,r)})}var i=n.indexOf(":"),o=n.substring(i+1);e.bind(o,r),t.$on("$destroy",function(){e.unbind(n,r)})}var i=t.eventListener.replace(/\s/g,"").split(",");angular.forEach(i,function(i){var o=i.split(":");if(o.length<2)throw new Error("Invalid event specification: "+i);switch(o[0]){case"reverb":if(3!=o.length)throw new Error("Invalid Reverb.Event specification: "+i);n.addClass(o[1]+"_event_handler"),n.bind(o[1]+":"+o[2],function(e,n){t.$evalAsync(function(){t.$emit(i,e,n)})});break;case"window":r(jQuery(e),i);break;case"music_player":r(MusicPlayer.getInstance(),i);break;default:throw new Error("Invalid event specification: "+i)}})}}}])}),define("artist_profile/directives/social/artist_fb_like_button",["module","angular_helper"],function(e,t){return t.createModule(arguments).directive("artistFbLikeButton",function(){return{restrict:"E",templateUrl:"artist_profile/directives/social/artist_fb_like_button.html"}})}),define("artist_profile/directives/social/artist_twitter_following_button",["module","angular_helper"],function(e,t){return t.createModule(arguments).directive("artistTwitterFollowingButton",function(){return{restrict:"E",templateUrl:"artist_profile/directives/social/artist_twitter_following_button.html"}})}),define("artist_dashboard/directives/key_stats",["module","angular_helper"],function(e,t){var n=function(e){return{restrict:"E",scope:{source:"=source",height:"=height"},templateUrl:"artist_dashboard/components/key_stats.html",link:function(t,n,r){t.onDashboard=r.source&&"dashboard"===r.source;var i=JSON.parse(r.artist).artist,o=(r.tracking,r.start),a=(n.find("#key_stats_graph_legend")[0],"#eeac35"),s="#4ec2e5",l=null,u=!1,c=parseInt(r.height)||130,d=function(){l=new Highcharts.Chart({chart:{renderTo:n.find("#key_stats_graph_container")[0],height:c},title:{text:""},xAxis:{endOnTick:!1,startOnTick:!1,gridLineColor:"#D8D8D8",gridLineDashStyle:"Solid",gridLineInterpolation:null,gridLineWidth:0,gridZIndex:1,tickInterval:12096e5,title:!1,type:"datetime"},yAxis:[{title:!1,min:0,endOnTick:!0,gridLineColor:"#D8D8D8",gridLineDashStyle:"Solid",gridLineInterpolation:null,gridLineWidth:1,gridZIndex:1,minorGridLineWidth:1,labels:{y:0,format:"{value}",style:{color:"#4ec2e5"}}},{title:!1,min:0,endOnTick:!0,gridLineColor:"#D8D8D8",gridLineDashStyle:"Solid",gridLineInterpolation:null,gridLineWidth:1,gridZIndex:1,minorGridLineWidth:1,labels:{y:0,format:"{value}",style:{color:"#eeac35"}},opposite:!0}],plotOptions:{columnrange:{dataLabels:{enabled:!0,style:{textShadow:!1}}},series:{shadow:!1,events:{mouseOver:function(){this.options=this.setOptions({marker:{enabled:!0,states:{hover:{fillColor:"#6bce1b"}}}}),this.redraw()},mouseOut:function(){this.options=this.setOptions({marker:{enabled:!1}}),_.each(this.points,function(e){e&&e.graphic&&e.graphic.hide()})}},marker:{enabled:!1,fillColor:"#ffffff",lineColor:null,lineWidth:2,radius:3,states:{hover:{enabled:!0,radius:3}},symbol:"circle"},pointInterval:864e5,pointStart:1e3*o}},tooltip:{formatter:function(){return"<strong>"+this.y+"</strong>"},positioner:function(e,t,n){var r=this.chart,i=r.plotLeft,o=i+r.plotWidth,a=r.plotTop,s=n.plotX+i-e/2,l=n.plotY-t;return i>s&&(s=i),s+e>o&&(s=o-e),a>l&&(l=n.plotY+t),{x:s,y:l}},backgroundColor:{linearGradient:[0,0,0,50],stops:[[0,"rgba(96, 96, 96, 1)"],[1,"rgba(16, 16, 16, 1)"]]},borderWidth:1,borderColor:"#000",style:{color:"#FFF"}},legend:{enabled:!1},exporting:{enabled:!1},credits:{enabled:!1},series:[]})},f=function(e,t,n){if(l){var r=0==e.indexOf("Plays")?1:0,i=l.yAxis[r],o=i.dataMax;i&&o&&(i.options.tickInterval=Math.ceil(o/4)),l.addSeries({yAxis:r,color:n,data:t,marker:{states:{hover:{fillColor:n}}},name:e})}else d(),f(e,t,n)},p=function(t,r,o,a){e.get(r,{id:i.id,page_object_type:i.get_type,id_unique:i.id_unique}).then(function(e){var r=e.data,i=o?o(r):r;_.compact(i).length>0&&(n.find("#key_stats_graph_wrap").show(),f(t,i,a),u=!0)})["catch"](function(){f(t,[],a)})["finally"](function(){u?n.find(".key_stats_empty_state").hide():n.find(".key_stats_empty_state").show(),n.find("#key_stats_content_wrap").removeClass("profile-admin__module--loading")})},g=function(e){return _.chain(e.data).reject(function(e){return moment(e.created_on).unix()<o}).map(function(e){return e.total_plays||0
}).value()},h=function(e){return _.chain(e.data).reject(function(e){return moment(e.created_on).unix()<o}).map(function(e){return e.total_hits||0}).value()};p("Plays","/control_room/artist/"+i.id+"/stats/api_daily_song_stats",g,a),p("Views","/control_room/artist/"+i.id+"/stats/api_traffic_stats",h,s)}}};return t.createModule(arguments).directive("keyStats",["$http",n])}),define("artist_dashboard/directives/modal_attributes",["module","angular_helper"],function(e,t){var n=function(){return{restrict:"A",scope:{modalAttributes:"="},link:function(e,t){e.modalAttributes.cta_data_display?"fb_connect"==e.modalAttributes.cta_data_display?(t.attr("href","#"),t.attr("data-social-connect","fb_connect"),t.attr("data-social-options",e.modalAttributes.url)):"twitter"==e.modalAttributes.cta_data_display?(t.attr("href","#"),t.attr("data-social-connect","twitter"),t.attr("data-social-options",e.modalAttributes.url)):"external"==e.modalAttributes.cta_data_display?(t.attr("href",e.modalAttributes.url),t.attr("target","_blank")):(t.attr("href","#"),t.attr("data-display",e.modalAttributes.cta_data_display),t.attr("data-url",e.modalAttributes.url)):t.attr("href",e.modalAttributes.url)}}};return t.createModule(arguments).directive("modalAttributes",[n])}),define("artist_dashboard/directives/chart_stats",["module","angular_helper"],function(e,t){var n=function(e){return{restrict:"E",templateUrl:"artist_dashboard/components/chart_stats.html",link:function(t){t.viewPort=e}}};return t.createModule(arguments).directive("chartStats",["Viewport",n])}),define("common/angular/services/viewport",["module","angular_helper"],function(e,t){var n=["small","smallplus","medium","large","xlarge","xxlarge"];return t.createModule(arguments).constant("ViewportBreakpoints",angular.copy(n)).provider("Viewport",function(){var e=null,t=function(t,r,i){e=r.$new();var o=function(){e.orientation=i.matchMedia("(orientation: portrait)").matches?"portrait":"landscape",e.breakpoint=Reverb.Foundation.current_breakpoint};angular.element(i).on("resize",_.throttle(function(){e.$evalAsync(o)},50)),Reverb.Event.bind("rn_foundation:breakpoint",angular.element("body"),function(t,n,r){e.$evalAsync(function(){e.breakpoint=r})}),o(),e.is=function(t){var r=n.indexOf(t),i=n.indexOf(e.breakpoint);return r>=0&&i>=r},e.query=function(r){var i=r.split("-"),o=i[0],a=i[1],s=n.indexOf(o);if(0>s)return t.warn("Viewport query size must be one of",n,"not",o),!1;var l=["up","only"];if(l.indexOf(a)<0)return t.warn("Viewport query quantifier must be one of",l,"not",a),!1;var u=n.indexOf(e.breakpoint);if(0>u)return t.error("Viewport breakpoint is invalid!",e.breakpoint),!1;switch(a){case"up":return u>=s;case"only":return u==s}return t.error("Viewport: this should be unreachable"),!1}};this.$get=["$log","$rootScope","$window",function(n,r,i){return e||t(n,r,i),e.$new()}]})}),define("artist_dashboard/directives/social_status",["module","angular_helper","common/angular/services/viewport"],function(e,t){var n=function(e,t){return{restrict:"E",templateUrl:"artist_dashboard/components/social_status.html",scope:{source:"=source"},link:function(e,n,r){e.viewPort=t;var i=angular.element("#sync_networks"),o=angular.element(".js-last-status"),a=angular.element(".js-last-status-time");e.source=r.source,e.$on("reverb:status:update",function(e,t,n){i.is(":visible")&&i.hide(),o.trigger("show",n)}),o.bind("show",function(e,t){o.removeClass("hidden"),a.removeClass("hidden"),angular.element("p",o).text(t.text),angular.element(".js-timestamp",o).html("on "+t.timestamp)}),0==i.length&&o.removeClass("hidden")}}};return t.createModule(arguments).directive("socialStatus",["$window","Viewport",n])}),define("artist_dashboard/directives/social_sync",["module","angular_helper"],function(e,t){var n=function(e,t){return{restrict:"A",scope:{updateSocialUrl:"=",getSocialUrl:"=",idUnique:"="},link:function(n){var r=angular.element("#sync_networks"),i=angular.element(".js-skip-action",r);i.click(function(r){r.preventDefault(),t.post(n.updateSocialUrl).then(function(){e.Reverb.Event.trigger("disable_social_cta"),angular.element(document).foundation("equalizer","reflow")})}),e.Reverb.Event.bind("socialsync:update",r,function(e,t){if(t.connected===!0){var n=t.network;"fb_"==n.slice(0,3)&&(n="facebook"),n=n.charAt(0).toUpperCase()+n.slice(1),r.find("[data-social-connect="+t.network+"]").replaceWith('<a class="button" href="javascript:;">'+n+" connected</a>"),0==r.find("[data-social-connect]").length&&(r.hide(),angular.element(".js-last-status").removeClass("hidden"))}}),e.Reverb.Event.bind("disable_social_cta",r,function(){r.hide(),angular.element(".js-last-status").removeClass("hidden")})}}};return t.createModule(arguments).directive("socialSync",["$window","$http",n])}),define("common/angular/services/task",["module","angular_helper","common/angular/api/models/page_objects"],function(e,t){var n=t.createModule(arguments);return n.factory("TaskService",["$window","$q","Config","$http","$log",function(e,t,n,r,i){var o,a={ids:[],timeout:null,later:null},s={ids:[],timeout:null,later:null},l="/api/artist/"+n.ARTIST.id+"/dashboard_tasks",u=null,c=function(){return angular.isUndefined(o)?d():t.when(o)},d=function(){return u||(u=r.get(l).then(function(e){return angular.isDefined(o)?angular.copy(e.data,o):o=e.data,o})["finally"](function(){u=null})),u},f=function(t,n,o){var u="impressions"===n?a:s;return u.ids.push(t),u.later||(u.later=function(){i.info("Task Event Sent - "+n+": "+u.ids),r.post(l+"/events",{task_ids:u.ids,event:n}),"impressions"===n?a={ids:[],timeout:null,later:null}:"clicks"===n&&(s={ids:[],timeout:null,later:null})}),function(){u.timeout?(e.clearTimeout(u.timeout),u.timeout=e.setTimeout(u.later,o)):u.timeout=e.setTimeout(u.later,o)}};return{getSections:c,refreshSections:d,recordEvent:f}}]),n}),define("common/angular/filters/capitalize",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.filter("capitalize",function(){return function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}})}),define("common/angular/filters/duration",["module","angular_helper"],function(e,t){return t.createModule(arguments).filter("duration",function(){return function(e){if(void 0===e||null===e)return"0:00";var t=e/1e3,n=Math.floor(t/60);return n+":"+("00"+(parseInt(t,10)-60*n)).slice(-2)}})}),define("common/angular/filters/mega_number",["module","angular_helper"],function(e,t){return t.createModule(arguments).filter("megaNumber",function(){return function(e,t){if(null===e)return null;if(0===e)return"0";(!t||0>t)&&(t=1);for(var n=Math.abs(e),r=Math.pow(10,t),i=0>e,o="",a=[{key:"Q",value:Math.pow(10,15)},{key:"T",value:Math.pow(10,12)},{key:"B",value:Math.pow(10,9)},{key:"M",value:Math.pow(10,6)},{key:"K",value:1e3}],s=0;s<a.length;s++){var l=n/a[s].value;if(l=Math.round(l*r)/r,l>=1){n=l,o=a[s].key;break}}return(i?"-":"")+n+o}})}),define("common/angular/filters/replace",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.filter("replace",function(){return function(e,t,n,r){return angular.isString(e)?e.replace(new RegExp(t,r||""),n||""):e}})}),define("common/filters",["angular"],function(){return angular.module("Common.Filters",[]).filter("truncate",function(){return function(e,t,n){return void 0===e||null===e?"":(isNaN(t)&&(t=10),void 0===n&&(n="..."),e.length<=t||e.length-n.length<=t?e:String(e).substring(0,t-n.length)+n)}}).filter("if",function(){return function(e,t,n){return e?t:n}}).filter("toArray",function(){return function(e){return e instanceof Object?_.map(e,function(e,t){return Object.defineProperty(e,"$key",{__proto__:null,value:t})}):e}}).filter("split",function(){return function(e,t){if(void 0===e)return!1;var t=t||",";return e.split(t)}}).filter("unsafe",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]).filter("percent",function(){return function(e,t){return Number.isNaN(e)?"0%":(t=angular.isNumber(t)?t:2,Math.round(e*Math.pow(10,t+2))/Math.pow(10,t)+"%")}}).filter("ordinal",function(){return function(e){var t=["th","st","nd","rd"],n=e%100;return e+=t[(n-20)%10]||t[n]||t[0]}}).filter("pagespeed",["$window",function(e){return function(t,n,r,i){if(!e.Reverb)return t;var o=e.Reverb.image.Quality.apply(t,i),a=e.Reverb.image.Blur.apply(o,10*parseInt(r,10));return e.Reverb.image.Resize.apply(a,n)}}]).filter("blur",["$window",function(e){return function(t,n){return e.Reverb?e.Reverb.image.Blur.apply(t,n):t}}]).filter("quality",["$window",function(e){return function(t,n){return e.Reverb?e.Reverb.image.Quality.apply(t,n):t}}]).filter("resize",["$window",function(e){return function(t,n){return e.Reverb?e.Reverb.image.Resize.apply(t,n):t}}]).filter("aspect",["$window",function(e){return function(t,n){return e.Reverb?e.Reverb.image.Aspect.apply(t,n):t}}]).filter("gray",["$window",function(e){return function(t,n){return e.Reverb?e.Reverb.image.Gray.apply(t,n):t}}]).filter("crop",["$window",function(e){return function(t,n){return e.Reverb?e.Reverb.image.Crop.apply(t,n):t}}]).filter("vendorTextFromUrl",function(){return function(e,t,n,r){t=t||"",n=n||"",r=r||"",e=e||"";var i;e=e.replace(/.*?:\/\//g,"");var o=/(?!:\/\/)^(?:www\.)?(amazon)\.(com|co\.uk)/,a=/^(?:geo\.)?(itunes)\.apple\.com/,s=/^[^. ]+\.bandcamp\.com/,l=/^(?:www\.)?(cdbaby)\.(?:com)/;return o.exec(e)?i="Amazon":a.exec(e)?i="iTunes":s.exec(e)?i="Bandcamp":l.exec(e)&&(i="CD Baby"),i?n+i+r:t}}).filter("svg",["$window","$sce","$log",function(e,t,n){return function(r){-1!==r.indexOf(".svg")&&(n.error("File Extension Error: "+r),r=r.split(".svg")[0]);var i=e.Reverb.staticCacheServer()+"/images/icons/svg/"+r+".svg";return t.trustAsResourceUrl(i)}}])}),define("common/angular/api/models/campaign",["module","angular_helper","common/angular/api/services/reverb_api"],function(e,t){return t.createModule(arguments).run(["ReverbApi",function(e){e.addElementTransformer("campaign",!1,function(e){return e})}]).factory("Campaigns",["ReverbApi",function(e){return e.service("campaign")}])}),define("opportunities/services/campaign_service",["module","angular_helper","common/angular/api/models/campaign"],function(e,t){var n=t.createModule(arguments);return n.factory("CampaignService",["$q","$log","Config","ReverbApi",function(e,t,n,r){var i,o,a,s,l,u,c=[],d=[],f=null,p=5,g=0,h=null,m=function(t){angular.equals(i,t)||(o=null,a=null,s=[],c=[],d=[]),i=angular.copy(t||{});var r=angular.extend({},n.CAMPAIGN_SEARCH_DEFAULT_PARAMS,v(),i);return angular.isUndefined(c)||!angular.equals(a,r)?(r.per_page<p&&(p=r.per_page),a=r,f=null,b()):e.when(c)},v=function(){return o?{page:o.page||1,per_page:o.per_page||20}:{page:1,per_page:20}},_=function(){return s&&o&&s.length<o.result_count},y=function(){return _()&&o.page?(o.page++,m(i)):e.when(c)},w=function(e,t,n){angular.forEach(e,function(e){e.tour_id?-1===n.indexOf(e.tour_id)&&(n.push(e.tour_id),t.push(e)):t.push(e)})},b=function(){return f||(f=r.all("campaign/search").post(angular.copy(a||{})).then(function(e){return s||(s=[]),g=g||angular.copy(c.length),e&&(s.push.apply(s,e.results||[]),e.pagination&&(o=e.pagination),w(e.results,c,d)),g+p<=c.length?c:y()})["finally"](function(){f=null})),f},S=function(){return angular.isUndefined(l)?C():e.when(l)},C=function(){if(!h){var e=angular.extend({tier:"1",page:1,per_page:100},n.CAMPAIGN_SEARCH_DEFAULT_PARAMS);l=[],u=[],h=r.all("campaign/search").post(e).then(function(e){return e.results?(w(e.results,l,u),l.pagination=e.pagination):l=e,l})["finally"](function(){h=null})}return h};return{hasMore:_,loadMore:y,getCampaigns:m,getTier1Campaigns:S}}]),n}),define("opportunities/filters/date_range",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.filter("dateRange",function(){return function(e){var t=Date.parse(e[0]),n=Date.parse(e[1])||t;if(t&&n){t=new Date(t),n=new Date(n),t=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()),n=new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds());var r=["January","February","March","April","May","June","July","August","September","October","November","December"],i=t.getDate()==n.getDate(),o=t.getMonth()==n.getMonth(),a=t.getFullYear()==n.getFullYear(),s=r[t.getMonth()]+" "+t.getDate()+(a?"":", "+t.getFullYear()),l=(o&&a?"":r[n.getMonth()])+(i&&o&&a?"":" "+n.getDate())+", "+n.getFullYear();return i&&o&&a?s+", "+t.getFullYear():s.trim()+"–"+l.trim()}return""}}),n}),define("promote_it/common/services/create_url",["module","angular_helper"],function(e,t){return t.createModule(arguments).service("PromoteItUrl",["$httpParamSerializer",function(e){this.create=function(t,n,r){return["","control_room",t,n,"promote_new_campaign"].join("/")+"?"+e(r)}}])}),define("artist_profile/services/artist_api",["module","angular_helper","common/angular/api/models/page_objects"],function(e,t){var n=t.createModule(arguments);return n.factory("ArtistAPI",["PageObjects","Config",function(e,t){return e.forType("artist").one(t.ARTIST.id)}]),n}),define("artist_profile/services/artist_service",["module","angular_helper","common/angular/api/services/reverb_api","artist_profile/services/artist_api"],function(e,t){var n=t.createModule(arguments);return n.factory("ArtistService",["$q","Config","ReverbApi","ArtistAPI",function(e,t,n,r){var i,o,a,s,l,u=null,c=null,d=function(){return angular.isUndefined(i)?f():e.when(i)},f=function(){return u||(u=r.get().then(function(e){return angular.isDefined(i)?angular.copy(e,i):i=e,i})["finally"](function(){u=null})),u},p=function(){return angular.isUndefined(o)?g():e.when(o)},g=function(){return c||(c=d().then(function(e){return e.getList("members").then(function(e){return angular.isDefined(o)?angular.copy(e.plain(),o):o=e.plain(),o})})["finally"](function(){c=null})),c},h=function(e){a=e},m=function(){return a},v=function(e){s=e},_=function(){return s},y=function(){return l};return angular.isObject(t.ARTIST)&&(i=angular.copy(t.ARTIST),n.restangularizeElement(null,i,"artist")),angular.isObject(t.ARTIST_EXTRA_DATA)&&(a=t.ARTIST_EXTRA_DATA.PROFILE_PHOTO_ID,s=t.ARTIST_EXTRA_DATA.PROFILE_COVER_PHOTO_ID,l=angular.copy(t.ARTIST_EXTRA_DATA.IS_PAID_SUBSCRIBER),angular.isArray(t.ARTIST_EXTRA_DATA.MEMBERS_LIST)&&(o=angular.copy(t.ARTIST_EXTRA_DATA.MEMBERS_LIST))),{getArtist:d,refreshArtist:f,getMembers:p,refreshMembers:g,setProfilePhotoId:h,getProfilePhotoId:m,setCoverPhotoId:v,getCoverPhotoId:_,isPaidSubscriber:y}}]),n}),define("artist_profile/controllers/components/artist",["module","angular_helper","artist_profile/services/artist_service"],function(e,t){var n=t.createModule(arguments),r=function(e,t,n,r){var i=this;this.getProfilePhotoId=n.getProfilePhotoId,this.adminControls=r,n.getArtist().then(function(e){i.artist=e})};return n.controller("ArtistCtrl",["$scope","Config","ArtistService","AdminControlsService",r]),n}),define("artist_profile/controllers/components/color",["module","angular_helper"],function(e,t){var n=t.createModule(arguments),r=function(e,t,n){this.palette=n};return n.controller("ColorCtrl",["$scope","Config","ArtistColorPalette",r]),n}),define("artist_profile/controllers/components/download",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.controller("DownloadCtrl",["$window","Config",function(e){this.getSong=function(t,n){e.modal_open("/audio_player/download_song/"+t+"?modal=true"),n&&(n.preventDefault(),n.stopPropagation())},this.buyExternal=function(t,n){n&&(n.preventDefault(),n.stopPropagation());var r=e.open(t,"_blank");r.location}}]),n}),define("artist_profile/controllers/components/favorite_artists",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.controller("FavoriteArtistsCtrl",["Config","ArtistService","FanAndFavorites",function(e,t,n){var r=this;t.getArtist().then(function(e){r.artist=e}),n.getFavorites("Artist",{page:1,per_page:3}).then(function(e){r.favoriteArtists=e})}]),n}),define("artist_profile/services/sidebar_data",["module","angular_helper","artist_profile/services/artist_api"],function(e,t){var n=t.createModule(arguments);return n.factory("SidebarData",["$q","ArtistAPI",function(e,t){var n,r,i=function(){return angular.isUndefined(n)?o():e.when(n)},o=function(){return r||(r=t.one("sidebar").get().then(function(e){return angular.isDefined(n)?angular.copy(e,n):n=e,n})["finally"](function(){r=null})),r};return{get:i,refresh:o}}]),n}),define("artist_profile/controllers/components/influences",["module","angular_helper","artist_profile/services/sidebar_data"],function(e,t){var n=t.createModule(arguments);return n.controller("InfluencesCtrl",["SidebarData",function(e){var t=this;e.get().then(function(e){t.influencedBy=e.ARTIST_INFLUENCED_BY})}]),n}),define("artist_profile/services/layout",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("Layout",["$q","Config","ArtistShows","ArtistVideos","AdminControlsService",function(e,t,n,r,i){var o,a=[],s=[],l=null,u=null,c=_.map(t.SECTIONS,angular.lowercase),d=angular.copy(t.PRIMARY_SECTION),f=function(e){return-1!==c.indexOf(angular.lowercase(e))},p=function(e,t){var n=["music","community"],r=["shows","videos"],a=function(e,t){var n=e.indexOf(t);-1!=n&&(e[n]=null)};"videos"==d&&r.reverse(),_.each(r,function(e){f(e)||a(r,e)}),i.userCanMaintain||(0==e.length&&a(r,"shows"),0==t.length&&a(r,"videos"));var s=_.map(_.zip(n,r),function(e){return _.compact(e)});angular.isUndefined(o)?o=s:angular.copy(s,o)},g=function(t){if(t&&o&&o.length)return e.when(o);f("shows")?l||(l=n.getShows("upcoming","public",{page:1,per_page:10})):l=e.when([]),f("videos")?u||(u=r.getVideos({page:1,per_page:10})):u=e.when([]);var i=[],a=[];return e.all([l,u]).then(function(e){return i=e[0],a=e[1],!i||i.length<1?n.getShows("past","public",{page:1,per_page:10}):(p(i,a),o)}).then(function(e){return p(e,a),o})["finally"](function(){l=null,u=null})},h=function(e){var t=[];t=_.map(e,function(e){return _.map(e,function(e){return"artist_profile/modules/"+e+"_overview_module.html"})}),angular.copy(t[0],a),angular.copy(t[1],s)},m=function(){return g().then(function(t){return h(t),e.when({top:a,bottom:s})})},v=function(e,t){return g(t).then(function(t){var n=!1;return _.each(t,function(t){_.indexOf(t,e)>-1&&1===t.length&&(n=!0)}),n})};return{getOverviewSections:g,getTemplates:m,isEnabled:f,isFullWidthOverviewSection:v}}]),n}),define("artist_profile/controllers/components/layout",["module","angular_helper","artist_profile/services/layout"],function(e,t){var n=t.createModule(arguments);return n.controller("LayoutCtrl",["Layout","AdminControlsService",function(e,t){this.isEnabled=e.isEnabled,this.adminControls=t}]),n}),define("common/angular/api/models/shows",["module","angular_helper","common/angular/api/services/reverb_api"],function(e,t){return t.createModule(arguments).run(["ReverbApi","$filter",function(e,t){e.extendModel("shows",function(e){return e.unique_id=function(){return"show_bill_"+e.id},e.thisYear=function(){return date=new Date,-1==e.showtime.indexOf(date.getFullYear().toString())},e.displayName=function(n){var r=[],i=!1;if(n&&(i="venue"==n.type),i){var o="Show";if(e.lineup){var a=e.lineup,s=a.filter(function(e){return e.headliner}),l=s.pluck("name").shift()||a.pluck("name").shift();l&&(o=l,a.length>1&&(o=o+" +"+(a.length-1)))}r.push(o)}else e.venue_name&&r.push(e.venue_name);if(e.showtime){var u=new Date(e.showtime);r.push(t("date")(u,"M/d/yyyy"))}return r.join(" on ")},e})}]).factory("Shows",["ReverbApi",function(e){return e.service("shows")}])}),define("artist_profile/services/artist_show_service",["module","angular_helper","artist_profile/services/artist_api","common/angular/api/models/shows"],function(e,t){var n=t.createModule(arguments);return n.factory("ArtistShows",["$q","Config","ArtistAPI","ReverbApi",function(e,t,n,r){var i="upcoming",o={upcoming:{"public":{shows:void 0,promise:null},all:{shows:void 0,promise:null}},past:{"public":{shows:void 0,promise:null},all:{shows:void 0,promise:null}}},a={},s={},l={page:1,per_page:10},u=function(e,t){return o[e][t].shows},c=function(e,t,n){o[e][t].shows=n},d=function(e,t){return o[e][t].promise},f=function(e,t,n){o[e][t].promise=n},p=function(e,t,r){if(r=r||l,!d(e,t)){var i={};"past"===e&&(i.past=!0),"all"===t&&(i.show_private=!0),f(e,t,n.all("shows").getList(angular.extend({},r,i)).then(function(n){return c(e,t,n),u(e,t)})["finally"](function(){f(e,t,null)}))}return d(e,t)},g=function(e){i=e},h=function(){return e.when(i)},m=function(t,n,r){t=t||"upcoming",n=n||"all",r=r||l;var i=u(t,n);return angular.isUndefined(i)||r.page!=i.pagination.page?p(t,n,r):e.when(o[t][n].shows)},v=function(t,n){t=t||"all",n=n||l;var r="past",i=null,a=u(r,t);return i=angular.isUndefined(a)||n.page!=a.pagination.page?p(r,t,n):e.when(o[r][t].shows),e(function(e,t){return null===i?void t("Profile Recent Shows Unavailable"):void i.then(function(t){e(_.filter(t,function(e){var t=new Date;return t=t.setDate(t.getDate()-60),new Date(e.showtime)>=t}))})["catch"](function(){t([])})})},y=function(e){return _.chain(e).omit(function(e){return!e}).pairs().map(function(e){return e.join(":")}).value().join(",")},w=function(t,n){var r=y(t);return n=n||l,angular.isUndefined(a[r])||n.page!=a[r].pagination.page?S(t,n):e.when(a[r])},b=function(e,t){var n=_.omit({country:e.country,state:e.state,city:e.city,postal_code:e.postal_code,latitude:e.latitude,longitude:e.longitude,from_date:new Date},function(e){return!e});return r.one("show").one("search").get(angular.extend({},t,n)).then(function(n){var r=n.results;if(r.pagination=n.pagination,!r.length){if(e.latitude&&e.longitude)return b(_.omit(e,"latitude","longitude"),t);if(e.postal_code)return b(_.omit(e,"postal_code"),t);if(e.city)return b(_.omit(e,"city"),t);if(e.state)return b(_.omit(e,"state"),t);if(e.country)return b(_.omit(e,"country"),t)}return r})},S=function(e,t){var n=y(e);return t=t||l,s[n]||(s[n]=b(e,t).then(function(e){return a[n]=e,e})["finally"](function(){delete s[n]})),s[n]},C=function(e,t,n){if(void 0===n)c(e,t,void 0);else{var i=n.results;i.pagination=n.pagination,c(e,t,i),r.restangularizeCollection(null,u(e,t),"shows",{showPrivate:!0})}};return C("upcoming","all",t.ALL_UPCOMING_SHOWS_WITH_PAGINATION),C("upcoming","public",t.PUBLIC_UPCOMING_SHOWS_WITH_PAGINATION),C("past","all",t.ALL_PAST_SHOWS_WITH_PAGINATION),C("past","public",t.PUBLIC_PAST_SHOWS_WITH_PAGINATION),{setVisiblePage:g,getVisiblePage:h,getShows:m,refreshShows:p,getRecentPastShows:v,getLocalShows:w,refreshLocalShows:S}}]),n}),define("artist_profile/controllers/components/local_shows",["module","angular_helper","artist_profile/services/artist_show_service"],function(e,t){var n=t.createModule(arguments);return n.controller("LocalShowsCtrl",["Location","ArtistShows",function(e,t){var n=this;t.getLocalShows(e).then(function(e){n.shows=e})}]),n}),define("artist_profile/controllers/components/members",["module","angular_helper","artist_profile/services/artist_service"],function(e,t){var n=t.createModule(arguments);return n.controller("MembersCtrl",["ArtistService",function(e){var t=this;e.getMembers().then(function(e){t.members=e})}]),n}),define("artist_profile/controllers/components/music_stats",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.controller("MusicStatsCtrl",["$q","MusicService","MusicStatsService",function(e,t,n){var r=this;e.all([t.getAlbums(),t.getTracks()]).then(function(){r.musicStats=n.getMusicStats()})}]),n}),define("artist_profile/controllers/components/video_stats",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.controller("VideoStatsCtrl",["ArtistVideos","ArtistStats","VideoStatsService",function(e,t,n){var r=this;r.totalVideos=n.getVideoStats().totalVideos,t.getStats().then(function(e){e&&e.videos&&e.videos.value>0&&(r.totalViews=e.videos.value)})}]),n}),define("common/angular/services/parse_url",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("ParseURL",["$document",function(e){var t=e[0].createElement("a");return function(e){if(angular.isString(e)){var n=e.split("#!");return 1!=n.length&&(e=n[1]),t.href=e,{protocol:(t.protocol||"").split(":")[0],hostname:t.hostname,port:t.port,host:t.host,pathname:"/"==t.pathname[0]?t.pathname:"/"+t.pathname,search:t.search,hash:t.hash}}throw new Error("Invalid URL: "+e)}}]),n}),define("artist_profile/services/navigation_service",["module","angular_helper","common/angular/services/parse_url"],function(e,t){var n=t.createModule(arguments);return n.factory("NavigationService",["$window","$log","$rootScope","$location","Config","ParseURL",function(e,t,n,r,i,o){function a(e,t){var n=[];return t&&(n.push("/"+i.ARTIST.homepage+"/"+e),n.push("/"+i.ARTIST.id+"/"+e)),n.push("/artist/artist_"+e+"/"+i.ARTIST.homepage),n.push("/artist/artist_"+e+"/"+i.ARTIST.id),n}function s(e,n){e=angular.lowercase(e),-1!=c.indexOf(e)?l!==e&&(l=e,n&&(u.Event.trigger("history:skip_navigation",f[l][0]),u.Event.trigger("artist_profile:tab_navigation"),u.History.navigate_to(f[l][0]))):t.error("Invalid tab:",e)}var l,u=e.Reverb,c=angular.copy(i.TABS),d=_.chain(c).map(function(e){var t;switch(e){case"overview":t=["/"+i.ARTIST.homepage,"/"+i.ARTIST.id];break;case"music":t=a("songs",!0);break;case"videos":t=a("videos",!0);break;case"shows":t=a("shows",!0);break;default:t=a(e,!1)}return(i.TAB||c[0])===e&&t.push(o(r.url()).pathname),_.chain(t).uniq().map(function(t){return[t,e]}).value()}).flatten(!0).object().value(),f=_.chain(d).pairs().groupBy(_.last).mapObject(_.first).value();return n.$on("$globalLocationChangeStart",function(e,n){var r=o(n).pathname,i=d[r];i&&l!==i?(u.Event.trigger("history:skip_navigation",n.substr(n.indexOf(r))),t.debug("Updating active tab: "+l+" => "+i),s(i,!1)):i||t.debug("Not updating active tab for new URL:",n)}),s(i.TAB||c[0],!1),{getTabs:function(){return c},getActiveTab:function(){return l},setActiveTab:function(e){s(e,!0)},getCanonicalURL:function(e){var t=o(r.absUrl());return t.protocol+"://"+t.host+f[e||l][0]}}}]),n}),define("common/angular/services/player_core_adapter",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.service("PlayerCoreAdapter",["$rootScope","$q","$window",function(e,t,n){function r(e){s?s[e].apply(s,u.call(arguments,1)):a=a.then(function(){s[e].apply(s,u.call(arguments,1))})}var i=this,o=t.defer(),a=o.promise,s=null,l=!0;n.Reverb.playerReady(function(){s=PlayerCore.getInstance(),o.resolve()});var u=[].slice;this.playSongNow=function(e,t,r){n.playSongNow(e,t,r)},this.buffered=0,this.played=0,this.position=0,this.duration=0,this.getCurrentSong=function(){return s?s.getCurrentSong():null},this.isPlaying=function(){return s&&s.isPlaying()},this.play=function(){r("play")},this.pause=function(){r("pause")},this.previous=function(){r("previous")},this.next=function(){r("next")},this.setPosition=function(e){r("setPosition",e)},this.enablePlayerCoreEventListeners=function(){l=!0},this.disablePlayerCoreEventListeners=function(){l=!1},this.getPlayer=function(){return o.promise.then(function(){return s._Player})};var c=function(){l&&e.$evalAsync(angular.noop)},d=function(t,n){l&&e.$evalAsync(function(){i.buffered=n})},f=function(t,n,r,o){l&&e.$evalAsync(function(){i.played=n,i.position=r,i.duration=o})},p=function(){l&&e.$evalAsync(angular.noop)};a=a.then(function(){s.bind({"player_core:song_changed":c,"player_core:update_max_progress":d,"player_core:song_progress":f,"player_core:playlist_reset":p}),e.$on("$destroy",function(){s.unbind({"player_core:song_changed":c,"player_core:update_max_progress":d,"player_core:song_progress":f,"player_core:playlist_reset":p})})})}]),n}),define("artist_profile/controllers/overview",["module","angular_helper","common/angular/services/player_core_adapter"],function(e,t){var n=t.createModule(arguments);return n.controller("OverviewCtrl",["$scope","$log","$q","Config","Layout","ArtistService","ArtistShows","ArtistVideos","MusicService","NavigationService","ArtistPhotos","ArtistCommunity","ArtistStats","$interval","AdminControlsService","PlayerCoreAdapter",function(e,t,n,r,i,o,a,s,l,u,c,d,f,p,g){var h=this;this.currentUserPageObjectId=r.CURRENT_USER_PAGE_OBJECT_ID,this.defaultArtistImgUrl=r.STATIC_CACHE_SERVER+"/images/v3/standard_resources/default_images/artist_big_thumb.png",this.defaultFanImgUrl=r.STATIC_CACHE_SERVER+"/images/v3/standard_resources/default_images/fan_mid2_thumb.png",this.defaultEmptyImgUrl=r.STATIC_CACHE_SERVER+"/images/v3/standard_resources/default_images/empty_photo.jpg",this.adminControls=g,e.redirectToPastShows=function(){u.setActiveTab("shows"),a.setVisiblePage("past")},e.getShowHeader=function(){return h.shows&&h.shows.length>2?"Upcoming Shows":h.shows&&h.shows.length>0?"Next Show":"Past Performances"},e.showRecentPastShows=function(){return!h.adminControls.userCanMaintain&&h.pastShows&&h.pastShows.length>0&&(!h.shows||h.shows.length<1)},e.displayShowsModule=function(){return h.shows&&h.shows.length>0||!h.adminControls.userCanMaintain&&h.pastShows.length},h.hasPlayableSongs=function(){return _.find(h.songs,function(e){return e.isStreamingEnabled()===!0})},h.isPaidSubscriber=o.isPaidSubscriber();var m="artist_profile/modules/dynamic_template.html";this.templates={top:[m,m],bottom:[m,m]},i.getTemplates().then(function(e){h.templates=e}),o.getArtist().then(function(e){h.artist=e}),l.getFeaturedSongs().then(function(e){h.songs=e}),i.isEnabled("shows")&&a.getShows("upcoming","public",{page:1,per_page:10}).then(function(e){return h.shows=e,e.length<1?a.getShows("past","public",{page:1,per_page:10}):void 0}).then(function(e){void 0!==e&&(h.pastShows=e)}),f.getStats().then(function(e){h.stats=e,h.totalFans=parseInt(e.fans.value,10)}),i.isFullWidthOverviewSection("community",!0).then(function(e){h.fullWidthCommunity=e}),e.$watch(function(){return h.adminControls.userCanMaintain},function(e,t){e!==t&&i.isFullWidthOverviewSection("community",!0).then(function(e){h.fullWidthCommunity=e})}),d.getPress().then(function(e){h.press=e}),c.getPhotos().then(function(e){h.photos=e}),i.isEnabled("videos")&&s.getVideos().then(function(e){h.videos=e}),n.all([d.getFans(),d.getComments(),d.getStatus()]).then(function(e){h.fans=e[0],h.comments=e[1],h.status=e[2]}),h.showCommunityEmptyState=function(){return h.adminControls.userCanMaintain&&(!h.fans||h.fans.length<1)&&(!h.comments||h.comments.length<1)&&(!h.status||!h.status.text)},n.all([l.getFeaturedSongs(),c.getPhotos(),s.getVideos(),a.getShows("upcoming","public",{page:1,per_page:10})]).then(function(e){h.isEmpty=function(){return h.videos=h.videos||e[2],h.shows=h.shows||e[3],h.adminControls.userCanMaintain&&!h.songs.length&&!h.shows.length&&!h.videos.length&&!h.photos.length&&h.showCommunityEmptyState()}})}]),n}),define("artist_profile/services/paginated_list_factory",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("PaginatedListFactory",["$q",function(e){function t(e,t){return _.find(e.$list,_.matcher({id:t}))}function n(e,t){return _.findIndex(e.$list,_.matcher({id:t}))}function r(e){return function(){throw new Error(e+" has not been implemented.")}}function i(e,t){this.$list=[],this.$initialized=!1,this.$loadingPromise=null,this.$refreshCallbacks=[],this.$refreshItemCallbacks=[],this.$loadListFunction=r("loadListFunction"),this.$loadItemFunction=r("loadItemFunction"),angular.isFunction(e)&&(this.$loadListFunction=e),angular.isFunction(t)&&(this.$loadItemFunction=t)}function o(t,n){return function(r,i){function o(e,r){t.getList(angular.extend({},n,{page:e,per_page:r})).then(function(t){a.push.apply(a,t),e<t.pagination.page_count?(s.notify(t),o(e+1,r)):s.resolve(a)})}var a=[],s=e.defer();return o(r||1,i||25),s.promise}}return i.prototype.initialize=function(t){if(this.$initialized=!0,angular.isObject(t)&&angular.isArray(t.results)){if(angular.copy(t.results,this.$list),t.pagination.page<t.pagination.page_count){var n=this;this.$loadingPromise=e.when(this.$loadListFunction(t.pagination.page+1,t.pagination.per_page)).then(function(e){var t={};
return angular.forEach(n.$list,function(e,n){t[e.id]=n}),angular.forEach(e,function(e){var r=t[e.id];angular.isUndefined(r)&&n.$list.push(e)}),n.$list},null,function(e){return n.$list.push.apply(n.$list,e),e})["finally"](function(){n.$loadingPromise=null}),angular.forEach(this.$refreshCallbacks,function(e){n.$loadingPromise["finally"](e[0],e[1])})}}else angular.isArray(t)&&angular.copy(t,this.$list)},i.prototype.addRefreshCallbacks=function(e,t){var n=this,r=[e,t];return this.$refreshCallbacks.push(r),this.$loadingPromise&&this.$loadingPromise["finally"](r[0],r[1]),function(){var e=n.$refreshCallbacks.indexOf(r);-1!==e&&n.$refreshCallbacks.splice(e,1)}},i.prototype.addRefreshItemCallbacks=function(e,t){var n=this,r=[e,t];return this.$refreshItemCallbacks.push(r),function(){var e=n.$refreshItemCallbacks.indexOf(r);-1!==e&&n.$refreshItemCallbacks.splice(e,1)}},i.prototype.getPartialList=function(){if(!this.$initialized){var t=this,n=e.defer();return this.refresh()["finally"](function(){n.resolve(t.$list)},function(){n.resolve(t.$list)}),n.promise}return e.when(this.$list)},i.prototype.getList=function(){return this.$initialized&&!this.$loadingPromise?e.when(this.$list):this.refresh()},i.prototype.getItem=function(n){var r=this;return this.getList().then(function(){var i=t(r,n);if(i)return i;if(r.$loadingPromise){var o=e.defer();return r.$loadingPromise["finally"](function(){i||(i=t(r,n),i?o.resolve(i):o.reject("Item not found!"))},function(){i||(i=t(r,n),i&&o.resolve(i))}),o.promise}return e.reject("Item not found!")})},i.prototype.refresh=function(){if(this.$loadingPromise)return this.$loadingPromise;var t=this;return this.$loadingPromise=e.when(this.$loadListFunction()).then(function(e){return t.initialize(e),t.$list},null,function(e){if(t.$initialized){var n={};angular.forEach(t.$list,function(e,t){n[e.id]=t}),angular.forEach(e,function(e){var r=n[e.id];angular.isUndefined(r)?t.$list.push(e):angular.copy(e,t.$list[r])})}else t.initialize(e);return e})["finally"](function(){t.$loadingPromise=null}),angular.forEach(this.$refreshCallbacks,function(e){t.$loadingPromise["finally"](e[0],e[1])}),this.$loadingPromise},i.prototype.refreshItem=function(t,r){var i=this,o=e.when(this.$loadItemFunction(t,r)).then(function(e){function r(){var r=n(i,t);return e?-1===r?i.$list.splice(0,0,e):angular.copy(e,i.$list[r]):i.$list.splice(r,1),e}return i.$loadingPromise?(r(),i.$loadingPromise.then(r,r)):r()},function(r){function o(){var e=n(i,t);-1!==e&&i.$list.splice(e,1)}return 404!==r.status?e.reject(r):i.$loadingPromise?i.$loadingPromise.then(o,o):o()});return angular.forEach(this.$refreshItemCallbacks,function(e){o["finally"](e[0],e[1])}),o},{createList:function(e,t){return new i(e,t)},createLoadListFunctionFromRestangularObjectWithParameters:o,createLoadListFunctionFromRestangularObject:function(e){return o(e,{})}}}]),n}),define("common/angular/api/models/albums",["module","angular_helper","common/angular/api/services/reverb_api"],function(e,t){return t.createModule(arguments).run(["ReverbApi",function(e){e.extendCollection("albums",function(e){return e.alpha_sort_params=function(e){return{albums_by_title:!0,albums_order:e?"desc":"asc"}},e}),e.extendModel("albums",function(t){return t.displayName=function(){return t.album_title},t.songs&&e.restangularizeCollection(null,t.songs,"songs"),t})}]).factory("Albums",["ReverbApi",function(e){return e.service("albums")}])}),define("common/angular/api/models/songs",["module","angular_helper","common/angular/api/services/reverb_api"],function(e,t){return t.createModule(arguments).run(["ReverbApi",function(e){function t(e){return e.isDownloadable=function(){return e.access.indexOf("download")>-1},e.isStreamingEnabled=function(){return-1==e.access.indexOf("download_only")&&1!=e.streaming_restricted},e.isDownloadOnly=function(){return e.access.indexOf("download_only")>-1},e}e.addElementTransformer("songs",!1,function(e){return e.addRestangularMethod("getWaveform","get","waveform"),e}),e.extendModel("songs",t),e.extendModel("song",t)}]).factory("Songs",["ReverbApi",function(e){return e.service("songs")}])}),define("artist_profile/services/music_service",["module","angular_helper","artist_profile/services/paginated_list_factory","artist_profile/services/artist_api","common/angular/api/models/albums","common/angular/api/models/songs"],function(e,t){var n=t.createModule(arguments);return n.factory("MusicService",["$q","Config","PaginatedListFactory","ArtistAPI","Songs","ReverbApi","MusicStatsService",function(e,t,n,r,i,o,a){function s(){return b.refresh()}function l(e,t){return b.refreshItem(e,t).then(function(t){return angular.forEach(C,function(n,r){n.id===e&&(t?angular.copy(t,n):C.splice(r,1))}),S.getList().then(function(n){angular.forEach(n,function(n){var r=_.findIndex(n.songs,_.matcher({id:e}));-1!==r&&(t?angular.copy(t,n.songs[r]):n.songs.splice(r,1))})})["finally"](y),t})}function u(){return b.getPartialList()}function c(e){return b.getItem(e)}function d(){return S.refresh()}function f(){return e(function(e,t){S.getPartialList().then(function(t){e(_.filter(t,function(e){return 0!==e.songs.length}))})["catch"](function(e){t(e)})})}function p(){return e.when(A)}function g(){angular.forEach(_.difference(_.map(C,"id"),_.map(b.$list,"id")),function(e){angular.forEach(C,function(t,n){t.id===e&&C.splice(n,1)})})}function h(e){return angular.forEach(e||b.$list,function(e){angular.forEach(C,function(t){t.id===e.id&&angular.copy(e,t)})}),e}function m(){return e.when($)}function v(e){for(var t=angular.copy(e),n=t.length-1;n>=0;n--){var r=t[n];(angular.isDefined(r.reason_hidden)||"private"===r.access||"rpk_only"===r.access||"streaming_only"===r.access&&1==r.streaming_restricted)&&t.splice(n,1)}return t}function y(){b.$list=v(b.$list),$.splice(0,$.length),$.push.apply($,b.$list);for(var e=S.$list.length-1;e>=0;e--)0===(S.$list[e].songs||[]).length&&S.$list.splice(e,1);for(var t=0;t<S.$list.length;t++)S.$list[t].songs=v(S.$list[t].songs);return A.splice(0,A.length),A.push.apply(A,_.uniq(C.concat(b.$list),"id").slice(0,w)),a.setMusicStats(b.$list.length,S.$list.length),arguments[0]}var w=5,b=n.createList(n.createLoadListFunctionFromRestangularObjectWithParameters(r.all("songs"),{extra_fields:"stats"}),function(e,t){if(angular.isObject(t)){var n=angular.copy(t);return o.restangularizeElement(null,n,"songs",!0),n}return null===t?null:i.one(e).get({extra_fields:"stats"})}),S=n.createList(n.createLoadListFunctionFromRestangularObjectWithParameters(r.all("albums"),{with_songs:!0,song_stats:!0})),C=[],A=[],$=[];if(b.addRefreshCallbacks(h,h),b.addRefreshCallbacks(g),b.addRefreshCallbacks(y,y),b.addRefreshItemCallbacks(y),S.addRefreshCallbacks(y,y),angular.isObject(t.SONGS_WITH_PAGINATION)){var P=angular.copy(t.SONGS_WITH_PAGINATION);o.restangularizeCollection(null,P.results,"songs"),b.initialize(P)}if(angular.isObject(t.ALBUMS_WITH_PAGINATION)&&angular.isObject(t.ALBUM_SONGS)){var M=angular.copy(t.ALBUMS_WITH_PAGINATION);o.restangularizeCollection(null,M.results,"songs"),angular.forEach(M.results,function(e){e.songs=angular.copy(t.ALBUM_SONGS[e.id])||[],o.restangularizeElement(null,e,"albums",!0,null,{with_songs:!0})}),S.initialize(M)}return angular.isArray(t.FEATURED_SONGS)&&(angular.copy(t.FEATURED_SONGS,C),o.restangularizeCollection(null,C,"songs")),y(),{getSongs:u,refreshSongs:s,getFeaturedSongs:p,getSong:c,refreshSong:l,getAlbums:f,refreshAlbums:d,getTracks:m}}]),n}),define("artist_profile/services/featured_content",["module","angular_helper","common/angular/services/parse_url"],function(e,t){var n=t.createModule(arguments);return n.factory("FeaturedContent",["$location","Config","ParseURL",function(e,t,n){var r={},i="",o="",a=angular.copy(t.PRIMARY_SONG),s=angular.copy(t.PRIMARY_VIDEO);return r.isPrimarySongUrl=function(){return!!a&&!!i&&i===e.path()},r.setPrimarySongUrl=function(){t.PRIMARY_SONG_URL&&(i=n(t.PRIMARY_SONG_URL).pathname)},r.getPrimarySong=function(){return a},r.isPrimaryVideoUrl=function(){return!!s&&!!o&&o===e.path()},r.setPrimaryVideoUrl=function(){t.PRIMARY_VIDEO_URL&&(o=n(t.PRIMARY_VIDEO_URL).pathname)},r.getPrimaryVideo=function(){return s},r}]),n}),define("artist_profile/controllers/music",["module","angular_helper","artist_profile/services/artist_service","artist_profile/services/music_service","artist_profile/services/featured_content"],function(e,t){var n=t.createModule(arguments);return n.run(["FeaturedContent",function(e){e.setPrimarySongUrl()}]),n.controller("MusicCtrl",["$scope","$location","$q","Config","ArtistService","MusicService","ReverbApi","FeaturedContent","AdminControlsService",function(e,t,n,r,i,o,a,s,l){var u=this;this.adminControls=l,this.albumView="list",this.albumImageErrorUrl=function(e){return r.STATIC_CACHE_SERVER+"/images/v3/standard_resources/default_images/album_"+e+".jpg"},u.isPaidSubscriber=i.isPaidSubscriber(),i.getArtist().then(function(e){u.artist=e});var c=s.getPrimarySong();if(c&&a.restangularizeElement(null,c,"songs"),this.hasFeaturedSong=function(){return s.isPrimarySongUrl()},this.isFeaturedSongPlaying=function(e){return u.hasFeaturedSong()&&c.id==e},this.toggleAlbumView=function(e){u.albumView=e},this.hasSongs=function(){return u.songs&&u.songs.length||u.albums&&u.albums.length||u.hasFeaturedSong()},o.refreshAlbums().then(function(){return n.all([o.getAlbums(),o.getTracks()])}).then(function(e){e&&(u.albums=e[0],u.songs=e[1],u.albums.length>1&&u.songs.length&&(u.albumView="grid"))}),this.hasFeaturedSong()&&!PlayerCore.Browser.isMobile)try{Reverb.playerReady(function(){PlayerCore.getInstance().isPlaying()||playSongNow(s.getPrimarySong().id)})}catch(d){}this.showEmptyState=function(){return u.adminControls.userCanMaintain&&(!u.albums&&!u.songs||!u.albums.length&&!u.songs.length)}}]),n}),define("artist_profile/controllers/shows",["module","angular_helper","common/angular/services/viewport"],function(e,t){var n=t.createModule(arguments),r=function(e,t,n,r,i,o,a,s,l,u){var c=this;c.upcomingShows=null,c.pastShows=null,c.showForMap=null,c.viewPort=l,c.adminControls=u,c.maxUpcomingShowsWithMap=3,s.getArtist().then(function(e){c.artist=e}),c.setVisiblePage=function(e){c.visiblePage=e,"upcoming"==e?c.visibleObject=c.upcomingShows:"past"==e&&(c.visibleObject=c.pastShows)},c.needsPagination=function(){return c.objectsAvailable()&&c.getTotalObjects()>c.visibleObject.pagination.per_page},c.objectsAvailable=function(){return c.visibleObject.length>0&&c.visibleObject.pagination&&c.visibleObject.pagination.result_count},c.getTotalObjects=function(){return c.visibleObject.pagination.result_count},c.setPage=function(e){var t={page:e,per_page:c.visibleObject.pagination.per_page||25},n=null;c.visibleObject===c.upcomingShows?(c.showPaginationSpinner=!0,n=a.getShows("upcoming","all",t).then(function(e){c.showPaginationSpinner=!1,c.upcomingShows=e,c.visibleObject=c.upcomingShows})):c.visibleObject===c.pastShows&&(c.showPaginationSpinner=!0,n=a.getShows("past","all",t).then(function(e){c.showPaginationSpinner=!1,c.pastShows=e,c.visibleObject=c.pastShows})),n&&n.then(function(){i.yOffset=100,i("shows_list_anchor")})},c.firstItemFromPage=function(){return(c.visibleObject.pagination.page-1)*c.visibleObject.pagination.per_page+1},c.lastItemFromPage=function(){var e=c.visibleObject.pagination.page*c.visibleObject.pagination.per_page;return e>c.visibleObject.pagination.result_count&&(e=c.visibleObject.pagination.result_count),e},c.populateUpcomingVenues=function(e){c.upcomingVenues=_.chain(e).map(function(e){return{venueId:e.venue_id,venueName:e.venue_name}}).filter("venueId").uniq("venueId").first(3).value()},c.isPaidSubscriber=s.isPaidSubscriber(),n.all([a.getShows("upcoming","all",{page:1,per_page:10}),a.getShows("past","all",{page:1,per_page:10}),a.getVisiblePage()]).then(function(e){var t=e[0],n=e[1],r=e[2];switch(c.upcomingShows=t,c.populateUpcomingVenues(t),c.pastShows=n,c.showForMap=_.find(c.upcomingShows,function(e){return!e["private"]}),c.setVisiblePage(r),r){case"past":c.visibleObject=c.pastShows;break;default:c.visibleObject=c.upcomingShows}}),c.showEmptyState=function(){return c.adminControls.userCanMaintain&&c.visibleObject&&!c.visibleObject.length}};return n.controller("ShowsCtrl",["$scope","$log","$q","$location","$anchorScroll","Config","ArtistShows","ArtistService","Viewport","AdminControlsService",r]),n}),define("artist_profile/controllers/videos",["module","angular_helper","artist_profile/services/featured_content","common/angular/components/pagination","common/angular/services/viewport"],function(e,t){var n=t.createModule(arguments);n.run(["FeaturedContent",function(e){e.setPrimaryVideoUrl()}]);var r=function(e,t,n,r,i,o,a,s,l){var u=this;this.viewPort=s,this.adminControls=l;var c=o.getPrimaryVideo();u.isPaidSubscriber=n.isPaidSubscriber(),t.getVideos().then(function(e){u.videos=e}),a.addPagination(this,t.getVideos(),4),n.getArtist().then(function(e){u.artist=e,!i.mobile&&o.isPrimaryVideoUrl()&&modal_open("/artist/artist_videos_modal/artist_"+e.id+"?video_id="+c.id+"&autoplay=0")}),this.showEmptyState=function(){return u.adminControls.userCanMaintain&&u.videos&&!u.videos.length}};return n.controller("VideosCtrl",["$scope","ArtistVideos","ArtistService","$location","UserAgent","FeaturedContent","PaginationService","Viewport","AdminControlsService",r]),n}),define("artist_profile/controllers/components/navigation",["module","angular_helper","artist_profile/services/navigation_service","artist_profile/controllers/overview","artist_profile/controllers/music","artist_profile/controllers/shows","artist_profile/controllers/videos"],function(e,t){var n=t.createModule(arguments);return n.controller("NavigationCtrl",["NavigationService",function(e){this.tabs=e.getTabs(),this.getActiveTab=e.getActiveTab,this.setActiveTab=e.setActiveTab,this.isActiveTab=function(t){return e.getActiveTab()==t}}]),n}),define("artist_profile/controllers/components/play_stats",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.controller("PlayStatsCtrl",["ArtistStats",function(e){var t=this;this.totalSongPlays=0,e.getStats().then(function(e){e&&e.songs&&e.songs.value>0&&(t.totalSongPlays=e.songs.value)})}]),n}),define("artist_profile/services/artist_community_service",["module","angular_helper","artist_profile/services/artist_api"],function(e,t){var n=t.createModule(arguments);return n.factory("ArtistCommunity",["$q","Config","ArtistAPI",function(e,t,n){var r,i,o,a,s=null,l=function(){return angular.isUndefined(r)?u():e.when(r)},u=function(){return s||(s=n.getFans().then(function(e){return angular.isDefined(r)?angular.copy(e,r):r=e,r})["finally"](function(){s=null})),s},c=null,d=function(){return angular.isUndefined(i)?f():e.when(i)},f=function(){return c||(c=n.all("comments").getList().then(function(e){return angular.isDefined(i)?angular.copy(e,i):i=e,i})["finally"](function(){c=null})),c},p=null,g=function(){return angular.isUndefined(o)?h():e.when(o)},h=function(){return p||(p=n.all("press").getList().then(function(e){return angular.isDefined(o)?angular.copy(e,o):o=e,o})["finally"](function(){p=null})),p},m=null,v=function(){return angular.isUndefined(a)?_():e.when(a)},_=function(){return m||(m=n.getStatus().then(function(e){return angular.isDefined(a)?angular.copy(e,a):a=e,a})["finally"](function(){m=null})),m};return angular.isArray(t.COMMENTS)&&(i=t.COMMENTS),{getFans:l,refreshFans:u,getComments:d,refreshComments:f,getPress:g,refreshPress:h,getStatus:v,refreshStatus:_}}]),n}),define("artist_profile/controllers/components/press",["module","angular_helper","artist_profile/services/artist_community_service"],function(e,t){var n=t.createModule(arguments);return n.controller("PressCtrl",["$scope","$interval","ArtistCommunity",function(e,t,n){var r=this;n.getPress().then(function(n){if(n){var i=t(function(){r.press=_.sample(n)},5e3);e.$on("$destroy",function(){t.cancel(i)})}})}]),n}),define("artist_profile/controllers/components/profile_stats",["module","angular_helper"],function(e,t){var n=t.createModule(arguments),r=function(e,t,n){var r=this;r.statsList=[],r.isSocialHidden=!0,r.adminControls=n,e.getStats().then(function(e){e&&(e.songs&&e.songs.value>0&&r.statsList.push({title:"Song Plays",delta:e.songs.delta_2weeks,value:e.songs.value}),e.videos&&e.videos.value>0&&r.statsList.push({title:"Video Plays",delta:e.videos.delta_2weeks,value:e.videos.value}),e.fans&&e.fans.value>0&&(r.statsList.push({title:"Total Fans",delta:e.fans.delta_2weeks,value:e.fans.value}),e.fans.summary&&angular.forEach(e.fans.summary,function(e){e&&e.value>0&&("Facebook"===e.title||"Twitter"===e.title||"YouTube"===e.title)&&r.statsList.push({title:e.title,value:e.value,delta:e.diff})})))}),r.toggleSocialStats=function(){r.isSocialHidden=!r.isSocialHidden}};return n.controller("StatsCtrl",["ArtistStats","Config","AdminControlsService",r]),n}),define("artist_profile/controllers/components/recommended_artists",["module","angular_helper","artist_profile/services/artist_service","artist_profile/services/sidebar_data"],function(e,t){var n=t.createModule(arguments);return n.controller("RecommendedArtistsCtrl",["ArtistService","SidebarData",function(e,t){var n=this;e.getArtist().then(function(e){n.artist=e}),t.get().then(function(e){n.recommendedArtists=e.ARTIST_RECOMMENDED_ARTISTS})}]),n}),define("artist_profile/controllers/components/suggestions",["module","angular_helper","artist_profile/services/sidebar_data"],function(e,t){var n=t.createModule(arguments);return n.controller("SuggestionCtrl",["SidebarData",function(e){var t=this;e.get().then(function(e){t.collections=e.SUGGESTIONS.COLLECTIONS,t.song_and_video_collection=e.SUGGESTIONS.LATEST_FILTERED_COLLECTION,t.songs=e.SUGGESTIONS.LATEST_FILTERED_COLLECTION_SONGS,t.videos=e.SUGGESTIONS.LATEST_FILTERED_COLLECTION_VIDEOS})}]),n}),define("artist_profile/controllers/components/viewport",["module","angular_helper","common/angular/services/viewport"],function(e,t){var n=t.createModule(arguments);return n.controller("ViewportCtrl",["Viewport",function(e){var t=this;this.viewport=e,this.is=e.is,this.getOrientation=function(){return e.orientation},this.isPortrait=function(){return"portrait"===t.getOrientation()},this.isLandscape=function(){return"landscape"===t.getOrientation()}}]),n}),define("common/angular/services/hex",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("Hex",[function(){return{fromInt:function(e){return("0"+parseInt(e,10).toString(16)).slice(-2)},toInt:function(e){return parseInt(e,16)}}}]),n}),define("common/angular/services/hsl",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("HSL",[function(){function e(e,t,n){angular.isArray(e)&&(n=e[2],t=e[1],e=e[0]);var r,i,o,a,s,l;if(e/=255,t/=255,n/=255,a=Math.max(e,t,n),s=Math.min(e,t,n),i=void 0,l=void 0,o=(a+s)/2,a===s)i=l=0;else{switch(r=a-s,l=o>.5?r/(2-a-s):r/(a+s),a){case e:i=(t-n)/r+(n>t?6:0);break;case t:i=(n-e)/r+2;break;case n:i=(e-t)/r+4}i/=6}return i=Math.round(360*i),[i,l,o]}function t(e,t,n){angular.isArray(e)&&(n=e[2],t=e[1],e=e[0]),e/=360;var r,i,o,a,s,l;return l=void 0,i=void 0,r=void 0,o=function(e,t,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?e+6*(t-e)*n:.5>n?t:2/3>n?e+(t-e)*(2/3-n)*6:e},0===t?l=i=r=n:(s=.5>n?n*(1+t):n+t-n*t,a=2*n-s,l=o(a,s,e+1/3),i=o(a,s,e),r=o(a,s,e-1/3)),[Math.round(255*l),Math.round(255*i),Math.round(255*r)]}function n(e,t,n,r){return angular.isArray(e)&&(r=t,n=e[2],t=e[1],e=e[0]),[e,Math.max(0,Math.min(1,t+t*r)),n]}function r(e,t,n,r){return angular.isArray(e)&&(r=t,n=e[2],t=e[1],e=e[0]),[e,t,Math.max(0,Math.min(1,n+n*r))]}return{fromRGB:e,toRGB:t,saturate:n,shade:r}}]),n}),define("common/angular/services/rgb",["module","angular_helper","common/angular/services/hex","common/angular/services/hsl"],function(e,t){var n=t.createModule(arguments);return n.factory("RGB",["Hex","HSL",function(e,t){function n(e){var t=angular.lowercase(e).match(f)||p;return[parseFloat(t[2]),parseFloat(t[3]),parseFloat(t[4]),parseFloat(t[5]||"1.0")]}function r(e){return n(e).slice(0,3)}function i(t){"#"==t[0]&&(t=t.substring(1));var n=e.toInt(t);return[n>>16&255,n>>8&255,255&n]}function o(t,n,r){return angular.isArray(t)&&(r=t[2],n=t[1],t=t[0]),"#"+e.fromInt(t)+e.fromInt(n)+e.fromInt(r)}function a(e,t,n){return angular.isArray(e)||(e=[e,t,n]),"rgb("+e.join(",")+")"}function s(e,t,n,r){return angular.isArray(e)?3===e.length&&e.push(t||1):e=[e,t,n,r],"rgba("+e.join(",")+")"}function l(e){return a(i(e))}function u(e,t){return s(i(e),t)}function c(e,n,r,i){return angular.isArray(e)&&(i=n,r=e[2],n=e[1],e=e[0]),t.toRGB(t.saturate(t.fromRGB(e,n,r),i))}function d(e,n,r,i){return angular.isArray(e)&&(i=n,r=e[2],n=e[1],e=e[0]),t.toRGB(t.shade(t.fromRGB(e,n,r),i))}var f=/^(rgba?)?\(?(\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d?\.?\d+))?\)?$/,p=["rgba(0, 0, 0, 1.0)","rgba","0","0","0","1.0"];return{fromHex:i,toHex:o,fromHSL:t.toRGB,toHSL:t.fromRGB,fromRGB:r,toRGB:a,fromRGBA:n,toRGBA:s,hexToRGB:l,hexToRGBA:u,saturate:c,shade:d}}]),n}),define("common/angular/services/synchronizer",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("Synchronizer",["$timeout","$interval",function(e,t){var n=function(n){var r,i,o=this,a=0,s=n||250,l={};this.removeCallback=function(e){delete l[e]},this.addCallback=function(e){var t=a++;return l[t]=e,t},this.registerCallback=function(e){var t=a++;return l[t]=e,function(){delete l[t]}},this.start=function(){i||r||(r=e(function(){r=null,i=t(o.trigger,s,0,!1),o.trigger()},0,!1))},this.stop=function(){r&&(e.cancel(r),r=null),i&&(t.cancel(i),i=null)},this.trigger=function(){for(var e in l)l.hasOwnProperty(e)&&l[e]()}};return{create:function(e){return new n(e)}}}]),n}),define("artist_profile/controllers/components/waveform",["module","angular_helper","common/angular/services/rgb","common/angular/services/synchronizer","common/angular/services/player_core_adapter"],function(e,t){var n=t.createModule(arguments);return n.controller("WaveformCtrl",["$scope","$q","$log","MusicService","SongWaveformData","PlayerCoreAdapter","RGB","Synchronizer","ArtistColorPalette","ArtistService","AdminControlsService",function(e,t,n,r,i,o,a,s,l,u,c){function d(){var e=l.getPalette().computed;return{played:e.primary,unplayed:e.light,highlight:e.primary}}var f=this,p=!0,g=!1,h=!1;this.adminControls=c,u.getArtist().then(function(e){f.artist=e}),this.playerSynchronizer=s.create(250),this.isBuffering=function(){return p},this.isPlaying=function(){return h},this.isInactive=function(){return g&&!h},this.currentSong=null,this.playOrPause=angular.noop,e.$watchCollection(l.getPalette,function(){f.colors=d()}),o.getPlayer().then(function(n){function a(){var e=o.getCurrentSong();return e&&parseInt(e.id,10)}function s(e){return f.currentSong=e,e?(h=l(),f.songId===e.id?(h&&(p=n.isBuffering(),f.playerSynchronizer.start()),t.when()):(f.position=0,i.getWaveform(e.id).then(function(t){f.songId=e.id,f.colors=d(),f.duration=1e3*e.duration,f.waveform=t,h=l(),h&&(p=n.isBuffering(),f.position=n.getPosition(),f.playerSynchronizer.start())}))):void f.playerSynchronizer.stop()}function l(){return n.playing&&f.songId&&f.songId==a()}f.playOrPause=function(){f.songId&&(h?n.pause():f.songId==a()?o.play():o.playSongNow("all_artist_songs_"+f.artist.id))},e.$on("$destroy",f.playerSynchronizer.registerCallback(function(){f.position=n.getPosition()})),e.$on("$destroy",n.onBufferChange(function(){p=!h||n.isBuffering(),h&&e.$evalAsync()})),r.getSongs().then(function(t){function r(){return _.find(t,_.matcher({id:a()}))||_.find(t,function(e){return"download_only"!=e.access})}e.$on("$destroy",n.onStateChange(function(){e.$evalAsync(function(){f.playerSynchronizer.stop(),s(r())})})),s(r())})})}]),n}),define("artist_profile/controllers/components/websites",["module","angular_helper","artist_profile/services/sidebar_data","artist_profile/services/layout"],function(e,t){var n=t.createModule(arguments);return n.controller("WebsitesCtrl",["SidebarData","Layout",function(e,t){var n=this;e.get().then(function(e){n.websites=e.ARTIST_WEBSITES,t.isEnabled("Blog")||(n.websites=_.filter(n.websites,function(e){return"Blog"!=e.website}))}),this.limit=!1;var r={Amazon:"amazon",Apple:"apple",Facebook:"facebook-square",Flickr:"flickr",SoundCloud:"soundcloud",Spotify:"spotify",Tumblr:"tumblr-square",Twitter:"twitter-square",Vimeo:"vimeo-square",YouTube:"youtube-square","Last.fm":"lastfm-square",Instagram:"instagram",Google:"google-plus-square",Blog:"quote-right"};this.socialIcon=function(e){var t=r[e];return t||(t="globe"),t}}]),n}),define("artist_profile/controllers/admin_panel",["module","angular_helper"],function(e,t){var n=t.createModule(arguments),r=function(e,t,n,r){var i=this;i.viewPort=n,r.getSections().then(function(e){i.tasks=e[0].tasks});var o=function(){r.refreshSections().then(function(e){i.tasks=e[0].tasks})},a=2,s=3;this.taskLimit=function(){return n.is("medium")&&!n.is("large")?a:s},this.hasSong=t.FEATURED_SONGS.length>0,this.hasProfilePhoto=null!=t.ARTIST_EXTRA_DATA.PROFILE_PHOTO_ID,this.hideAdminPanel=function(){return t.ADMIN_DATA.UNDER_CONSTRUCTION},e.songUploaded=function(){i.hasSong=!0,o()},e.photoUploaded=function(){i.hasProfilePhoto=!0,o()},e.refreshSections=function(){o()}};return n.controller("AdminPanelCtrl",["$scope","Config","Viewport","TaskService",r]),n}),define("musician/directives/rn_event",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.directive("rnEvent",[function(){return{restrict:"A",scope:{rnEventListener:"&"},link:function(e,t,n){Reverb.Event.bind(n.rnEvent,t,function(t,n){e.$evalAsync(function(){e.rnEventListener({event:t,data:n})})})}}}])}),define("artist_profile/controllers/all",["module","angular_helper","artist_profile/controllers/components/artist","artist_profile/controllers/components/color","artist_profile/controllers/components/download","artist_profile/controllers/components/favorite_artists","artist_profile/controllers/components/influences","artist_profile/controllers/components/layout","artist_profile/controllers/components/local_shows","artist_profile/controllers/components/members","artist_profile/controllers/components/music_stats","artist_profile/controllers/components/video_stats","artist_profile/controllers/components/navigation","artist_profile/controllers/components/play_stats","artist_profile/controllers/components/press","artist_profile/controllers/components/profile_stats","artist_profile/controllers/components/recommended_artists","artist_profile/controllers/components/suggestions","artist_profile/controllers/components/viewport","artist_profile/controllers/components/waveform","artist_profile/controllers/components/websites","artist_profile/controllers/music","artist_profile/controllers/overview","artist_profile/controllers/shows","artist_profile/controllers/videos","artist_profile/controllers/admin_panel","musician/directives/rn_event"],function(e,t){return t.createModule(arguments)}),define("artist_profile/services/artist_color_palette",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("ArtistColorPalette",["Config","ArtistAPI",function(e,t){var n={};return n.getPalette=function(){return n.colorPalette},n.refreshPalette=function(e){t.one("artist_color_palette").get({from_cache:e}).then(function(e){n.colorPalette=e})},angular.isObject(e.COLOR_PALETTE)&&(n.colorPalette=angular.copy(e.COLOR_PALETTE)),n}]),n}),define("artist_profile/services/google_map_service",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("GoogleMapService",[function(){return Reverb.GoogleMapService}]),n}),define("artist_profile/services/fan_and_favorites_service",["module","angular_helper","artist_profile/services/artist_api"],function(e,t){var n=t.createModule(arguments);return n.factory("FanAndFavorites",["$q","Config","ArtistAPI",function(e,t,n){function r(e,t,n){return angular.isObject(e)?(t=e,e=""):t=t||f,n(e,t)}function i(t,n){return r(t,n,function(t,n){return angular.isUndefined(l[t])||n.page!=l[t].pagination.page?a(t,n):e.when(l[t])})}function o(t,n){return r(t,n,function(t,n){return angular.isUndefined(c[t])||n.page!=c[t].pagination.page?s(t,n):e.when(c[t])})}function a(e,t){return r(e,t,function(e,t){return u[e]||(u[e]=n.getFavorites(angular.extend({},t,{fans_filter:e})).then(function(t){return l[e]=t,l[e]})["finally"](function(){delete u[e]})),u[e]})}function s(e,t){return r(e,t,function(e,t){return d[e]||(d[e]=n.getFavorites(angular.extend({},t,{favorites_filter:e})).then(function(t){return c[e]=t,c[e]})["finally"](function(){delete d[e]})),d[e]})}var l={},u={},c={},d={},f={page:1,per_page:10};return{getFans:i,getFavorites:o,refreshFans:a,refreshFavorites:s}}]),n}),define("artist_profile/services/metadata_service",["module","angular_helper","artist_profile/services/navigation_service","artist_profile/services/artist_service"],function(e,t){var n=t.createModule(arguments);return n.factory("MetadataService",["$window","$document","$location","Config","NavigationService","ArtistService",function(e,t,n,r,i,o){function a(){if(w&&S===n.absUrl())return w;var e="";if(u){switch(e+=u.name,i.getActiveTab()){case"music":e+=" Songs";break;case"videos":e+=" Videos";break;case"shows":e+=" Shows"}e+=" | "}return e+" ReverbNation"}function s(){return b&&S===n.absUrl()?b:i.getCanonicalURL()}function l(){if(p[0].href!==s()){var e={full_update:!1,page_title:a(),canonical:s(),meta_viewport_content:d.attr("content"),form_authenticity_token:f.attr("content"),body_classes:c.attr("class"),page_contents_classes:g.attr("class"),background:"",background_image:"",page_tracking_url:v[i.getActiveTab()]||null,url:n.absUrl(),controller_name:y.CONTROLLER,action_name:y.ACTION,flash_message:{},header_message:_.MESSAGE||null};h.Navigate.update_framework_for_nav(e)}}var u,c=angular.element(t[0].body),d=angular.element("meta[name=viewport]"),f=angular.element("meta[name=csrf-token]"),p=angular.element("link[rel=canonical]"),g=angular.element("#page_contents"),h=e.Reverb,m=angular.copy(r.METADATA||{}),v=m.PAGE_TRACKING_URLS||{},_=m.HEADER||{},y=m.LOCATION||{},w=t[0].title,b=p[0].href,S=n.absUrl();return o.getArtist().then(function(e){u=e}),{updateFramework:l}}]),n.run(["$rootScope","MetadataService",function(e,t){e.$on("$locationChangeSuccess",function(){t.updateFramework()})}]),n}),define("artist_profile/services/music_stats_service",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("MusicStatsService",[function(){var e={totalSongs:0,totalAlbums:0};return{getMusicStats:function(){return e},setMusicStats:function(t,n){e.totalSongs=t,e.totalAlbums=n}}}]),n}),define("artist_profile/services/video_stats_service",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("VideoStatsService",[function(){function e(){return n}function t(e){n.totalVideos=e}var n={totalVideos:0};return{getVideoStats:e,setVideoStats:t}}]),n}),define("common/angular/api/models/videos",["module","angular_helper","common/angular/api/services/reverb_api"],function(e,t){return t.createModule(arguments).run(["$window","ReverbApi",function(e,t){t.extendModel("videos",function(t){return t.isYoutube=function(){return!!t.yt_id},t.isVimeo=function(){return!t.isYoutube()},t.getEmbedSource=function(n,r){var i="";if(r&&(i="&autoplay=1"),t.isYoutube()){var o=e.location.protocol+"//"+e.location.host;return"//www.youtube.com/embed/"+t.yt_id+"?origin="+encodeURIComponent(o)+"&enablejsapi=1&modestbranding=1&fs=1&playsinline=0&rel=0&showinfo=0"+i}var a=t.url.replace(/^.*\//g,"");return"//player.vimeo.com/video/"+a+"?api=1&player_id="+n+i},t})}]).factory("Videos",["ReverbApi",function(e){return e.service("videos")}])}),define("artist_profile/services/artist_video_service",["module","angular_helper","artist_profile/services/paginated_list_factory","artist_profile/services/artist_api","common/angular/api/models/videos","common/angular/components/pagination"],function(e,t){var n=t.createModule(arguments);return n.factory("ArtistVideos",["$q","Config","PaginatedListFactory","ArtistAPI","ReverbApi","Videos","VideoStatsService",function(e,t,n,r,i,o,a){function s(){g=_.chain(p.$list).sortBy(function(e){return-e.id
}).sortBy("views").value()[0],a.setVideoStats(p.$list.length)}function l(){return e.when(g)}function u(){return p.refresh()}function c(e,t){return p.refreshItem(e,t)}function d(){return p.getPartialList()}function f(e){return p.getItem(e)}var p=n.createList(n.createLoadListFunctionFromRestangularObject(r.all("videos")),function(e,t){if(angular.isObject(t)){var n=angular.copy(t);return i.restangularizeElement(null,n,"videos",!0),n}return null===t?null:o.one(e).get()}),g=null;if(p.addRefreshCallbacks(s,s),p.addRefreshItemCallbacks(s),angular.isObject(t.VIDEOS_WITH_PAGINATION)){var h=angular.copy(t.VIDEOS_WITH_PAGINATION);i.restangularizeCollection(null,h.results,"videos"),p.initialize(h)}return s(),{getVideos:d,refreshVideos:u,getVideo:f,refreshVideo:c,getMostWatchedVideo:l}}]),n}),define("artist_profile/services/artist_photo_service",["module","angular_helper","artist_profile/services/artist_api","artist_profile/services/artist_service","artist_profile/services/paginated_list_factory"],function(e,t){var n=t.createModule(arguments);return n.factory("ArtistPhotos",["$q","$http","Config","PaginatedListFactory","ArtistService","ArtistAPI","ReverbApi",function(e,t,n,r,i,o,a){function s(){return d.refresh()}function l(){return d.getPartialList()}function u(e){return d.getItem(e)}function c(){return d.getList().then(function(e){return _.map(e,"id")}).then(function(e){return i.getArtist().then(function(n){return t.post("/control_room/artist/"+n.id+"/reorder_photos_save",{reorder_items:e,reorder_offset:0})})})}var d=r.createList(r.createLoadListFunctionFromRestangularObject(o.all("photos")));if(angular.isObject(n.PHOTOS_WITH_PAGINATION)){var f=angular.copy(n.PHOTOS_WITH_PAGINATION);a.restangularizeCollection(null,f.results,"photos"),d.initialize(f)}return{getPhotos:l,getPhoto:u,refreshPhotos:s,reorder:c}}]),n}),define("artist_profile/services/artist_stats_service",["module","angular_helper","common/angular/api/services/reverb_api","artist_profile/services/artist_api"],function(e,t){var n=t.createModule(arguments);return n.factory("ArtistStats",["$q","Config","ReverbApi","ArtistAPI",function(e,t,n,r){var i,o=null,a=function(){return angular.isUndefined(i)?s():e.when(i)},s=function(){return o||(o=r.getStats().then(function(e){return angular.isDefined(i)?angular.copy(e,i):i=e,i})["finally"](function(){o=null})),o};return{getStats:a}}]),n}),define("artist_profile/services/location",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("Location",["Config",function(e){var t={};return angular.isObject(e.LOCATION)&&(t=angular.copy(e.LOCATION)),t}]),n}),define("artist_profile/services/song_waveform_data",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("SongWaveformData",["$q","Config","Songs",function(e,t,n){function r(e){return a[e]||(a[e]=n.one(e).getWaveform().then(function(e){return e.waveform},function(){return i(e).waveform})),a[e]}function i(e){for(var t,n=1,r=50,i=[],a=0;1e3>a;a++)t=30>a?n=o(n,50):a>=975?r=o(5,r):o(50,115),i.push(t);return{song_id:e,waveform:i}}function o(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}var a={};return angular.isArray(t.WAVEFORM_DATA)&&_.each(t.WAVEFORM_DATA,function(t){a[t.song_id]=e.when(t.waveform)}),{getWaveform:r}}]),n}),define("artist_profile/services/can_promote",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("CanPromote",["Config",function(e){function t(e){return e.showtime&&n?new Date(e.showtime).getTime()>n:!1}var n=null;return angular.isDefined(e.ADMIN_DATA)&&angular.isDefined(e.ADMIN_DATA.PROMOTE_IT)&&(n=angular.copy(e.ADMIN_DATA.PROMOTE_IT.SHOW_DATE_THRESHOLD),n&&(n=new Date(n).getTime())),{isEligible:t}}]),n}),define("artist_profile/services/admin_controls",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("AdminControlsService",["$window","Config","PromoteItUrl",function(e,t,n){var r=angular.copy(e.Reverb)||{};return{userCanMaintain:r.current_page_object?r.current_page_object.current_user_can_maintain:!1,userIsFan:t.ARTIST_EXTRA_DATA?t.ARTIST_EXTRA_DATA.CURRENT_USER_IS_FAN:!1,artistCanCreateCollections:angular.isDefined(t.ADMIN_DATA)&&t.ADMIN_DATA.CAN_CREATE_COLLECTIONS,PromoteItUrl:n}}]),n}),define("artist_profile/services/all",["module","angular_helper","artist_profile/services/artist_api","artist_profile/services/artist_service","artist_profile/services/artist_color_palette","artist_profile/services/google_map_service","artist_profile/services/fan_and_favorites_service","artist_profile/services/metadata_service","artist_profile/services/navigation_service","artist_profile/services/music_service","artist_profile/services/music_stats_service","artist_profile/services/video_stats_service","artist_profile/services/artist_video_service","artist_profile/services/artist_photo_service","artist_profile/services/artist_community_service","artist_profile/services/artist_show_service","artist_profile/services/artist_stats_service","artist_profile/services/location","artist_profile/services/paginated_list_factory","artist_profile/services/song_waveform_data","artist_profile/services/sidebar_data","artist_profile/services/can_promote","artist_profile/services/admin_controls"],function(e,t){return t.createModule(arguments)}),define("common/angular/services/image_proxy",["module","angular_helper"],function(e,t){return t.createModule(arguments).provider("ImageProxy",[function(){var e,t=/^((https?:)?\/\/[^\/\?]+)(\/.*)?/,n=25;this.setCacheSize=function(e){n=e},this.setDefaultImageProxySource=function(t){e=t},this.$get=["$cacheFactory","$q","$window","$log",function(r,i,o,a){function s(e){if(angular.isString(e)){var n=e.match(t);return{origin:(n[2]?"":o.location.protocol)+n[1],path:n[3]}}throw new Error("Invalid URL: "+e)}function l(e){var t=o.location.protocol+"//"+o.location.hostname+(o.location.port?":"+o.location.port:"");try{return t!==s(e).origin}catch(n){a.error(n)}}function u(t,n){if(n=n||e,!n)return i.reject("ImageProxy has not been configured!");var r=f.get(t);if(r)return i.when(r);var o=i.defer(),a="imageDataURL_"+(new Date).getTime()+"_"+Math.ceil(1e5*Math.random()),s=angular.element('<iframe style="width:1px;height:1px;position:absolute;visibility:hidden;"></iframe>'),l=s.get(0);return c.on("message."+a,function(e){var n=e.originalEvent.data.split(" ");n[0]==a&&(c.off("message."+a),2===n.length?(f.put(t,n[1]),o.resolve(n[1]),angular.element(l).remove()):o.reject("Failed to obtain image data URL!"))}),l.onload=function(){l.contentWindow.postMessage(a+" "+t,"*")},l.src=n,d.append(l),o.promise}var c=angular.element(o),d=angular.element("body"),f=r.get("ImageProxy")||r("ImageProxy",{capacity:n});return{isCrossDomainURL:l,getImageDataURL:u}}]}])}),define("common/angular/services/image_helper",["module","angular_helper","common/angular/services/image_proxy"],function(e,t){var n=t.createModule(arguments);return n.factory("ImageHelper",["$q","ImageProxy",function(e,t){function n(t){var n=e.defer(),r=new Image;return r.onload=function(){n.resolve(r)},r.onerror=function(){n.reject()},r.src=t,n.promise}function r(r){return t.isCrossDomainURL(r)?t.getImageDataURL(r).then(function(e){return n(e)},function(t){return e.reject(t)}):n(r)}function i(e){return n(e).then(function(e){return{width:e.naturalWidth||e.width,height:e.naturalHeight||e.height}})}return{onload:n,onloadCrossOrigin:r,dimensions:i}}]),n}),define("common/angular/directives/background_cover",["module","angular_helper","common/angular/services/image_helper"],function(e,t){var n=t.createModule(arguments),r="background_cover:imageDimension";return n.directive("imageBackgroundCover",["$cacheFactory","$q","$timeout","ImageHelper",function(e,t,n,i){var o=e.get(r)||e(r);return{priority:1e3,restrict:"A",link:function(e,n,r){function a(){c=n.width(),d=n.height(),f=c/d}function s(e,t){var n=c,r=d,i=e/t;return f>i?r=n/i:n=r*i,{position:"absolute",top:(d-r)*(1>i?0:.5),left:.5*(c-n),width:n,height:r,maxWidth:"none"}}function l(e){var t=o.get(e);return t||(t=o.put(e,i.dimensions(e)).then(function(t){return u(e),t})),t}function u(e){return l(e).then(function(n){return p!==e?t.reject():(g.css(s(n.width,n.height)),g.get(0).src=e,n)})}var c,d,f,p,g=n.find("img"),h=function(){a(),h=angular.noop};r.$observe("imageBackgroundCover",function(e){h(),p=e,r.imageBackgroundCoverLoadingClass&&r.$addClass(r.imageBackgroundCoverLoadingClass),u(e).then(function(){r.imageBackgroundCoverLoadingClass&&r.$removeClass(r.imageBackgroundCoverLoadingClass)})}),n.on("resize",function(e){e.target===n[0]&&(a(),u(p))})}}}]),n}),define("common/angular/directives/delayed",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.directive("delayedAddClassIf",["$timeout",function(e){return{restrict:"A",link:function(t,n,r){var i;t.$watch(r.delayedAddClassIf,function(t){t?i=e(function(){n.addClass(r.delayedAddClassIfClass)},parseInt(r.delayedAddClassIfDelay,10)||0,!1):(e.cancel(i),n.removeClass(r.delayedAddClassIfClass))})}}}]),n}),define("common/angular/directives/marketing_slot",["module","angular_helper","common/angular/services/viewport"],function(e,t){return t.createModule(arguments).directive("marketingSlot",["$log","$q",function(e,t){return{template:'<div event-listener="reverb:gpt:slot_render_ended"><div class="marketing-slot"></div></div>',scope:{sizeMapping:"&",size:"&",unit:"@",targeting:"&"},restrict:"E",link:function(n,r){n.divId=r.find(".marketing-slot").identify().attr("id"),n.$on("reverb:gpt:slot_render_ended",function(e,t,r){r.isEmpty||r.slot.getSlotElementId()!=n.divId||n.$emit("marketing_slot:loaded")}),require(["googletag"],function(r){if(n.targetingPromise=n.targeting(),"undefined"==typeof n.targetingPromise)n.targetingPromise=t(function(e){e({})});else if("object"!=typeof n.targetingPromise||"function"!=typeof n.targetingPromise.then)throw"if provided, targeting must be a promise";n.targetingPromise.then(function(t){r.cmd.push(function(){e.info("Defining ad slot",{id:n.divId,unit:n.unit,size:n.size(),sizeMapping:n.sizeMapping(),targeting:t}),n.slot=r.defineSlot("/133485656/"+n.unit,n.size(),n.divId),n.sizeMapping()&&n.slot.defineSizeMapping(n.sizeMapping()),n.slot.addService(r.pubads()),angular.forEach(t,function(e,t){n.slot.setTargeting(t,e)}),r.display(n.divId)})}),n.$on("$destroy",function(){r.cmd.push(function(){e.info("Destroying ad slot",n.divId,n.slot),n.slot=r.destroySlots([n.slot])})})})}}}])}),define("common/angular/services/player_adapter",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.service("PlayerAdapter",["$q","$timeout","$window","$injector",function(e,t,n,r){var i=e.defer();t(function(){if(r.has("PlayerCoreAdapter"))r.get("PlayerCoreAdapter").getPlayer().then(function(e){i.resolve(e)});else if(n.Reverb&&n.Reverb.playerReady&&n.PlayerCore)n.Reverb.playerReady(function(){i.resolve(n.PlayerCore.getInstance()._Player)});else{if(!r.has("Player"))throw new Error("Failed to locate a Player!");i.resolve(r.get("Player"))}},0,!1),this.getPlayer=function(){return i.promise}}]),n}),define("common/angular/directives/player_scrubber",["module","angular_helper","common/angular/services/player_adapter"],function(e,t){function n(e){var t=0;return"touch"===e.type.substr(0,5)?(e=e.originalEvent,t=(e.changedTouches[0]||e.touches[0]).pageX):t=e.pageX,parseInt(t,10)}var r=t.createModule(arguments);return r.directive("playerScrubber",["$parse","PlayerAdapter",function(e,t){return{restrict:"A",scope:{playFunction:"&playerScrubberPlayFunction",onSeekStart:"&playerScrubberOnSeekStart",onSeekEnd:"&playerScrubberOnSeekEnd",synchronizer:"=playerSynchronizer",inactive:"<?playerScrubberInactive"},link:function(r,i,o){function a(){f||(f=!0,r.onSeekStart&&r.$evalAsync(r.onSeekStart))}function s(){r.onSeekEnd&&r.$evalAsync(r.onSeekEnd),f=!1}function l(){c=i.width(),d=i.offset().left}var u=!1,c=i.width(),d=i.offset().left,f=!1;i.is("[data-resize],[resize]")?i.on("resize",l):i.parents("[data-resize],[resize],body").first().on("resize",l),t.getPlayer().then(function(t){i.on("mousedown touchstart",function(s){angular.element(s.target).is("[data-player-play-head],[player-play-head]")||r.inactive||("touchstart"===s.type&&s.preventDefault(),u||(t.playing?(l(),u=!0,t.seekTo(t.getDuration()*(n(s)-i.offset().left)/c),r.synchronizer.trigger(),o.playerScrubberTriggerSeekStartOnFirstEvent&&e(o.playerScrubberTriggerSeekStartOnFirstEvent)(r.$parent)!==!0||a()):r.playFunction&&r.$evalAsync(r.playFunction)))}),angular.element("body").on("mousemove touchmove",function(e){if(!r.inactive&&u){var o=t.getDuration(),s=t.getDuration()*Math.max(0,Math.min(1,(n(e)-i.offset().left)/c));1e3>o-s?t.pause():t.paused&&t.resume(),a(),t.seekTo(s),r.synchronizer.trigger()}}),angular.element("body").on("mouseup touchend touchcancel",function(){r.inactive||(u&&(t.paused&&t.resume(),s()),u=!1)})})}}}]),r}),define("common/angular/directives/resize",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.value("ResizeSensor",function(e){var t=angular.element('<iframe src="about:blank" style="display:block;position:absolute;top:0;bottom:0;left:0;right:0;height:100%;width:100%;visibility:hidden;z-index:-1;"></iframe>').appendTo(e);return t[0].contentWindow&&(t[0].contentWindow.window.onresize=function(t){e.trigger("resize",[t.target.innerWidth,t.target.innerHeight])}),e}),n.directive("resize",["ResizeSensor",function(e){return{restrict:"A",link:{pre:function(t,n){e(n)}}}}]),n}),define("common/angular/directives/rn_song",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.directive("rnSongUpdateUiOnRender",["$timeout",function(e){return{restrict:"A",link:function(){e(function(){Reverb.player.updateUi()},0,!1)}}}])}),define("common/angular/directives/toggle",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.directive("toggleModel",[function(){return{restrict:"A",scope:{toggleModel:"="},controller:[function(){var e=!1;this.toggle=function(){e=!e},this.toggled=function(t){return angular.isDefined(t)?void(e=t):e||!1}}],link:function(e,t,n,r){e.toggleModel=new function(){this.toggle=angular.bind(r,r.toggle),this.toggled=angular.bind(r,r.toggled)},"true"==n.toggleDefault&&e.toggleModel.toggled(!0)}}}]),n.directive("toggle",[function(){var e={};return{restrict:"A",require:"toggle",controllerAs:"toggleController",controller:[function(){this.toggle=function(t){e[t]=!e[t]},this.toggled=function(t,n){return angular.isDefined(n)?void(e[t]=n):e[t]||!1}}],link:function(e,t,n,r){var i=n.toggle;i&&(e[i]=new function(){this.toggle=angular.bind(r,r.toggle,i),this.toggled=angular.bind(r,r.toggled,i)},"true"==n.toggleDefault&&e[i].toggled(!0))}}}]),n.directive("toggleSet",[function(){return{restrict:"A",require:"^toggle",link:function(e,t,n,r){var i=n.toggleName;i&&e.$watch(function(){return r.toggled(i)},function(t){t&&e.$eval(n.toggleSet)})}}}]),n.directive("toggleUnset",[function(){return{restrict:"A",require:"^toggle",link:function(e,t,n,r){var i=n.toggleName;i&&e.$watch(function(){return r.toggled(i)},function(t){t||e.$eval(n.toggleUnset)})}}}]),n}),define("common/angular/services/custom_if",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("CustomIf",["ngIfDirective",function(e){var t=e[0];return{createDirective:function(e){var n=_.chain(t).omit("name","index","compile").omit(function(e,t){return"$"===t[0]&&"$$tlb"!==t}).value();return n.priority=n.priority-1,n.link=function(n,r,i){var o=arguments;i.ngIf=function(){return e.apply(null,o)},t.link.apply(t,o)},n}}}]),n}),define("common/angular/directives/viewport",["module","angular_helper","common/angular/services/custom_if","common/angular/services/viewport"],function(e,t){var n=["small","smallplus","medium","large","xlarge","xxlarge"],r=t.createModule(arguments);r.directive("ifViewportIs",["CustomIf","Viewport",function(e,t){return e.createDirective(function(e,n,r){return t.is(r.ifViewportIs)})}]),r.directive("ifViewportIsNot",["CustomIf","Viewport",function(e,t){return e.createDirective(function(e,n,r){return!t.is(r.ifViewportIsNot)})}]);for(var i=["up","only"],o=0;o<n.length;o++)for(var a=0;a<i.length;a++)!function(e,t){var n=e[0].toUpperCase()+e.substr(1),i=t[0].toUpperCase()+t.substr(1);r.directive("showFor"+n+i,["CustomIf","Viewport",function(n,r){return n.createDirective(function(){return r.query([e,t].join("-"))})}]),r.directive("hideFor"+n+i,["CustomIf","Viewport",function(n,r){return n.createDirective(function(){return!r.query([e,t].join("-"))})}])}(n[o],i[a]);return r.directive("ifViewportPortrait",["CustomIf","Viewport",function(e,t){return e.createDirective(function(){return"portrait"===t.orientation})}]),r.directive("ifViewportLandscape",["CustomIf","Viewport",function(e,t){return e.createDirective(function(){return"landscape"===t.orientation})}]),r}),define("common/angular/directives/viewport_image",["module","angular_helper","common/angular/services/viewport"],function(e,t){function n(e,t,n){var r=_.find(t,function(t){return e.is(t)&&angular.isString(n[t])&&n[t].length>0});return r?n[r]:!1}function r(e,t){i.directive(e,["$timeout","$document","Viewport","ViewportBreakpoints",function(e,r,i,o){return{restrict:"A",link:function(a,s,l){var u,c={};_.each(o,function(a){var d=l.$normalize("imageUrlFor-"+a);l.hasOwnProperty(d)&&l.$observe(d,function(l){c[a]=l,e.cancel(u),u=e(function(){var e=n(i,o,c);if(e){var a=r[0].createElement("img");a.onload=function(){t(s,this.src)},a.src=e}},0,!1)})})}}}])}var i=t.createModule(arguments);return r("viewportImage",function(e,t){e[0].src=t}),r("viewportBackgroundImage",function(e,t){e.css("background-image",'url("'+t+'")')}),i}),define("common/angular/services/rgb_mixer",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("RGBMixer",[function(){function e(e,t,n){if(0>=n)return e;if(n>=1)return t;for(var r=[],i=0;3>i;i++){var o=e[i],a=t[i];r.push(Math.round(o+(a-o)*n))}return o=e[3]||1,a=t[3]||1,r.push(o+(a-o)*n),r}return{mix:e}}]),n}),window.Reverb=window.Reverb||{},Reverb.Waveform=function(){function e(e){return function(){return e}}function t(e,t){for(var n=[],r=e.length/t,i=0;t>i;i++){for(var o=Math.floor(i*r),a=Math.max(Math.floor((i+1)*r),o+1),s=0,l=o;a>l;l++)s+=e[l];n[i]=s/(a-o)}return n}function n(e,t,n,r,i,o,a,s,l){e.fillStyle=o(a,s,l),e.fillRect(t,n,r,i)}function r(r,a,s){this.width=s.canvasWidth||r.clientWidth,this.height=s.canvasHeight||r.clientHeight;var l=r.appendChild(document.createElement("canvas"));l.width=this.width,l.height=this.height,this.context=l.getContext("2d"),this.barWidth=s.barWidth||i,this.spaceWidth=s.spaceWidth||o,this.colorFunction="function"==typeof s.color?s.color:e(s.color||"#333"),this.drawColumnFunction=s.drawColumn||n,a.length>0&&(this.resampledData=t(a,this.width/(this.barWidth+this.spaceWidth)),this.draw())}var i=3,o=2;return r.prototype.draw=function(){var e=(this.resampledData||[]).length;if(e>0){this.clear();for(var t=0;e>t;t++){var n=this.resampledData[t]/128,r=t*(this.barWidth+this.spaceWidth),i=(1-n)*this.height,o=this.barWidth,a=this.height-i;this.drawColumnFunction(this.context,r,i,o,a,this.colorFunction,t,e,n)}}},r.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},r}(),define("rn_waveform",function(){}),define("common/angular/directives/waveform",["module","angular_helper","common/angular/services/player_adapter","common/angular/services/rgb","common/angular/services/rgb_mixer","rn_waveform"],function(e,t){var n=t.createModule(arguments);return n.directive("waveform",["$timeout","PlayerAdapter","RGB","RGBMixer",function(e,t,n,r){var i="played",o="rgba(255,255,255,0.9)",a="unplayed",s="rgba(255,255,255,0.3)",l="highlight",u="rgba(255,255,255,0.6)";return{restrict:"A",scope:{waveform:"=waveform",colors:"=waveformColors",songId:"=waveformSongId",synchronizer:"=waveformSynchronizer"},link:function(c,d){function f(e){C[i]=(e||{})[i]||o,C[a]=(e||{})[a]||s,C[l]=(e||{})[l]||u}function p(t,n){n!==w&&(d.empty(),e.cancel(S),t&&n&&(w=n,S=e(function(){g(t,C)},0,!1)))}function g(e,t){d.empty();var i={};angular.forEach(t,function(e,t){"rgb"===angular.lowercase(e).slice(0,3)?i[t]=n.fromRGBA(e):(i[t]=n.fromHex(e),i[t].push(1))}),b=new Reverb.Waveform(d[0],e,{canvasWidth:y,drawColumn:function(e,o,a,s,l,u,c,d){var f=c/d,p=(c+1)/d;e.fillStyle=$>f?$>=1?t.played:P>=0&&f>P?p>$?n.toRGBA(r.mix(i.unplayed,i.highlight,($-f)/(p-f))):t.highlight:p>$?n.toRGBA(P>=0&&(p>P||P>f||p>P)?r.mix(i.highlight,i.played,($-f)/(p-f)):r.mix(i.unplayed,i.played,($-f)/(p-f))):t.played:P>f?t.highlight:t.unplayed,e.fillRect(o,a,s,l)}})}function h(){y=d.parent().width(),angular.isArray(c.waveform)&&c.songId&&(w=-1,p(c.waveform,c.songId))}function m(){b&&b.draw()}function v(e){return"touch"===e.type.substr(0,5)}function _(e){var t=0;return v(e)?(e=e.originalEvent,t=(e.changedTouches[0]||e.touches[0]).pageX):t=e.pageX,t}var y,w,b,S,C={},A=-1,$=2,P=-1;f(c.colors),h(),d.is("[data-resize],[resize]")?d.on("resize",h):d.parents("[data-resize],[resize],body").first().on("resize",h);var M=!1;d.on("mousemove",function(e){if(M){var t=_(e),n=(parseInt(t,10)-d.offset().left)/y;n!==P&&(P=n,m())}}),d.on("mouseout",function(){-1!==P&&(P=-1,m())}),c.$watchCollection("colors",function(e,t){f(e),e!==t&&h()}),c.$watch("songId",function(e,t){e!==t&&(A=-1,$=-1,P=-1),p(c.waveform,e)}),t.getPlayer().then(function(t){var n;c.$on("$destroy",function(){e.cancel(n)}),c.$on("$destroy",t.onStateChange(function(){e.cancel(n),M=t.playing;var r=c.songId;(t.stopped||r!==t.currentSongId())&&(n=e(function(){n=null,(t.stopped||r===c.songId&&r!==t.currentSongId())&&c.$apply(function(){$=2,m()})},0,!1))})),c.$on("$destroy",c.synchronizer.registerCallback(function(){var e=0;if(t.currentSongId()===c.songId&&(e=t.getPosition()),e!==A){A=e;var n=t.getDuration();n>0&&($=e/n),m()}}))})}}}]),n}),define("common/angular/directives/tooltip",["module","angular_helper"],function(e,t){return t.createModule(arguments).directive("rnTooltip",["$window",function(e){return{restrict:"AE",replace:!0,scope:{title:"@",list:"=",buttonContent:"@buttoncontent",buttonStyle:"@buttonstyle",preListContent:"@content",postListContent:"@postlistcontent",style:"@customstyle",styleClass:"@styleclass",arrowColor:"@arrowcolor"},template:'          <div class="rn_tooltip" ng-mousemove="onMouseMove()" ng-mouseout="onMouseOut()">            <a class="button_" href="" ng-click="toggleTooltip()">              <div ng-if="buttonContent" class="{{buttonContent}}" style="{{buttonStyle}}"></div>              <span ng-if="!buttonContent">[?]</span>            </a>            <div class="callout_" style="display: none;">              <div class="arrow_"></div>              <div class="arrow_fill_ {{arrowColor}}"></div>              <div class="copy_ {{styleClass}}" style="{{style || \'min-width:250px;\'}}">                <div class="title_" ng-show="title">{{title}}</div>                {{preListContent}}                <ul ng-if="list"><li ng-repeat="item in list">{{item}}</li></ul>                {{postListContent}}              </div>            </div>          </div>',link:function(t,n){t.toggleTooltip=function(){e.ttToggleTooltip(n[0])},t.onMouseMove=function(){e.ttOnMouseMove(n[0])},t.onMouseOut=function(){e.ttOnMouseOut(n[0])}}}}])}),define("common/angular/directives/google_map_info_box",["module","angular_helper"],function(e,t){var n=function(e){return{restrict:"E",scope:{options:"="},link:function(t,n){function r(){Reverb.GMaps.ready(function(e){function t(e){google.maps.OverlayView.call(this),this.latlng_=e.latlng,this.map_=e.map,this.content=e.content,this.offsetVertical_=(e.offset_y||0)+-1*e.map.getDiv().offsetHeight/2,this.offsetHorizontal_=(e.offset_x||0)+-1*e.map.getDiv().offsetWidth/2,e.height&&(this.height_=e.height),e.width&&(this.width_=e.width),this.setMap(this.map_)}{var r=n.find(".map"),o=new e.LatLng(i.lat,i["long"]),a={center:o,zoom:i.zoom||15,mapTypeId:e.MapTypeId.ROADMAP,scrollwheel:i.scrollwheel||!1,disableDefaultUI:i.disableDefaultUI||!0,draggable:i.draggable||!1,mapTypeControl:i.mapTypeControl||!1,navigationControl:i.navigationControl||!1,scaleControl:i.scaleControl||!1,disableDoubleClickZoom:i.disableDoubleClickZoom||!0},s=new e.Map(r[0],a);new google.maps.Marker({position:o,map:s,title:i.address})}i.styles&&s.set("styles",i.styles),t.prototype=new google.maps.OverlayView,t.prototype.remove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},t.prototype.draw=function(){if(this.createElement(),this.div_){var e=this.getProjection().fromLatLngToDivPixel(this.latlng_);e&&(this.div_.style.width=this.width_+"px",this.div_.style.left=e.x+this.offsetHorizontal_+"px",this.div_.style.height=this.height_+"px",this.div_.style.top=e.y+this.offsetVertical_+"px",this.div_.style.display="block")}},t.prototype.createElement=function(){var e=this.getPanes(),t=this.div_;if(t)t.parentNode!=e.floatPane&&(t.parentNode.removeChild(t),e.floatPane.appendChild(t));else{t=this.div_=document.createElement("div"),t.className=i.wrapperName;var n=document.createElement("div");n.className="content",n.innerHTML=this.content,t.appendChild(n),t.style.display="none",e.floatPane.appendChild(t)}};var l={map:s,width:s.getDiv().offsetWidth*i.percentWidth,height:s.getDiv().offsetHeight*i.percentHeight,offset_x:i.offset_x||0,offset_y:i.offset_y||0,content:i.content,latlng:new google.maps.LatLng(i.lat,i["long"])};i.content&&new t(l)})}if(t.options){var i=t.options;e(r,0)}}}};return t.createModule(arguments).directive("infoBoxMap",["$timeout",n])}),define("artist_profile/directives/admin_buttons",["module","angular_helper"],function(e,t){return t.createModule(arguments).directive("adminButtons",["$document","UUID","Config","ArtistService","ArtistCommunity","AdminControlsService","Viewport","SidebarData","Layout",function(e,t,n,r,i,o,a,s,l){function u(e){var t="+ Add Bio";return e.bio&&(t="Edit Bio"),t}function c(e){var t="+ Add Members";return e[0]&&(t="Manage"),t}function d(e){var t="+ Add Press Items";return e[0]&&(t="Manage"),t}function f(e){var t="+ Add Web Links";return e.length&&(t="Manage"),t}return{restrict:"E",scope:{},templateUrl:function(e,t){return"music"==t.adminFor||"songs"==t.adminFor||"albums"==t.adminFor?"artist_profile/directives/admin/music.html":"shows"==t.adminFor?"artist_profile/directives/admin/shows.html":"photos"==t.adminFor?"artist_profile/directives/admin/photos.html":"videos"==t.adminFor?"artist_profile/directives/admin/videos.html":"community"==t.adminFor?"artist_profile/directives/admin/community.html":"bio"==t.adminFor?"artist_profile/directives/admin/bio.html":"stats"==t.adminFor?"artist_profile/directives/admin/stats.html":"favorite_artists"==t.adminFor?"artist_profile/directives/admin/favorite_artists.html":"recommended_artists"==t.adminFor?"artist_profile/directives/admin/recommended_artists.html":"web_links"==t.adminFor?"artist_profile/directives/admin/web_links.html":"press"==t.adminFor?"artist_profile/directives/admin/press.html":"members"==t.adminFor?"artist_profile/directives/admin/members.html":"suggested_collections"==t.adminFor?"artist_profile/directives/admin/suggested_collections.html":void 0},link:function(e,p,g){e.adminControls=o,e.dropdownId=t.generate(),e.viewPort=a,e.baseUrl=n.BASE_URL,("music"==g.adminFor||"albums"==g.adminFor||"songs"==g.adminFor)&&(e.musicType=g.adminFor),r.getArtist().then(function(t){e.artist=t,"bio"==g.adminFor&&(e.bioText=u(e.artist))}),"members"===g.adminFor&&r.getMembers().then(function(t){e.members=t,e.memberText=c(e.members)}),"press"===g.adminFor&&i.getPress().then(function(t){e.press=t,e.pressText=d(e.press)}),"web_links"===g.adminFor&&s.get().then(function(t){e.links=t.ARTIST_WEBSITES,l.isEnabled("Blog")||(e.links=_.filter(e.links,function(e){return"Blog"!=e.website})),e.webLinksText=f(e.links)})}}}])}),define("artist_profile/directives/album_action",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.directive("albumAction",["$window","$http","MusicService",function(e,t,n){return{restrict:"A",link:function(t,r,i){var o=i.ajaxUrl,a=i.albumId;a&&o&&r.on("click",function(){t.$evalAsync(function(){$j.post("/library/"+o,{item_id:a}).done(function(){n.refreshAlbums()}).fail(function(){e.Reverb.Notification.warning("Something went wrong. Please try again later.")})})})}}}]),n}),define("artist_profile/directives/song_action_setup",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.directive("songActionSetup",["$parse",function(e){return{restrict:"A",link:function(t,n,r){var i=e(r.songActionSetup)(t);i&&i.isStreamingEnabled()?(r.$set("dataSongAction","play"),r.$set("dataSongId",i.id)):(r.$set("dataSongAction"),r.$set("dataSongId"))}}}]),n}),define("common/angular/services/user_agent",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.factory("UserAgent",["$window",function(e){var t=(e.navigator||{}).userAgent,n=angular.lowercase(t),r=!!n.match(/android/),i=!!n.match(/(iphone|ipad|ipod)/);return{raw:t,normalized:n,ios:i,android:r,mobile:i||r||!!n.match(/blackberry|mini|windows\sce|palm/)}}]),n.directive("androidStockBrowserClass",["UserAgent",function(e){return{restrict:"A",link:function(t,n,r){if(e.android){var i=!1,o=e.normalized.match(/applewebkit\/([\d.]+)/),a=e.normalized.match(/version\/([\d.]+)/);o&&o.length>0&&parseFloat(o[1])<537?i=!0:a&&a.length>0&&(i=!0),i&&r.$addClass(r.androidStockBrowserClass||"android-stock-browser")}}}}]),n}),define("common/angular/services/uuid",["module","angular_helper"],function(e,t){var n=t.createModule(arguments),r=function(){for(var e={},t=[],n=0;256>n;n++)t[n]=(16>n?"0":"")+n.toString(16);return e.generate=function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&r|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]},e}();return n.factory("UUID",[function(){return r}]),n}),define("common/angular/services/video_player_adapter",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.service("VideoPlayerAdapter",["$q","$timeout","$window","$injector",function(e,t,n,r){var i=e.defer();t(function(){if(n.Reverb&&n.Reverb.videoPlayerReady&&n.VideoPlayerCore)n.Reverb.videoPlayerReady(function(){i.resolve(n.VideoPlayerCore.getInstance()._VideoPlayer)});else{if(!r.has("VideoPlayer"))throw new Error("Failed to locate a VideoPlayer!");i.resolve(r.get("VideoPlayer"))}},0,!1),this.getVideoPlayer=function(){return i.promise}}]),n}),define("artist_profile/directives/video_embed",["module","angular_helper","common/angular/services/user_agent","common/angular/services/uuid","common/angular/services/video_player_adapter"],function(e,t){return t.createModule(arguments).directive("videoEmbed",["$sce","$timeout","UserAgent","UUID","VideoPlayerAdapter","ArtistService","AdminControlsService","Viewport",function(e,t,n,r,i,o,a,s){return{restrict:"E",scope:{video:"=video",videoMixpanelEventSource:"@"},templateUrl:function(e,t){return"videosTab"==t.videoEmbedSource?"artist_profile/directives/video_card.html":"artist_profile/directives/embed_video.html"},link:function(l,u){if(l.viewPort=s,l.isMobile=n.mobile,l.adminControls=a,l.dropdownId=r.generate(),!l.videoMixpanelEventSource)throw new Error("Missing videoMixpanelEventSource!");l.mixpanelProperties={contentType:"video",contentId:l.video.id,source:l.videoMixpanelEventSource,sourceId:l.video.artist.id},l.$watch("video",function(n){l.artist=n.artist,l.isMobile&&(l.iframeId=r.generate(),l.iframeSource=e.trustAsResourceUrl(n.getEmbedSource(l.iframeId)),t(function(){i.getVideoPlayer().then(function(e){n.isYoutube()?e.registerYouTube(angular.element(u).find("iframe")):n.isVimeo()&&e.registerVimeo(angular.element(u).find("iframe"))})},0,!1))}),o.getArtist().then(function(e){l.artist=e
})}}}])}),function(e,t,n,r){function i(t,n){this.settings=null,this.options=e.extend({},i.Defaults,n),this.$element=e(t),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},e.each(["onResize","onThrottledResize"],e.proxy(function(t,n){this._handlers[n]=e.proxy(this[n],this)},this)),e.each(i.Plugins,e.proxy(function(e,t){this._plugins[e[0].toLowerCase()+e.slice(1)]=new t(this)},this)),e.each(i.Workers,e.proxy(function(t,n){this._pipe.push({filter:n.filter,run:e.proxy(n.run,this)})},this)),this.setup(),this.initialize()}i.Defaults={items:3,loop:!1,center:!1,rewind:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:t,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},i.Width={Default:"default",Inner:"inner",Outer:"outer"},i.Type={Event:"event",State:"state"},i.Plugins={},i.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(e){e.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(e){var t=this.settings.margin||"",n=!this.settings.autoWidth,r=this.settings.rtl,i={width:"auto","margin-left":r?t:"","margin-right":r?"":t};!n&&this.$stage.children().css(i),e.css=i}},{filter:["width","items","settings"],run:function(e){var t=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,n=null,r=this._items.length,i=!this.settings.autoWidth,o=[];for(e.items={merge:!1,width:t};r--;)n=this._mergers[r],n=this.settings.mergeFit&&Math.min(n,this.settings.items)||n,e.items.merge=n>1||e.items.merge,o[r]=i?t*n:this._items[r].width();this._widths=o}},{filter:["items","settings"],run:function(){var t=[],n=this._items,r=this.settings,i=Math.max(2*r.items,4),o=2*Math.ceil(n.length/2),a=r.loop&&n.length?r.rewind?i:Math.max(i,o):0,s="",l="";for(a/=2;a--;)t.push(this.normalize(t.length/2,!0)),s+=n[t[t.length-1]][0].outerHTML,t.push(this.normalize(n.length-1-(t.length-1)/2,!0)),l=n[t[t.length-1]][0].outerHTML+l;this._clones=t,e(s).addClass("cloned").appendTo(this.$stage),e(l).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var e=this.settings.rtl?1:-1,t=this._clones.length+this._items.length,n=-1,r=0,i=0,o=[];++n<t;)r=o[n-1]||0,i=this._widths[this.relative(n)]+this.settings.margin,o.push(r+i*e);this._coordinates=o}},{filter:["width","items","settings"],run:function(){var e=this.settings.stagePadding,t=this._coordinates,n={width:Math.ceil(Math.abs(t[t.length-1]))+2*e,"padding-left":e||"","padding-right":e||""};this.$stage.css(n)}},{filter:["width","items","settings"],run:function(e){var t=this._coordinates.length,n=!this.settings.autoWidth,r=this.$stage.children();if(n&&e.items.merge)for(;t--;)e.css.width=this._widths[this.relative(t)],r.eq(t).css(e.css);else n&&(e.css.width=e.items.width,r.css(e.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(e){e.current=e.current?this.$stage.children().index(e.current):0,e.current=Math.max(this.minimum(),Math.min(this.maximum(),e.current)),this.reset(e.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var e,t,n,r,i=this.settings.rtl?1:-1,o=2*this.settings.stagePadding,a=this.coordinates(this.current())+o,s=a+this.width()*i,l=[];for(n=0,r=this._coordinates.length;r>n;n++)e=this._coordinates[n-1]||0,t=Math.abs(this._coordinates[n])+o*i,(this.op(e,"<=",a)&&this.op(e,">",s)||this.op(t,"<",a)&&this.op(t,">",s))&&l.push(n);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+l.join("), :eq(")+")").addClass("active"),this.settings.center&&(this.$stage.children(".center").removeClass("center"),this.$stage.children().eq(this.current()).addClass("center"))}}],i.prototype.initialize=function(){if(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading")){var t,n,i;t=this.$element.find("img"),n=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:r,i=this.$element.children(n).width(),t.length&&0>=i&&this.preloadAutoWidthImages(t)}this.$element.addClass(this.options.loadingClass),this.$stage=e("<"+this.settings.stageElement+' class="'+this.settings.stageClass+'"/>').wrap('<div class="'+this.settings.stageOuterClass+'"/>'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this.$element.is(":visible")?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},i.prototype.setup=function(){var t=this.viewport(),n=this.options.responsive,r=-1,i=null;n?(e.each(n,function(e){t>=e&&e>r&&(r=Number(e))}),i=e.extend({},this.options,n[r]),delete i.responsive,i.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+r))):i=e.extend({},this.options),(null===this.settings||this._breakpoint!==r)&&(this.trigger("change",{property:{name:"settings",value:i}}),this._breakpoint=r,this.settings=i,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}}))},i.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},i.prototype.prepare=function(t){var n=this.trigger("prepare",{content:t});return n.data||(n.data=e("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(t)),this.trigger("prepared",{content:n.data}),n.data},i.prototype.update=function(){for(var t=0,n=this._pipe.length,r=e.proxy(function(e){return this[e]},this._invalidated),i={};n>t;)(this._invalidated.all||e.grep(this._pipe[t].filter,r).length>0)&&this._pipe[t].run(i),t++;this._invalidated={},!this.is("valid")&&this.enter("valid")},i.prototype.width=function(e){switch(e=e||i.Width.Default){case i.Width.Inner:case i.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},i.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},i.prototype.onThrottledResize=function(){t.clearTimeout(this.resizeTimer),this.resizeTimer=t.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},i.prototype.onResize=function(){return this._items.length?this._width===this.$element.width()?!1:this.$element.is(":visible")?(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized"))):!1:!1},i.prototype.registerEventHandlers=function(){e.support.transition&&this.$stage.on(e.support.transition.end+".owl.core",e.proxy(this.onTransitionEnd,this)),this.settings.responsive!==!1&&this.on(t,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",e.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",e.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",e.proxy(this.onDragEnd,this)))},i.prototype.onDragStart=function(t){var r=null;3!==t.which&&(e.support.transform?(r=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","),r={x:r[16===r.length?12:4],y:r[16===r.length?13:5]}):(r=this.$stage.position(),r={x:this.settings.rtl?r.left+this.$stage.width()-this.width()+this.settings.margin:r.left,y:r.top}),this.is("animating")&&(e.support.transform?this.animate(r.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===t.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=e(t.target),this._drag.stage.start=r,this._drag.stage.current=r,this._drag.pointer=this.pointer(t),e(n).on("mouseup.owl.core touchend.owl.core",e.proxy(this.onDragEnd,this)),e(n).one("mousemove.owl.core touchmove.owl.core",e.proxy(function(t){var r=this.difference(this._drag.pointer,this.pointer(t));e(n).on("mousemove.owl.core touchmove.owl.core",e.proxy(this.onDragMove,this)),Math.abs(r.x)<Math.abs(r.y)&&this.is("valid")||(t.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},i.prototype.onDragMove=function(e){var t=null,n=null,r=null,i=this.difference(this._drag.pointer,this.pointer(e)),o=this.difference(this._drag.stage.start,i);this.is("dragging")&&(e.preventDefault(),this.settings.loop?(t=this.coordinates(this.minimum()),n=this.coordinates(this.maximum()+1)-t,o.x=((o.x-t)%n+n)%n+t):(t=this.coordinates(this.settings.rtl?this.maximum():this.minimum()),n=this.coordinates(this.settings.rtl?this.minimum():this.maximum()),r=this.settings.pullDrag?-1*i.x/5:0,o.x=Math.max(Math.min(o.x,t+r),n+r)),this._drag.stage.current=o,this.animate(o.x))},i.prototype.onDragEnd=function(t){var r=this.difference(this._drag.pointer,this.pointer(t)),i=this._drag.stage.current,o=r.x>0^this.settings.rtl?"left":"right";e(n).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==r.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(i.x,0!==r.x?o:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=o,(Math.abs(r.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},i.prototype.closest=function(t,n){var r=-1,i=30,o=this.width(),a=this.coordinates();return this.settings.freeDrag||e.each(a,e.proxy(function(e,s){return t>s-i&&s+i>t?r=e:this.op(t,"<",s)&&this.op(t,">",a[e+1]||s-o)&&(r="left"===n?e+1:e),-1===r},this)),this.settings.loop||(this.op(t,">",a[this.minimum()])?r=t=this.minimum():this.op(t,"<",a[this.maximum()])&&(r=t=this.maximum())),r},i.prototype.animate=function(t){var n=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),n&&(this.enter("animating"),this.trigger("translate")),e.support.transform3d&&e.support.transition?this.$stage.css({transform:"translate3d("+t+"px,0px,0px)",transition:this.speed()/1e3+"s"}):n?this.$stage.animate({left:t+"px"},this.speed(),this.settings.fallbackEasing,e.proxy(this.onTransitionEnd,this)):this.$stage.css({left:t+"px"})},i.prototype.is=function(e){return this._states.current[e]&&this._states.current[e]>0},i.prototype.current=function(e){if(e===r)return this._current;if(0===this._items.length)return r;if(e=this.normalize(e),this._current!==e){var t=this.trigger("change",{property:{name:"position",value:e}});t.data!==r&&(e=this.normalize(t.data)),this._current=e,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},i.prototype.invalidate=function(t){return"string"===e.type(t)&&(this._invalidated[t]=!0,this.is("valid")&&this.leave("valid")),e.map(this._invalidated,function(e,t){return t})},i.prototype.reset=function(e){e=this.normalize(e),e!==r&&(this._speed=0,this._current=e,this.suppress(["translate","translated"]),this.animate(this.coordinates(e)),this.release(["translate","translated"]))},i.prototype.normalize=function(t,n){var i=this._items.length,o=n?0:this._clones.length;return!e.isNumeric(t)||1>i?t=r:(0>t||t>=i+o)&&(t=((t-o/2)%i+i)%i+o/2),t},i.prototype.relative=function(e){return e-=this._clones.length/2,this.normalize(e,!0)},i.prototype.maximum=function(e){var t,n=this.settings,r=this._coordinates.length,i=Math.abs(this._coordinates[r-1])-this._width,o=-1;if(n.loop)r=this._clones.length/2+this._items.length-1;else if(n.autoWidth||n.merge)for(;r-o>1;)Math.abs(this._coordinates[t=r+o>>1])<i?o=t:r=t;else r=n.center?this._items.length-1:this._items.length-n.items;return e&&(r-=this._clones.length/2),Math.max(r,0)},i.prototype.minimum=function(e){return e?0:this._clones.length/2},i.prototype.items=function(e){return e===r?this._items.slice():(e=this.normalize(e,!0),this._items[e])},i.prototype.mergers=function(e){return e===r?this._mergers.slice():(e=this.normalize(e,!0),this._mergers[e])},i.prototype.clones=function(t){var n=this._clones.length/2,i=n+this._items.length,o=function(e){return e%2===0?i+e/2:n-(e+1)/2};return t===r?e.map(this._clones,function(e,t){return o(t)}):e.map(this._clones,function(e,n){return e===t?o(n):null})},i.prototype.speed=function(e){return e!==r&&(this._speed=e),this._speed},i.prototype.coordinates=function(t){var n=null;return t===r?e.map(this._coordinates,e.proxy(function(e,t){return this.coordinates(t)},this)):(this.settings.center?(n=this._coordinates[t],n+=(this.width()-n+(this._coordinates[t-1]||0))/2*(this.settings.rtl?-1:1)):n=this._coordinates[t-1]||0,n)},i.prototype.duration=function(e,t,n){return Math.min(Math.max(Math.abs(t-e),1),6)*Math.abs(n||this.settings.smartSpeed)},i.prototype.to=function(e,t){var n=this.current(),r=null,i=e-this.relative(n),o=(i>0)-(0>i),a=this._items.length,s=this.minimum(),l=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(i)>a/2&&(i+=-1*o*a),e=n+i,r=((e-s)%a+a)%a+s,r!==e&&l>=r-i&&r-i>0&&(n=r-i,e=r,this.reset(n))):this.settings.rewind?(l+=1,e=(e%l+l)%l):e=Math.max(s,Math.min(l,e)),this.speed(this.duration(n,e,t)),this.current(e),this.$element.is(":visible")&&this.update()},i.prototype.next=function(e){e=e||!1,this.to(this.relative(this.current())+1,e)},i.prototype.prev=function(e){e=e||!1,this.to(this.relative(this.current())-1,e)},i.prototype.onTransitionEnd=function(e){return e!==r&&(e.stopPropagation(),(e.target||e.srcElement||e.originalTarget)!==this.$stage.get(0))?!1:(this.leave("animating"),void this.trigger("translated"))},i.prototype.viewport=function(){var r;if(this.options.responsiveBaseElement!==t)r=e(this.options.responsiveBaseElement).width();else if(t.innerWidth)r=t.innerWidth;else{if(!n.documentElement||!n.documentElement.clientWidth)throw"Can not detect viewport width.";r=n.documentElement.clientWidth}return r},i.prototype.replace=function(t){this.$stage.empty(),this._items=[],t&&(t=t instanceof jQuery?t:e(t)),this.settings.nestedItemSelector&&(t=t.find("."+this.settings.nestedItemSelector)),t.filter(function(){return 1===this.nodeType}).each(e.proxy(function(e,t){t=this.prepare(t),this.$stage.append(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)},this)),this.reset(e.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},i.prototype.add=function(t,n){var i=this.relative(this._current);n=n===r?this._items.length:this.normalize(n,!0),t=t instanceof jQuery?t:e(t),this.trigger("add",{content:t,position:n}),t=this.prepare(t),0===this._items.length||n===this._items.length?(0===this._items.length&&this.$stage.append(t),0!==this._items.length&&this._items[n-1].after(t),this._items.push(t),this._mergers.push(1*t.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)):(this._items[n].before(t),this._items.splice(n,0,t),this._mergers.splice(n,0,1*t.find("[data-merge]").andSelf("[data-merge]").attr("data-merge")||1)),this._items[i]&&this.reset(this._items[i].index()),this.invalidate("items"),this.trigger("added",{content:t,position:n})},i.prototype.remove=function(e){e=this.normalize(e,!0),e!==r&&(this.trigger("remove",{content:this._items[e],position:e}),this._items[e].remove(),this._items.splice(e,1),this._mergers.splice(e,1),this.invalidate("items"),this.trigger("removed",{content:null,position:e}))},i.prototype.preloadAutoWidthImages=function(t){t.each(e.proxy(function(t,n){this.enter("pre-loading"),n=e(n),e(new Image).one("load",e.proxy(function(e){n.attr("src",e.target.src),n.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",n.attr("src")||n.attr("data-src")||n.attr("data-src-retina"))},this))},i.prototype.destroy=function(){this.$element.off(".owl.core"),this.$stage.off(".owl.core"),e(n).off(".owl.core"),this.settings.responsive!==!1&&(t.clearTimeout(this.resizeTimer),this.off(t,"resize",this._handlers.onThrottledResize));for(var r in this._plugins)this._plugins[r].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},i.prototype.op=function(e,t,n){var r=this.settings.rtl;switch(t){case"<":return r?e>n:n>e;case">":return r?n>e:e>n;case">=":return r?n>=e:e>=n;case"<=":return r?e>=n:n>=e}},i.prototype.on=function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n)},i.prototype.off=function(e,t,n,r){e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent&&e.detachEvent("on"+t,n)},i.prototype.trigger=function(t,n,r){var o={item:{count:this._items.length,index:this.current()}},a=e.camelCase(e.grep(["on",t,r],function(e){return e}).join("-").toLowerCase()),s=e.Event([t,"owl",r||"carousel"].join(".").toLowerCase(),e.extend({relatedTarget:this},o,n));return this._supress[t]||(e.each(this._plugins,function(e,t){t.onTrigger&&t.onTrigger(s)}),this.register({type:i.Type.Event,name:t}),this.$element.trigger(s),this.settings&&"function"==typeof this.settings[a]&&this.settings[a].call(this,s)),s},i.prototype.enter=function(t){e.each([t].concat(this._states.tags[t]||[]),e.proxy(function(e,t){this._states.current[t]===r&&(this._states.current[t]=0),this._states.current[t]++},this))},i.prototype.leave=function(t){e.each([t].concat(this._states.tags[t]||[]),e.proxy(function(e,t){this._states.current[t]--},this))},i.prototype.register=function(t){if(t.type===i.Type.Event){if(e.event.special[t.name]||(e.event.special[t.name]={}),!e.event.special[t.name].owl){var n=e.event.special[t.name]._default;e.event.special[t.name]._default=function(e){return!n||!n.apply||e.namespace&&-1!==e.namespace.indexOf("owl")?e.namespace&&e.namespace.indexOf("owl")>-1:n.apply(this,arguments)},e.event.special[t.name].owl=!0}}else t.type===i.Type.State&&(this._states.tags[t.name]=this._states.tags[t.name]?this._states.tags[t.name].concat(t.tags):t.tags,this._states.tags[t.name]=e.grep(this._states.tags[t.name],e.proxy(function(n,r){return e.inArray(n,this._states.tags[t.name])===r},this)))},i.prototype.suppress=function(t){e.each(t,e.proxy(function(e,t){this._supress[t]=!0},this))},i.prototype.release=function(t){e.each(t,e.proxy(function(e,t){delete this._supress[t]},this))},i.prototype.pointer=function(e){var n={x:null,y:null};return e=e.originalEvent||e||t.event,e=e.touches&&e.touches.length?e.touches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,e.pageX?(n.x=e.pageX,n.y=e.pageY):(n.x=e.clientX,n.y=e.clientY),n},i.prototype.difference=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},e.fn.owlCarousel=function(t){var n=Array.prototype.slice.call(arguments,1);return this.each(function(){var r=e(this),o=r.data("owl.carousel");o||(o=new i(this,"object"==typeof t&&t),r.data("owl.carousel",o),e.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(t,n){o.register({type:i.Type.Event,name:n}),o.$element.on(n+".owl.carousel.core",e.proxy(function(e){e.namespace&&e.relatedTarget!==this&&(this.suppress([n]),o[n].apply(this,[].slice.call(arguments,1)),this.release([n]))},o))})),"string"==typeof t&&"_"!==t.charAt(0)&&o[t].apply(o,n)})},e.fn.owlCarousel.Constructor=i}(window.Zepto||window.jQuery,window,document),function(e,t){var n=function(t){this._core=t,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=e.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers)};n.Defaults={autoRefresh:!0,autoRefreshInterval:500},n.prototype.watch=function(){this._interval||(this._visible=this._core.$element.is(":visible"),this._interval=t.setInterval(e.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},n.prototype.refresh=function(){this._core.$element.is(":visible")!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},n.prototype.destroy=function(){var e,n;t.clearInterval(this._interval);for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(n in Object.getOwnPropertyNames(this))"function"!=typeof this[n]&&(this[n]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoRefresh=n}(window.Zepto||window.jQuery,window,document),function(e,t){var n=function(t){this._core=t,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel":e.proxy(function(t){if(t.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(t.property&&"position"==t.property.name||"initialized"==t.type))for(var n=this._core.settings,r=n.center&&Math.ceil(n.items/2)||n.items,i=n.center&&-1*r||0,o=(t.property&&t.property.value||this._core.current())+i,a=this._core.clones().length,s=e.proxy(function(e,t){this.load(t)},this);i++<r;)this.load(a/2+this._core.relative(o)),a&&e.each(this._core.clones(this._core.relative(o)),s),o++},this)},this._core.options=e.extend({},n.Defaults,this._core.options),this._core.$element.on(this._handlers)};n.Defaults={lazyLoad:!1},n.prototype.load=function(n){var r=this._core.$stage.children().eq(n),i=r&&r.find(".owl-lazy");!i||e.inArray(r.get(0),this._loaded)>-1||(i.each(e.proxy(function(n,r){var i,o=e(r),a=t.devicePixelRatio>1&&o.attr("data-src-retina")||o.attr("data-src");this._core.trigger("load",{element:o,url:a},"lazy"),o.is("img")?o.one("load.owl.lazy",e.proxy(function(){o.css("opacity",1),this._core.trigger("loaded",{element:o,url:a},"lazy")},this)).attr("src",a):(i=new Image,i.onload=e.proxy(function(){o.css({"background-image":"url("+a+")",opacity:"1"}),this._core.trigger("loaded",{element:o,url:a},"lazy")},this),i.src=a)},this)),this._loaded.push(r.get(0)))},n.prototype.destroy=function(){var e,t;for(e in this.handlers)this._core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Lazy=n}(window.Zepto||window.jQuery,window,document),function(e){var t=function(n){this._core=n,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.autoHeight&&"position"==e.property.name&&this.update()},this),"loaded.owl.lazy":e.proxy(function(e){e.namespace&&this._core.settings.autoHeight&&e.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=e.extend({},t.Defaults,this._core.options),this._core.$element.on(this._handlers)};t.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},t.prototype.update=function(){this._core.$stage.parent().height(this._core.$stage.children().eq(this._core.current()).height()).addClass(this._core.settings.autoHeightClass)},t.prototype.destroy=function(){var e,t;for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.AutoHeight=t}(window.Zepto||window.jQuery,window,document),function(e,t,n){var r=function(t){this._core=t,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":e.proxy(function(e){e.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.video&&this.isInFullScreen()&&e.preventDefault()},this),"refreshed.owl.carousel":e.proxy(function(e){e.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":e.proxy(function(e){e.namespace&&"position"===e.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":e.proxy(function(t){if(t.namespace){var n=e(t.content).find(".owl-video");n.length&&(n.css("display","none"),this.fetch(n,e(t.content)))}},this)},this._core.options=e.extend({},r.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",e.proxy(function(e){this.play(e)},this))};r.Defaults={video:!1,videoHeight:!1,videoWidth:!1},r.prototype.fetch=function(e,t){var n=e.attr("data-vimeo-id")?"vimeo":"youtube",r=e.attr("data-vimeo-id")||e.attr("data-youtube-id"),i=e.attr("data-width")||this._core.settings.videoWidth,o=e.attr("data-height")||this._core.settings.videoHeight,a=e.attr("href");if(!a)throw new Error("Missing video URL.");if(r=a.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),r[3].indexOf("youtu")>-1)n="youtube";else{if(!(r[3].indexOf("vimeo")>-1))throw new Error("Video URL not supported.");n="vimeo"}r=r[6],this._videos[a]={type:n,id:r,width:i,height:o},t.attr("data-video",a),this.thumbnail(e,this._videos[a])},r.prototype.thumbnail=function(t,n){var r,i,o,a=n.width&&n.height?'style="width:'+n.width+"px;height:"+n.height+'px;"':"",s=t.find("img"),l="src",u="",c=this._core.settings,d=function(e){i='<div class="owl-video-play-icon"></div>',r=c.lazyLoad?'<div class="owl-video-tn '+u+'" '+l+'="'+e+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+e+')"></div>',t.after(r),t.after(i)};return t.wrap('<div class="owl-video-wrapper"'+a+"></div>"),this._core.settings.lazyLoad&&(l="data-src",u="owl-lazy"),s.length?(d(s.attr(l)),s.remove(),!1):void("youtube"===n.type?(o="http://img.youtube.com/vi/"+n.id+"/hqdefault.jpg",d(o)):"vimeo"===n.type&&e.ajax({type:"GET",url:"http://vimeo.com/api/v2/video/"+n.id+".json",jsonp:"callback",dataType:"jsonp",success:function(e){o=e[0].thumbnail_large,d(o)}}))},r.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},r.prototype.play=function(t){var n,r=e(t.target),i=r.closest("."+this._core.settings.itemClass),o=this._videos[i.attr("data-video")],a=o.width||"100%",s=o.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),i=this._core.items(this._core.relative(i.index())),this._core.reset(i.index()),"youtube"===o.type?n='<iframe width="'+a+'" height="'+s+'" src="http://www.youtube.com/embed/'+o.id+"?autoplay=1&v="+o.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===o.type&&(n='<iframe src="http://player.vimeo.com/video/'+o.id+'?autoplay=1" width="'+a+'" height="'+s+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>'),e('<div class="owl-video-frame">'+n+"</div>").insertAfter(i.find(".owl-video")),this._playing=i.addClass("owl-video-playing"))},r.prototype.isInFullScreen=function(){var t=n.fullscreenElement||n.mozFullScreenElement||n.webkitFullscreenElement;return t&&e(t).parent().hasClass("owl-video-frame")},r.prototype.destroy=function(){var e,t;this._core.$element.off("click.owl.video");for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Video=r}(window.Zepto||window.jQuery,window,document),function(e,t,n,r){var i=function(t){this.core=t,this.core.options=e.extend({},i.Defaults,this.core.options),this.swapping=!0,this.previous=r,this.next=r,this.handlers={"change.owl.carousel":e.proxy(function(e){e.namespace&&"position"==e.property.name&&(this.previous=this.core.current(),this.next=e.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":e.proxy(function(e){e.namespace&&(this.swapping="translated"==e.type)},this),"translate.owl.carousel":e.proxy(function(e){e.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};i.Defaults={animateOut:!1,animateIn:!1},i.prototype.swap=function(){if(1===this.core.settings.items&&e.support.animation&&e.support.transition){this.core.speed(0);var t,n=e.proxy(this.clear,this),r=this.core.$stage.children().eq(this.previous),i=this.core.$stage.children().eq(this.next),o=this.core.settings.animateIn,a=this.core.settings.animateOut;this.core.current()!==this.previous&&(a&&(t=this.core.coordinates(this.previous)-this.core.coordinates(this.next),r.one(e.support.animation.end,n).css({left:t+"px"}).addClass("animated owl-animated-out").addClass(a)),o&&i.one(e.support.animation.end,n).addClass("animated owl-animated-in").addClass(o))}},i.prototype.clear=function(t){e(t.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},i.prototype.destroy=function(){var e,t;for(e in this.handlers)this.core.$element.off(e,this.handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.Animate=i}(window.Zepto||window.jQuery,window,document),function(e,t,n){var r=function(t){this._core=t,this._interval=null,this._paused=!1,this._handlers={"changed.owl.carousel":e.proxy(function(e){e.namespace&&"settings"===e.property.name&&(this._core.settings.autoplay?this.play():this.stop())},this),"initialized.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":e.proxy(function(e,t,n){e.namespace&&this.play(t,n)},this),"stop.owl.autoplay":e.proxy(function(e){e.namespace&&this.stop()},this),"mouseover.owl.autoplay":e.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":e.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=e.extend({},r.Defaults,this._core.options)
};r.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},r.prototype.play=function(r,i){this._paused=!1,this._core.is("rotating")||(this._core.enter("rotating"),this._interval=t.setInterval(e.proxy(function(){this._paused||this._core.is("busy")||this._core.is("interacting")||n.hidden||this._core.next(i||this._core.settings.autoplaySpeed)},this),r||this._core.settings.autoplayTimeout))},r.prototype.stop=function(){this._core.is("rotating")&&(t.clearInterval(this._interval),this._core.leave("rotating"))},r.prototype.pause=function(){this._core.is("rotating")&&(this._paused=!0)},r.prototype.destroy=function(){var e,t;this.stop();for(e in this._handlers)this._core.$element.off(e,this._handlers[e]);for(t in Object.getOwnPropertyNames(this))"function"!=typeof this[t]&&(this[t]=null)},e.fn.owlCarousel.Constructor.Plugins.autoplay=r}(window.Zepto||window.jQuery,window,document),function(e){var t=function(n){this._core=n,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":e.proxy(function(t){t.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+e(t.content).find("[data-dot]").andSelf("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.dotsData&&this._templates.splice(e.position,0,this._templates.pop())},this),"remove.owl.carousel":e.proxy(function(e){e.namespace&&this._core.settings.dotsData&&this._templates.splice(e.position,1)},this),"changed.owl.carousel":e.proxy(function(e){e.namespace&&"position"==e.property.name&&this.draw()},this),"initialized.owl.carousel":e.proxy(function(e){e.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":e.proxy(function(e){e.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=e.extend({},t.Defaults,this._core.options),this.$element.on(this._handlers)};t.Defaults={nav:!1,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},t.prototype.initialize=function(){var t,n=this._core.settings;this._controls.$relative=(n.navContainer?e(n.navContainer):e("<div>").addClass(n.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=e("<"+n.navElement+">").addClass(n.navClass[0]).html(n.navText[0]).prependTo(this._controls.$relative).on("click",e.proxy(function(){this.prev(n.navSpeed)},this)),this._controls.$next=e("<"+n.navElement+">").addClass(n.navClass[1]).html(n.navText[1]).appendTo(this._controls.$relative).on("click",e.proxy(function(){this.next(n.navSpeed)},this)),n.dotsData||(this._templates=[e("<div>").addClass(n.dotClass).append(e("<span>")).prop("outerHTML")]),this._controls.$absolute=(n.dotsContainer?e(n.dotsContainer):e("<div>").addClass(n.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","div",e.proxy(function(t){var r=e(t.target).parent().is(this._controls.$absolute)?e(t.target).index():e(t.target).parent().index();t.preventDefault(),this.to(r,n.dotsSpeed)},this));for(t in this._overrides)this._core[t]=e.proxy(this[t],this)},t.prototype.destroy=function(){var e,t,n,r;for(e in this._handlers)this.$element.off(e,this._handlers[e]);for(t in this._controls)this._controls[t].remove();for(r in this.overides)this._core[r]=this._overrides[r];for(n in Object.getOwnPropertyNames(this))"function"!=typeof this[n]&&(this[n]=null)},t.prototype.update=function(){var e,t,n,r=this._core.clones().length/2,i=r+this._core.items().length,o=this._core.maximum(!0),a=this._core.settings,s=a.center||a.autoWidth||a.dotsData?1:a.dotsEach||a.items;if("page"!==a.slideBy&&(a.slideBy=Math.min(a.slideBy,a.items)),a.dots||"page"==a.slideBy)for(this._pages=[],e=r,t=0,n=0;i>e;e++){if(t>=s||0===t){if(this._pages.push({start:Math.min(o,e-r),end:e-r+s-1}),Math.min(o,e-r)===o)break;t=0,++n}t+=this._core.mergers(this._core.relative(e))}},t.prototype.draw=function(){var t,n=this._core.settings,r=this._core.items().length<=n.items,i=this._core.relative(this._core.current()),o=n.loop||n.rewind;this._controls.$relative.toggleClass("disabled",!n.nav||r),n.nav&&(this._controls.$previous.toggleClass("disabled",!o&&i<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!o&&i>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!n.dots||r),n.dots&&(t=this._pages.length-this._controls.$absolute.children().length,n.dotsData&&0!==t?this._controls.$absolute.html(this._templates.join("")):t>0?this._controls.$absolute.append(new Array(t+1).join(this._templates[0])):0>t&&this._controls.$absolute.children().slice(t).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(e.inArray(this.current(),this._pages)).addClass("active"))},t.prototype.onTrigger=function(t){var n=this._core.settings;t.page={index:e.inArray(this.current(),this._pages),count:this._pages.length,size:n&&(n.center||n.autoWidth||n.dotsData?1:n.dotsEach||n.items)}},t.prototype.current=function(){var t=this._core.relative(this._core.current());return e.grep(this._pages,e.proxy(function(e){return e.start<=t&&e.end>=t},this)).pop()},t.prototype.getPosition=function(t){var n,r,i=this._core.settings;return"page"==i.slideBy?(n=e.inArray(this.current(),this._pages),r=this._pages.length,t?++n:--n,n=this._pages[(n%r+r)%r].start):(n=this._core.relative(this._core.current()),r=this._core.items().length,t?n+=i.slideBy:n-=i.slideBy),n},t.prototype.next=function(t){e.proxy(this._overrides.to,this._core)(this.getPosition(!0),t)},t.prototype.prev=function(t){e.proxy(this._overrides.to,this._core)(this.getPosition(!1),t)},t.prototype.to=function(t,n,r){var i;r?e.proxy(this._overrides.to,this._core)(t,n):(i=this._pages.length,e.proxy(this._overrides.to,this._core)(this._pages[(t%i+i)%i].start,n))},e.fn.owlCarousel.Constructor.Plugins.Navigation=t}(window.Zepto||window.jQuery,window,document),function(e,t,n,r){var i=function(n){this._core=n,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":e.proxy(function(n){n.namespace&&"URLHash"===this._core.settings.startPosition&&e(t).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":e.proxy(function(t){if(t.namespace){var n=e(t.content).find("[data-hash]").andSelf("[data-hash]").attr("data-hash");if(!n)return;this._hashes[n]=t.content}},this),"changed.owl.carousel":e.proxy(function(n){if(n.namespace&&"position"===n.property.name){var r=this._core.items(this._core.relative(this._core.current())),i=e.map(this._hashes,function(e,t){return e===r?t:null}).join();if(!i||t.location.hash.slice(1)===i)return;t.location.hash=i}},this)},this._core.options=e.extend({},i.Defaults,this._core.options),this.$element.on(this._handlers),e(t).on("hashchange.owl.navigation",e.proxy(function(){var e=t.location.hash.substring(1),n=this._core.$stage.children(),i=this._hashes[e]&&n.index(this._hashes[e]);i!==r&&i!==this._core.current()&&this._core.to(this._core.relative(i),!1,!0)},this))};i.Defaults={URLhashListener:!1},i.prototype.destroy=function(){var n,r;e(t).off("hashchange.owl.navigation");for(n in this._handlers)this._core.$element.off(n,this._handlers[n]);for(r in Object.getOwnPropertyNames(this))"function"!=typeof this[r]&&(this[r]=null)},e.fn.owlCarousel.Constructor.Plugins.Hash=i}(window.Zepto||window.jQuery,window,document),function(e,t,n,r){function i(t,n){var i=!1,o=t.charAt(0).toUpperCase()+t.slice(1);return e.each((t+" "+s.join(o+" ")+o).split(" "),function(e,t){return a[t]!==r?(i=n?t:!0,!1):void 0}),i}function o(e){return i(e,!0)}var a=e("<support>").get(0).style,s="Webkit Moz O ms".split(" "),l={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},u={csstransforms:function(){return!!i("transform")},csstransforms3d:function(){return!!i("perspective")},csstransitions:function(){return!!i("transition")},cssanimations:function(){return!!i("animation")}};u.csstransitions()&&(e.support.transition=new String(o("transition")),e.support.transition.end=l.transition.end[e.support.transition]),u.cssanimations()&&(e.support.animation=new String(o("animation")),e.support.animation.end=l.animation.end[e.support.animation]),u.csstransforms()&&(e.support.transform=new String(o("transform")),e.support.transform3d=u.csstransforms3d())}(window.Zepto||window.jQuery,window,document),define("vendor/owlcarousel/owl.carousel",function(){}),define("artist_profile/directives/photo_display",["module","angular_helper","vendor/owlcarousel/owl.carousel"],function(e,t){return t.createModule(arguments).directive("photoDisplay",["$window",function(e){return{restrict:"A",link:function(t,n,r){n.off("click").on("click",function(t){var n=angular.element(t.currentTarget).find("img:first");if(n.attr("data-id")){var i="photo_"+n.attr("data-id");e.modal_open(r.url+"/"+i)}})}}}])}),define("artist_profile/directives/photo_carousel",["module","angular_helper","vendor/owlcarousel/owl.carousel"],function(e,t){return t.createModule(arguments).directive("photoCarousel",["$window","$timeout","Config","ArtistPhotos","ArtistService","ArtistColorPalette",function(e,t,n,r,i,o){return{templateUrl:function(){return"artist_profile/directives/photo_carousel.html"},restrict:"E",link:function(e){function a(){s.parent().hide(),s.trigger("destroy.owl.carousel").removeClass("owl-loaded"),s.find(".owl-stage-outer").children().unwrap(),s.find(".owl-item").remove(),s.owlCarousel({lazyLoad:!0,responsiveClass:!0,slideBy:"page",margin:8,responsive:{0:{items:2,nav:!1},480:{items:3,nav:!1},700:{items:2,nav:!1},850:{items:3,nav:!1},1200:{items:4,nav:!0},1450:{items:5,nav:!0},1600:{items:6,nav:!0}}}),s.on("initialize.owl.carousel",function(){angular.element(this).parent().show(),angular.element(this).removeClass("owl-hidden")})}var s=angular.element(".owl-carousel");r.getPhotos().then(function(n){e.photos=n,s.parent().hide(),t(function(){a()},1)}),e.defaultEmptyImgUrl=n.STATIC_CACHE_SERVER+"/images/v3/standard_resources/default_images/empty_photo.jpg",e.$watchCollection(function(){return e.photos},function(e){e&&(s.parent().hide(),t(function(){a()},1))}),e.$on("reverb:cover_photo:pending",function(){s.parent().hide()}),e.$on("reverb:cover_photo:loaded",function(){a()}),e.$on("reverb:cover_photo:removed",function(){i.setCoverPhotoId(0),o.refreshPalette(!1),s.parent().hide(),t(function(){a()},1)}),e.$on("reverb:cover_photo:error",function(){a()})}}}])}),define("artist_profile/directives/layout",["module","angular_helper","common/angular/services/custom_if","artist_profile/services/layout"],function(e,t){var n=t.createModule(arguments);return n.directive("ifLayoutEnabled",["CustomIf","Layout",function(e,t){return e.createDirective(function(e,n,r){return t.isEnabled(r.ifLayoutEnabled)})}]),n}),define("artist_profile/directives/profile_photo",["module","angular_helper","artist_profile/services/artist_service"],function(e,t){var n=function(e,t,n,r,i,o){var a=function(t,n,r){function a(){return o.userCanMaintain&&!i.getProfilePhotoId()}t.profilePhotoClass=r.profilePhotoClass,t.handleModalDisplay=function(){var n=i.getProfilePhotoId();return n?void e.modal_open("/artist/view_photo_popup/photo_"+n):void(o.userCanMaintain&&e.modal_open("/control_room/artist/"+t.artist.id+"/upload_photo?profile_photo=true"))},i.getArtist().then(function(e){t.artist=e,t.displayAddProfilePhoto=a()}),t.$watch(function(){return t.artist.thumbnail},function(e,n){e!==n&&(t.displayAddProfilePhoto=a())}),t.$watch(function(){return o.userCanMaintain},function(e,n){e!==n&&(t.displayAddProfilePhoto=a())})};return{restrict:"E",templateUrl:"artist_profile/directives/profile_photo.html",link:a}};return t.createModule(arguments).directive("artistProfilePhoto",["$window","$filter","Config","Viewport","ArtistService","AdminControlsService",n])}),define("artist_profile/directives/scroll_to",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.directive("navigationScrollTo",["$window","AdminControlsService",function(e,t){function n(t){var n=angular.element(e),r={top:n.scrollTop(),left:n.scrollLeft()};r.right=r.left+n.width(),r.bottom=r.top+n.height();var i=t.offset();i.right=i.left+t.outerWidth(),i.bottom=i.top+t.outerHeight();var o=!(r.right<i.left||r.left>i.right||r.bottom<i.top||r.top>i.bottom);return o}return{restrict:"A",scope:{scrollOffset:"="},link:function(r,i){var o="artist_profile:tab_navigation",a={defaultScrollOffset:-r.scrollOffset,scrollSpeed:250};a.performScroll=function(){if(!n(i)){var e=t.userCanMaintain?0:a.defaultScrollOffset;angular.element("html, body").animate({scrollTop:i.offset().top-e},a.scrollSpeed)}},e.Reverb.Event.bind(o,i,function(){a.performScroll()}),r.$on("$destroy",function(){i.find("."+o.split(":")[0]+"_event_handler").unbind(o)})}}}]),n}),define("artist_profile/directives/show_google_map",["module","angular_helper"],function(e,t){var n=function(e,t,n,r,i,o){return{restrict:"E",templateUrl:"artist_profile/directives/show_google_map.html",scope:{show:"=show",page:"@page"},compile:function(){function e(e,r){r.utc_showtime=new Date(e.showtime);var i=n.get("googleMapInfoContent.html"),a=t(i)(r),s=o.getStyles("artist_profile");return{offset_x:10,offset_y:10,wrapperName:"info_box_overlay",content:a,styles:s,percentHeight:.28,lat:e.location.latitude,"long":e.location.longitude,address:e.location.address}}return{pre:function(t){var n=t.show;n&&(t.options=e(n,t))}}}}};return t.createModule(arguments).directive("showGoogleMap",["$filter","$interpolate","$templateCache","Location","ArtistShows","GoogleMapService",n])}),define("artist_profile/directives/show_details_card",["module","angular_helper"],function(e,t){var n=function(e,t,n,r,i){return{restrict:"EA",scope:{show:"=show",past:"=past"},templateUrl:function(e,t){return t.sidebar?"artist_profile/directives/sidebar_show_card.html":"artist_profile/directives/show_card.html"},link:function(e){e.adminControls=i,e.displayShowPage=function(){t.url("/show/"+e.show.id)},r.getArtist().then(function(t){e.artist=t}),e.dropdownId=n.generate()}}};return t.createModule(arguments).directive("showDetailsCard",["$http","$location","UUID","ArtistService","AdminControlsService",n])}),define("artist_profile/directives/song_details_card",["module","angular_helper","common/angular/services/uuid"],function(e,t){return t.createModule(arguments).directive("songDetailsCard",["$window","$q","UUID","Config","ArtistService","MusicService","AdminControlsService","Viewport","Layout",function(e,t,n,r,i,o,a,s,l){function u(e,t){var n=_.findIndex(e,function(e){return t.id==e.id}),r=e.splice(n,e.length-n);return r=r.concat(e),r.shift(),_.pluck(r,"id")}function c(e){var t=[];return _.each(e,function(e){t=t.concat(_.pluck(e.songs,"id"))}),_.uniq(t)}return{templateUrl:function(){return"artist_profile/directives/song_card.html"},restrict:"EA",scope:{song:"=songDetailsCard",songShowLikeButton:"=",trackNumber:"@songDetailsCardTrackNumber",mixpanelEventSource:"@songDetailsCardMixpanelEventSource",songsToQueue:"@songDetailsCardSongsToQueue",queueType:"@songDetailsCardQueueType",queueLimit:"@songDetailsCardQueueLimit"},link:function(d){if(d.viewPort=s,d.defaultImage=r.STATIC_CACHE_SERVER+"/images/v3/standard_resources/default_images/artist_big_thumb.png",d.adminControls=a,!d.mixpanelEventSource)throw new Error("Missing mixpanelEventSource!");d.mixpanelProperties={contentType:"song",contentId:d.song.id,source:d.mixpanelEventSource,sourceId:d.song.artist.id},d.dropdownId=n.generate(),d.songsToQueue&&"album"===d.queueType?o.getAlbums().then(function(e){var t=_.findWhere(e,{id:parseInt(d.songsToQueue,10)});d.songOptions={clear_queue:!0,queue_songs:u(angular.copy(t.songs),d.song).join(","),context:"album_"+d.songsToQueue}}):"featured"===d.queueType?o.getFeaturedSongs().then(function(e){var t=angular.copy(e);d.queueLimit&&(t=_.first(t,parseInt(d.queueLimit,10))),d.songOptions={clear_queue:!0,queue_songs:u(t,d.song).join(",")}}):"tracks"===d.queueType?t.all([o.getTracks(),o.getAlbums()]).then(function(e){var t=angular.copy(e[0]),n=angular.copy(e[1]),r=c(n);d.songOptions={clear_queue:!0,queue_songs:u(t,d.song).concat(r).join(",")}}):d.songOptions={},d.buyExternal=function(t,n){n&&(n.preventDefault(),n.stopPropagation());var r=e.open(t,"_blank");r.location},i.getArtist().then(function(e){d.artist=e}),"featured"===d.queueType?(l.isFullWidthOverviewSection("music",!0).then(function(e){d.songFullWidthRow=e}),d.$watch(function(){return a.userCanMaintain},function(e,t){e!==t&&l.isFullWidthOverviewSection("music",!0).then(function(e){d.songFullWidthRow=e})})):"album"===d.queueType?d.songFullWidthRow=!1:"tracks"===d.queueType&&(d.songFullWidthRow=!0)}}}])}),define("artist_profile/directives/listeners/library",["module","angular_helper","artist_profile/services/music_service"],function(e,t){var n=t.createModule(arguments);return n.directive("libraryEventHandler",["MusicService",function(e){var t=function(t,n,r){"Song"==r.type?e.refreshSong(r.id):"Video"==r.type};return{restrict:"A",link:function(e){e.$on("reverb:library:add",t),e.$on("reverb:library:remove",t)}}}]),n}),define("artist_profile/directives/listeners/location",["module","angular_helper","artist_profile/services/location","artist_profile/services/artist_show_service"],function(e,t){var n=t.createModule(arguments);return n.directive("locationEventHandler",["Location","ArtistShows",function(e,t){return{restrict:"A",link:function(n){n.$on("reverb:location:validated",function(n,r,i){angular.copy({},e),e.city=i.city,e.state=i.state,e.country=i.country,e.postal_code=i.zip,t.refreshLocalShows(e)})}}}]),n}),define("artist_profile/directives/listeners/song",["module","angular_helper","artist_profile/services/music_service"],function(e,t){var n=t.createModule(arguments);return n.directive("songEventHandler",["$window","MusicService","Config",function(e,t){return{restrict:"A",link:function(e){e.$on("reverb:song:update",function(e,n,r){t.refreshSong(r.id,r)})}}}]),n}),define("artist_profile/directives/listeners/photo",["module","angular_helper","artist_profile/services/artist_photo_service","artist_profile/services/artist_color_palette","artist_profile/services/artist_service"],function(e,t){var n=t.createModule(arguments);return n.directive("photoEventHandler",["$q","ArtistPhotos","ArtistColorPalette","ArtistService",function(e,t,n,r){return{restrict:"A",replace:!0,link:function(e){var i=!1;e.$on("reverb:cover_photo:saved",function(e,t,o){n.refreshPalette(i),o.photo&&r.setCoverPhotoId(o.photo.image.id)}),e.$on("reverb:photo:upload",function(e,o,a){a.is_profile_image?(angular.element(".owl-carousel").parent().hide(),r.refreshArtist(),n.refreshPalette(i),r.setProfilePhotoId(a.id),t.refreshPhotos().then(function(e){e.unshift(e.pop()),t.reorder()})):t.refreshPhotos().then(function(e){e.unshift(e.pop()),t.reorder()})})}}}]),n}),define("artist_profile/directives/listeners/video",["module","angular_helper","artist_profile/services/artist_video_service"],function(e,t){var n=t.createModule(arguments);return n.directive("videoEventHandler",["$timeout","ArtistVideos",function(e,t){return{restrict:"A",link:function(n){n.$on("reverb:video:add",function(n,r,i){t.refreshVideo(i.id,i.video||i).then(function(){e(function(){angular.element(document).foundation("equalizer","reflow")},0)})}),n.$on("reverb:video:added_videos",function(){t.refreshVideos().then(function(){e(function(){angular.element(document).foundation("equalizer","reflow")},0)})})}}}]),n}),define("artist_profile/directives/listeners/community",["module","angular_helper","artist_profile/services/artist_community_service"],function(e,t){var n=t.createModule(arguments);return n.directive("communityEventHandler",["ArtistCommunity","AdminControlsService",function(e,t){return{restrict:"A",link:function(n){n.$on("reverb:comment:post",function(){e.refreshComments()}),n.$on("reverb:fan:became_fan",function(n,r,i){t.userIsFan=i.is_fan,e.refreshFans()}),n.$on("reverb:status:update",function(){e.refreshStatus()}),n.$on("reverb:socialsync:update",function(){e.refreshStatus()})}}}]),n}),define("artist_profile/directives/listeners/config",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.directive("configEventHandler",[function(){return{restrict:"A",link:function(e){e.$on("reverb:artist_profile_configuration:update",function(e,t,n){n.url?Reverb.Navigate.go_to_page_url(n.url):Reverb.Navigate.reload_current_page()})}}}]),n}),define("artist_profile/directives/listeners/admin",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.directive("adminEventHandler",["AdminControlsService","Layout",function(e,t){return{restrict:"A",link:function(n){n.$on("reverb:artist_profile:fan_view",function(n,r,i){e.userCanMaintain=!i.isViewAsFan,t.getTemplates()})}}}]),n}),define("artist_profile/directives/listeners/members",["module","angular_helper","artist_profile/services/artist_service"],function(e,t){var n=t.createModule(arguments);return n.directive("memberEventHandler",["ArtistService",function(e){return{restrict:"A",link:function(t){t.$on("reverb:musician:add_member",function(){e.refreshMembers()})}}}]),n}),define("artist_profile/directives/sidebar_item_card",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.directive("sidebarItemCard",["$location","Config","ParseURL",function(e,t,n){var r=t.STATIC_CACHE_SERVER+"/images/v3/standard_resources/default_images/artist_big_thumb.png";return{restrict:"EA",templateUrl:"artist_profile/directives/sidebar_item_card.html",scope:{image:"@",imageClasses:"@",defaultImage:"@",title:"@",subtitle:"@",link:"@"},link:function(t){t.defaultImage||(t.defaultImage=r),t.navigateToItem=function(){if(t.link){var r=new n(t.link);e.url(r.pathname+r.search+r.hash)}}}}}]),n}),define("artist_profile/directives/can_promote",["module","angular_helper","common/angular/services/custom_if","artist_profile/services/can_promote"],function(e,t){var n=t.createModule(arguments);return n.directive("ifCanPromote",["$parse","CustomIf","CanPromote",function(e,t,n){return t.createDirective(function(t,r,i){return n.isEligible(e(i.ifCanPromote)(t))})}]),n}),define("artist_profile/directives/become_fan",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.directive("becomeFanButton",["AdminControlsService","ArtistService",function(e,t){return{restrict:"E",templateUrl:function(){return"artist_profile/directives/become_fan_button.html"},link:function(n,r,i){n.primary=!!i.primary,n.adminControls=e,t.getArtist().then(function(e){n.artist=e})}}}]),n}),define("artist_profile/directives/common/marketing",["module","angular_helper"],function(e,t){var n=function(e,t,n){return{restrict:"E",scope:{innerClass:"@",unit:"@"},templateUrl:"artist_profile/directives/common/marketing_module.html",link:function(r,i){var o=this;r.adminControls=e,r.isPaidSubscriber=t.isPaidSubscriber(),r.$on("marketing_slot:loaded",function(){i.find(".marketing-module").addClass(r.innerClass),i.find(".marketing-module").addClass("expand")});var a=n.defer();r.targeting=a.promise,t.getArtist().then(function(e){o.artist=e,a.resolve({genre:e.genres[0]})}),r.openUpsell=function(){o.artist&&modal_open("/membership/product_upsell_modal?bubble=true&page_object_id=artist_"+o.artist.id+"&target_product=ad_free&premium=true")}}}};return t.createModule(arguments).directive("marketingModule",["AdminControlsService","ArtistService","$q",n])}),define("artist_profile/directives/common/empty_state",["module","angular_helper"],function(e,t){var n=function(e,t){var n=function(n){n.viewPort=t,e.getArtist().then(function(e){n.artist=e})};return{restrict:"E",scope:{active:"="},templateUrl:function(e,t){switch(t.type){case"community":return"artist_profile/directives/common/empty_states/community.html";case"videos":return"artist_profile/directives/common/empty_states/videos.html";case"shows":return"artist_profile/directives/common/empty_states/shows.html";case"songs":return"artist_profile/directives/common/empty_states/songs.html";case"albums":return"artist_profile/directives/common/empty_states/albums.html";case"photos":return"artist_profile/directives/common/empty_states/photos.html";case"profile_photo":return"artist_profile/directives/common/empty_states/profile_photo.html";default:return}},link:n}};return t.createModule(arguments).directive("emptyState",["ArtistService","Viewport",n])}),define("artist_profile/directives/social/share_button",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.directive("shareButton",["$q","AdminControlsService","ArtistService","MusicService","Viewport",function(e,t,n,r,i){return{restrict:"E",templateUrl:function(e,t){return"header"==t.type?"artist_profile/directives/social/header_share_artist.html":"sidebar"==t.type?"artist_profile/directives/social/share_artist.html":"small-button"==t.type?"artist_profile/directives/social/small_share_artist.html":void 0},link:function(o){o.viewPort=i,o.adminControls=t,o.hasProfilePicture=function(){return n.getProfilePhotoId()>0},o.hasSongs=function(){return o.songs&&o.songs.length||o.albums&&o.albums.length},n.getArtist().then(function(e){o.dataUrl="/page_object/share_page_object/artist_"+e.id}),e.all([r.getAlbums(),r.getTracks()]).then(function(e){o.songs=e[0],o.albums=e[1]})}}}]),n}),define("artist_profile/directives/all",["module","angular_helper","common/angular/directives/background_cover","common/angular/directives/delayed","common/angular/directives/event_listener","common/angular/directives/marketing_slot","common/angular/directives/player_scrubber","common/angular/directives/resize","common/angular/directives/rn_song","common/angular/directives/toggle","common/angular/directives/viewport","common/angular/directives/viewport_image","common/angular/directives/waveform","common/angular/directives/tooltip","common/angular/directives/google_map_info_box","artist_profile/directives/admin_buttons","artist_profile/directives/album_action","artist_profile/directives/song_action_setup","artist_profile/directives/video_embed","artist_profile/directives/photo_display","artist_profile/directives/photo_carousel","artist_profile/directives/layout","artist_profile/directives/profile_photo","artist_profile/directives/scroll_to","artist_profile/directives/show_google_map","artist_profile/directives/show_details_card","artist_profile/directives/song_details_card","artist_profile/directives/listeners/library","artist_profile/directives/listeners/location","artist_profile/directives/listeners/song","artist_profile/directives/listeners/photo","artist_profile/directives/listeners/video","artist_profile/directives/listeners/community","artist_profile/directives/listeners/config","artist_profile/directives/listeners/admin","artist_profile/directives/listeners/members","artist_profile/directives/sidebar_item_card","artist_profile/directives/can_promote","artist_profile/directives/become_fan","artist_profile/directives/common/marketing","artist_profile/directives/common/empty_state","artist_profile/directives/social/share_button"],function(e,t){return t.createModule(arguments)}),define("artist_profile/filters/photo_filters",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.filter("filterCoverAndProfilePhotos",["ArtistService",function(e){return function(t){var n=[];return angular.forEach(t,function(t){var r=t.id===e.getProfilePhotoId(),i=t.id===e.getCoverPhotoId();r||i||n.push(t)}),n}}])}),define("artist_profile/filters/start_from",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.filter("startFrom",[function(){return function(e,t){return e?(t=+t,e.slice(t)):[]}}])}),define("artist_profile/filters/comments_filter",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.filter("commentsFilter",[function(){return function(e,t){var n=[];return angular.forEach(e,function(e){"approved"===e.status?n.push(e):"pending"===e.status&&t?n.push(e):t&&n.push(e)}),n}}])}),define("artist_profile/filters/shows_filter",["module","angular_helper"],function(e,t){var n=t.createModule(arguments);return n.filter("showsFilter",[function(){return function(e,t){var n=[];return angular.forEach(e,function(e){(!e["private"]||e["private"]&&t)&&n.push(e)}),n}}])}),define("artist_profile/filters/all",["module","angular_helper","artist_profile/filters/photo_filters","artist_profile/filters/start_from","artist_profile/filters/comments_filter","artist_profile/filters/shows_filter"],function(e,t){return t.createModule(arguments)}),define("artist_profile/app",["module","angular_helper","restangular","common/angular/config/config","common/angular/main_site_essential","common/angular/api/models/page_objects","common/angular/components/pagination","common/angular/controllers/opp_listings","common/angular/directives/foundation_reflow","common/angular/directives/fb_like_button","common/angular/directives/opportunity_card","common/angular/directives/twitter_follow_button","common/angular/directives/spinner","common/angular/directives/task","common/angular/directives/err_src","common/angular/directives/event_listener","artist_profile/directives/social/artist_fb_like_button","artist_profile/directives/social/artist_twitter_following_button","artist_dashboard/directives/key_stats","artist_dashboard/directives/modal_attributes","artist_dashboard/directives/chart_stats","artist_dashboard/directives/social_status","artist_dashboard/directives/social_sync","common/angular/services/task","common/angular/services/viewport","common/angular/filters/capitalize","common/angular/filters/duration","common/angular/filters/mega_number","common/angular/filters/replace","common/filters","opportunities/services/campaign_service","opportunities/filters/date_range","promote_it/common/services/create_url","artist_profile/controllers/all","artist_profile/services/all","artist_profile/directives/all","artist_profile/filters/all"],function(e,t){return t.createModule(arguments,"artist_profile.cached_templates","artist_profile.templates","Common.Filters","ngSanitize")}),define("artist_profile/bootstrap",["artist_profile/app"],function(e){return function(t,n){e.config(["ConfigProvider",function(e){e.setConfig(n)}]),angular.bootstrap(t,[e.name],{strictDi:!0})}}),define("modules/artist_profile",["artist_profile/bootstrap"],function(e){return e});